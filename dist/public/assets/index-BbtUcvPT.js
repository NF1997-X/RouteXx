const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lightgallery-DIyLdSLw.css","assets/lg-thumbnail-LA61IUbX.css","assets/lg-zoom-Dgc7Zwpq.css","assets/lg-autoplay-B3rOJiqo.css","assets/lg-fullscreen-aAdOoxAZ.css","assets/lg-video-CtDZYiSX.css"])))=>i.map(i=>d[i]);
var Il=e=>{throw TypeError(e)};var Ba=(e,t,r)=>t.has(e)||Il("Cannot "+r);var j=(e,t,r)=>(Ba(e,t,"read from private field"),r?r.call(e):t.get(e)),fe=(e,t,r)=>t.has(e)?Il("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),re=(e,t,r,n)=>(Ba(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ee=(e,t,r)=>(Ba(e,t,"access private method"),r);var Tn=(e,t,r,n)=>({set _(a){re(e,t,a,r)},get _(){return j(e,t,n)}});import{j as s,c as h0,a as er,u as ut,B as f0,P as Xe,V as md,b as Ms,d as Wt,e as Bt,f as Pe,R as g0,g as pd,h as hd,i as b0,k as ha,A as ti,D as fd,C as gd,l as x0,m as bd,n as xd,S as v0,T as vd,I as y0,o as yd,p as wd,q as w0,r as kd,s as k0,L as jd,t as Nd,v as j0,w as N0,x as Cd,y as C0,z as S0,O as ri,E as si,F as ni,G as ai,H as Sd,J as Ed,K as Rd,M as oi,N as ii,Q as li,U as E0,W as R0,X as D0,Y as P0,Z as A0,_ as Dd,$ as I0,a0 as fa,a1 as ci,a2 as Pd,a3 as Ad,a4 as Id,a5 as Td,a6 as Od,a7 as Ld,a8 as Md,a9 as _d,aa as Fd,ab as zd,ac as $d,ad as Bd,ae as T0,af as O0,ag as L0,ah as Ud,ai as M0,aj as _0}from"./ui-vendor-BgGzcuhe.js";import{a as ga,r as h,c as F0,R as Ce,b as z0}from"./react-vendor--0RGCJ5T.js";import{L as ba,M as $0,T as B0,a as U0,P as G0,u as Gd}from"./map-vendor-B4467gFJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var Vd,Tl=ga;Vd=Tl.createRoot,Tl.hydrateRoot;function V0(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var r,n,a,o,i=[],l="",c=e.split("/");for(c[0]||c.shift();a=c.shift();)r=a[0],r==="*"?(i.push(r),l+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=a.indexOf("?",1),o=a.indexOf(".",1),i.push(a.substring(1,~n?n:~o?o:a.length)),l+=~n&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(l+=(~n?"?":"")+"\\"+a.substring(o))):l+="/"+a;return{keys:i,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var qd={exports:{}},Wd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ss=h;function q0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var W0=typeof Object.is=="function"?Object.is:q0,H0=Ss.useState,K0=Ss.useEffect,Q0=Ss.useLayoutEffect,Y0=Ss.useDebugValue;function X0(e,t){var r=t(),n=H0({inst:{value:r,getSnapshot:t}}),a=n[0].inst,o=n[1];return Q0(function(){a.value=r,a.getSnapshot=t,Ua(a)&&o({inst:a})},[e,r,t]),K0(function(){return Ua(a)&&o({inst:a}),e(function(){Ua(a)&&o({inst:a})})},[e]),Y0(r),r}function Ua(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!W0(e,r)}catch{return!0}}function J0(e,t){return t()}var Z0=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?J0:X0;Wd.useSyncExternalStore=Ss.useSyncExternalStore!==void 0?Ss.useSyncExternalStore:Z0;qd.exports=Wd;var eg=qd.exports;const tg=F0.useInsertionEffect,rg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sg=rg?h.useLayoutEffect:h.useEffect,ng=tg||sg,Hd=e=>{const t=h.useRef([e,(...r)=>t[0](...r)]).current;return ng(()=>{t[0]=e}),t[1]},ag="popstate",di="pushState",ui="replaceState",og="hashchange",Ol=[ag,di,ui,og],ig=e=>{for(const t of Ol)addEventListener(t,e);return()=>{for(const t of Ol)removeEventListener(t,e)}},Kd=(e,t)=>eg.useSyncExternalStore(ig,e,t),lg=()=>location.search,cg=({ssrSearch:e=""}={})=>Kd(lg,()=>e),Ll=()=>location.pathname,dg=({ssrPath:e}={})=>Kd(Ll,e?()=>e:Ll),ug=(e,{replace:t=!1,state:r=null}={})=>history[t?ui:di](r,"",e),mg=(e={})=>[dg(e),ug],Ml=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Ml]>"u"){for(const e of[di,ui]){const t=history[e];history[e]=function(){const r=t.apply(this,arguments),n=new Event(e);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,Ml,{value:!0})}const pg=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",Qd=(e="")=>e==="/"?"":e,hg=(e,t)=>e[0]==="~"?e.slice(1):Qd(t)+e,fg=(e="",t)=>pg(_l(Qd(e)),_l(t)),_l=e=>{try{return decodeURI(e)}catch{return e}},Yd={hook:mg,searchHook:cg,parser:V0,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},Xd=h.createContext(Yd),_s=()=>h.useContext(Xd),Jd={},Zd=h.createContext(Jd),gg=()=>h.useContext(Zd),xa=e=>{const[t,r]=e.hook(e);return[fg(e.base,t),Hd((n,a)=>r(hg(n,e.base),a))]},mi=()=>xa(_s()),pi=(e,t,r,n)=>{const{pattern:a,keys:o}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",n),i=a.exec(r)||[],[l,...c]=i;return l!==void 0?[!0,(()=>{const d=o!==!1?Object.fromEntries(o.map((u,m)=>[u,c[m]])):i.groups;let p={...c};return d&&Object.assign(p,d),p})(),...n?[l]:[]]:[!1,null]},eu=e=>pi(_s().parser,e,mi()[0]),bg=({children:e,...t})=>{var p,u;const r=_s(),n=t.hook?Yd:r;let a=n;const[o,i]=((p=t.ssrPath)==null?void 0:p.split("?"))??[];i&&(t.ssrSearch=i,t.ssrPath=o),t.hrefs=t.hrefs??((u=t.hook)==null?void 0:u.hrefs);let l=h.useRef({}),c=l.current,d=c;for(let m in n){const f=m==="base"?n[m]+(t[m]||""):t[m]||n[m];c===d&&f!==d[m]&&(l.current=d={...d}),d[m]=f,f!==n[m]&&(a=d)}return h.createElement(Xd.Provider,{value:a,children:e})},Fl=({children:e,component:t},r)=>t?h.createElement(t,{params:r}):typeof e=="function"?e(r):e,xg=e=>{let t=h.useRef(Jd),r=t.current;for(const n in e)e[n]!==r[n]&&(r=e);return Object.keys(e).length===0&&(r=e),t.current=r},as=({path:e,nest:t,match:r,...n})=>{const a=_s(),[o]=xa(a),[i,l,c]=r??pi(a.parser,e,o,t),d=xg({...gg(),...l});if(!i)return null;const p=c?h.createElement(bg,{base:c},Fl(n,d)):Fl(n,d);return h.createElement(Zd.Provider,{value:d,children:p})},vg=h.forwardRef((e,t)=>{const r=_s(),[n,a]=xa(r),{to:o="",href:i=o,onClick:l,asChild:c,children:d,className:p,replace:u,state:m,...f}=e,b=Hd(g=>{g.ctrlKey||g.metaKey||g.altKey||g.shiftKey||g.button!==0||(l==null||l(g),g.defaultPrevented||(g.preventDefault(),a(i,e)))}),x=r.hrefs(i[0]==="~"?i.slice(1):r.base+i,r);return c&&h.isValidElement(d)?h.cloneElement(d,{onClick:b,href:x}):h.createElement("a",{...f,onClick:b,href:x,className:p!=null&&p.call?p(n===i):p,children:d,ref:t})}),tu=e=>Array.isArray(e)?e.flatMap(t=>tu(t&&t.type===h.Fragment?t.props.children:t)):[e],yg=({children:e,location:t})=>{const r=_s(),[n]=xa(r);for(const a of tu(e)){let o=0;if(h.isValidElement(a)&&(o=pi(r.parser,a.props.path,t||n,a.props.nest))[0])return h.cloneElement(a,{match:o})}return null};var Fs=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qr=typeof window>"u"||"Deno"in globalThis;function Ot(){}function wg(e,t){return typeof e=="function"?e(t):e}function fo(e){return typeof e=="number"&&e>=0&&e!==1/0}function ru(e,t){return Math.max(e+(t||0)-Date.now(),0)}function os(e,t){return typeof e=="function"?e(t):e}function $t(e,t){return typeof e=="function"?e(t):e}function zl(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:o,queryKey:i,stale:l}=e;if(i){if(n){if(t.queryHash!==hi(i,t.options))return!1}else if(!ln(t.queryKey,i))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||o&&!o(t))}function $l(e,t){const{exact:r,status:n,predicate:a,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(Yr(t.options.mutationKey)!==Yr(o))return!1}else if(!ln(t.options.mutationKey,o))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function hi(e,t){return((t==null?void 0:t.queryKeyHashFn)||Yr)(e)}function Yr(e){return JSON.stringify(e,(t,r)=>go(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function ln(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!ln(e[r],t[r])):!1}function su(e,t){if(e===t)return e;const r=Bl(e)&&Bl(t);if(r||go(e)&&go(t)){const n=r?e:Object.keys(e),a=n.length,o=r?t:Object.keys(t),i=o.length,l=r?[]:{};let c=0;for(let d=0;d<i;d++){const p=r?d:o[d];(!r&&n.includes(p)||r)&&e[p]===void 0&&t[p]===void 0?(l[p]=void 0,c++):(l[p]=su(e[p],t[p]),l[p]===e[p]&&e[p]!==void 0&&c++)}return a===i&&c===a?e:l}return t}function Wn(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Bl(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function go(e){if(!Ul(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Ul(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Ul(e){return Object.prototype.toString.call(e)==="[object Object]"}function kg(e){return new Promise(t=>{setTimeout(t,e)})}function bo(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?su(e,t):t}function jg(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Ng(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var fi=Symbol();function nu(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===fi?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ur,vr,ps,rd,Cg=(rd=class extends Fs{constructor(){super();fe(this,Ur);fe(this,vr);fe(this,ps);re(this,ps,t=>{if(!Qr&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){j(this,vr)||this.setEventListener(j(this,ps))}onUnsubscribe(){var t;this.hasListeners()||((t=j(this,vr))==null||t.call(this),re(this,vr,void 0))}setEventListener(t){var r;re(this,ps,t),(r=j(this,vr))==null||r.call(this),re(this,vr,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){j(this,Ur)!==t&&(re(this,Ur,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof j(this,Ur)=="boolean"?j(this,Ur):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ur=new WeakMap,vr=new WeakMap,ps=new WeakMap,rd),gi=new Cg,hs,yr,fs,sd,Sg=(sd=class extends Fs{constructor(){super();fe(this,hs,!0);fe(this,yr);fe(this,fs);re(this,fs,t=>{if(!Qr&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){j(this,yr)||this.setEventListener(j(this,fs))}onUnsubscribe(){var t;this.hasListeners()||((t=j(this,yr))==null||t.call(this),re(this,yr,void 0))}setEventListener(t){var r;re(this,fs,t),(r=j(this,yr))==null||r.call(this),re(this,yr,t(this.setOnline.bind(this)))}setOnline(t){j(this,hs)!==t&&(re(this,hs,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return j(this,hs)}},hs=new WeakMap,yr=new WeakMap,fs=new WeakMap,sd),Hn=new Sg;function xo(){let e,t;const r=new Promise((a,o)=>{e=a,t=o});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function Eg(e){return Math.min(1e3*2**e,3e4)}function au(e){return(e??"online")==="online"?Hn.isOnline():!0}var ou=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Ga(e){return e instanceof ou}function iu(e){let t=!1,r=0,n=!1,a;const o=xo(),i=x=>{var g;n||(m(new ou(x)),(g=e.abort)==null||g.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>gi.isFocused()&&(e.networkMode==="always"||Hn.isOnline())&&e.canRun(),p=()=>au(e.networkMode)&&e.canRun(),u=x=>{var g;n||(n=!0,(g=e.onSuccess)==null||g.call(e,x),a==null||a(),o.resolve(x))},m=x=>{var g;n||(n=!0,(g=e.onError)==null||g.call(e,x),a==null||a(),o.reject(x))},f=()=>new Promise(x=>{var g;a=v=>{(n||d())&&x(v)},(g=e.onPause)==null||g.call(e)}).then(()=>{var x;a=void 0,n||(x=e.onContinue)==null||x.call(e)}),b=()=>{if(n)return;let x;const g=r===0?e.initialPromise:void 0;try{x=g??e.fn()}catch(v){x=Promise.reject(v)}Promise.resolve(x).then(u).catch(v=>{var N;if(n)return;const y=e.retry??(Qr?0:3),w=e.retryDelay??Eg,k=typeof w=="function"?w(r,v):w,C=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,v);if(t||!C){m(v);return}r++,(N=e.onFail)==null||N.call(e,r,v),kg(k).then(()=>d()?void 0:f()).then(()=>{t?m(v):b()})})};return{promise:o,cancel:i,continue:()=>(a==null||a(),o),cancelRetry:l,continueRetry:c,canStart:p,start:()=>(p()?b():f().then(b),o)}}function Rg(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=l=>setTimeout(l,0);const o=l=>{t?e.push(l):a(()=>{r(l)})},i=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var it=Rg(),Gr,nd,lu=(nd=class{constructor(){fe(this,Gr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),fo(this.gcTime)&&re(this,Gr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Qr?1/0:5*60*1e3))}clearGcTimeout(){j(this,Gr)&&(clearTimeout(j(this,Gr)),re(this,Gr,void 0))}},Gr=new WeakMap,nd),gs,bs,Tt,ft,wn,Vr,zt,ar,ad,Dg=(ad=class extends lu{constructor(t){super();fe(this,zt);fe(this,gs);fe(this,bs);fe(this,Tt);fe(this,ft);fe(this,wn);fe(this,Vr);re(this,Vr,!1),re(this,wn,t.defaultOptions),this.setOptions(t.options),this.observers=[],re(this,Tt,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,re(this,gs,Pg(this.options)),this.state=t.state??j(this,gs),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=j(this,ft))==null?void 0:t.promise}setOptions(t){this.options={...j(this,wn),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&j(this,Tt).remove(this)}setData(t,r){const n=bo(this.state.data,t,this.options);return Ee(this,zt,ar).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Ee(this,zt,ar).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=j(this,ft))==null?void 0:n.promise;return(a=j(this,ft))==null||a.cancel(t),r?r.then(Ot).catch(Ot):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(j(this,gs))}isActive(){return this.observers.some(t=>$t(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===fi||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!ru(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=j(this,ft))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=j(this,ft))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),j(this,Tt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(j(this,ft)&&(j(this,Vr)?j(this,ft).cancel({revert:!0}):j(this,ft).cancelRetry()),this.scheduleGc()),j(this,Tt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ee(this,zt,ar).call(this,{type:"invalidate"})}fetch(t,r){var c,d,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(j(this,ft))return j(this,ft).continueRetry(),j(this,ft).promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(m=>m.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,a=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(re(this,Vr,!0),n.signal)})},o=()=>{const u=nu(this.options,r),m={queryKey:this.queryKey,meta:this.meta};return a(m),re(this,Vr,!1),this.options.persister?this.options.persister(u,m,this):u(m)},i={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};a(i),(c=this.options.behavior)==null||c.onFetch(i,this),re(this,bs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=i.fetchOptions)==null?void 0:d.meta))&&Ee(this,zt,ar).call(this,{type:"fetch",meta:(p=i.fetchOptions)==null?void 0:p.meta});const l=u=>{var m,f,b,x;Ga(u)&&u.silent||Ee(this,zt,ar).call(this,{type:"error",error:u}),Ga(u)||((f=(m=j(this,Tt).config).onError)==null||f.call(m,u,this),(x=(b=j(this,Tt).config).onSettled)==null||x.call(b,this.state.data,u,this)),this.scheduleGc()};return re(this,ft,iu({initialPromise:r==null?void 0:r.initialPromise,fn:i.fetchFn,abort:n.abort.bind(n),onSuccess:u=>{var m,f,b,x;if(u===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(g){l(g);return}(f=(m=j(this,Tt).config).onSuccess)==null||f.call(m,u,this),(x=(b=j(this,Tt).config).onSettled)==null||x.call(b,u,this.state.error,this),this.scheduleGc()},onError:l,onFail:(u,m)=>{Ee(this,zt,ar).call(this,{type:"failed",failureCount:u,error:m})},onPause:()=>{Ee(this,zt,ar).call(this,{type:"pause"})},onContinue:()=>{Ee(this,zt,ar).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),j(this,ft).start()}},gs=new WeakMap,bs=new WeakMap,Tt=new WeakMap,ft=new WeakMap,wn=new WeakMap,Vr=new WeakMap,zt=new WeakSet,ar=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...cu(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Ga(a)&&a.revert&&j(this,bs)?{...j(this,bs),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),it.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),j(this,Tt).notify({query:this,type:"updated",action:t})})},ad);function cu(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:au(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Pg(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Yt,od,Ag=(od=class extends Fs{constructor(t={}){super();fe(this,Yt);this.config=t,re(this,Yt,new Map)}build(t,r,n){const a=r.queryKey,o=r.queryHash??hi(a,r);let i=this.get(o);return i||(i=new Dg({cache:this,queryKey:a,queryHash:o,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(i)),i}add(t){j(this,Yt).has(t.queryHash)||(j(this,Yt).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=j(this,Yt).get(t.queryHash);r&&(t.destroy(),r===t&&j(this,Yt).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){it.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return j(this,Yt).get(t)}getAll(){return[...j(this,Yt).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>zl(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>zl(t,n)):r}notify(t){it.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){it.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){it.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Yt=new WeakMap,od),Xt,vt,qr,Jt,xr,id,Ig=(id=class extends lu{constructor(t){super();fe(this,Jt);fe(this,Xt);fe(this,vt);fe(this,qr);this.mutationId=t.mutationId,re(this,vt,t.mutationCache),re(this,Xt,[]),this.state=t.state||du(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){j(this,Xt).includes(t)||(j(this,Xt).push(t),this.clearGcTimeout(),j(this,vt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){re(this,Xt,j(this,Xt).filter(r=>r!==t)),this.scheduleGc(),j(this,vt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){j(this,Xt).length||(this.state.status==="pending"?this.scheduleGc():j(this,vt).remove(this))}continue(){var t;return((t=j(this,qr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,o,i,l,c,d,p,u,m,f,b,x,g,v,y,w,k,C,N,S;re(this,qr,iu({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(I,T)=>{Ee(this,Jt,xr).call(this,{type:"failed",failureCount:I,error:T})},onPause:()=>{Ee(this,Jt,xr).call(this,{type:"pause"})},onContinue:()=>{Ee(this,Jt,xr).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>j(this,vt).canRun(this)}));const r=this.state.status==="pending",n=!j(this,qr).canStart();try{if(!r){Ee(this,Jt,xr).call(this,{type:"pending",variables:t,isPaused:n}),await((o=(a=j(this,vt).config).onMutate)==null?void 0:o.call(a,t,this));const T=await((l=(i=this.options).onMutate)==null?void 0:l.call(i,t));T!==this.state.context&&Ee(this,Jt,xr).call(this,{type:"pending",context:T,variables:t,isPaused:n})}const I=await j(this,qr).start();return await((d=(c=j(this,vt).config).onSuccess)==null?void 0:d.call(c,I,t,this.state.context,this)),await((u=(p=this.options).onSuccess)==null?void 0:u.call(p,I,t,this.state.context)),await((f=(m=j(this,vt).config).onSettled)==null?void 0:f.call(m,I,null,this.state.variables,this.state.context,this)),await((x=(b=this.options).onSettled)==null?void 0:x.call(b,I,null,t,this.state.context)),Ee(this,Jt,xr).call(this,{type:"success",data:I}),I}catch(I){try{throw await((v=(g=j(this,vt).config).onError)==null?void 0:v.call(g,I,t,this.state.context,this)),await((w=(y=this.options).onError)==null?void 0:w.call(y,I,t,this.state.context)),await((C=(k=j(this,vt).config).onSettled)==null?void 0:C.call(k,void 0,I,this.state.variables,this.state.context,this)),await((S=(N=this.options).onSettled)==null?void 0:S.call(N,void 0,I,t,this.state.context)),I}finally{Ee(this,Jt,xr).call(this,{type:"error",error:I})}}finally{j(this,vt).runNext(this)}}},Xt=new WeakMap,vt=new WeakMap,qr=new WeakMap,Jt=new WeakSet,xr=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),it.batch(()=>{j(this,Xt).forEach(n=>{n.onMutationUpdate(t)}),j(this,vt).notify({mutation:this,type:"updated",action:t})})},id);function du(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Et,kn,ld,Tg=(ld=class extends Fs{constructor(t={}){super();fe(this,Et);fe(this,kn);this.config=t,re(this,Et,new Map),re(this,kn,Date.now())}build(t,r,n){const a=new Ig({mutationCache:this,mutationId:++Tn(this,kn)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){const r=On(t),n=j(this,Et).get(r)??[];n.push(t),j(this,Et).set(r,n),this.notify({type:"added",mutation:t})}remove(t){var n;const r=On(t);if(j(this,Et).has(r)){const a=(n=j(this,Et).get(r))==null?void 0:n.filter(o=>o!==t);a&&(a.length===0?j(this,Et).delete(r):j(this,Et).set(r,a))}this.notify({type:"removed",mutation:t})}canRun(t){var n;const r=(n=j(this,Et).get(On(t)))==null?void 0:n.find(a=>a.state.status==="pending");return!r||r===t}runNext(t){var n;const r=(n=j(this,Et).get(On(t)))==null?void 0:n.find(a=>a!==t&&a.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){it.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...j(this,Et).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(n=>$l(r,n))}findAll(t={}){return this.getAll().filter(r=>$l(t,r))}notify(t){it.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return it.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ot))))}},Et=new WeakMap,kn=new WeakMap,ld);function On(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Gl(e){return{onFetch:(t,r)=>{var p,u,m,f,b;const n=t.options,a=(m=(u=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:u.fetchMore)==null?void 0:m.direction,o=((f=t.state.data)==null?void 0:f.pages)||[],i=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const g=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},v=nu(t.options,t.fetchOptions),y=async(w,k,C)=>{if(x)return Promise.reject();if(k==null&&w.pages.length)return Promise.resolve(w);const N={queryKey:t.queryKey,pageParam:k,direction:C?"backward":"forward",meta:t.options.meta};g(N);const S=await v(N),{maxPages:I}=t.options,T=C?Ng:jg;return{pages:T(w.pages,S,I),pageParams:T(w.pageParams,k,I)}};if(a&&o.length){const w=a==="backward",k=w?Og:Vl,C={pages:o,pageParams:i},N=k(n,C);l=await y(C,N,w)}else{const w=e??o.length;do{const k=c===0?i[0]??n.initialPageParam:Vl(n,l);if(c>0&&k==null)break;l=await y(l,k),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var x,g;return(g=(x=t.options).persister)==null?void 0:g.call(x,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function Vl(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Og(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var nt,wr,kr,xs,vs,jr,ys,ws,cd,Lg=(cd=class{constructor(e={}){fe(this,nt);fe(this,wr);fe(this,kr);fe(this,xs);fe(this,vs);fe(this,jr);fe(this,ys);fe(this,ws);re(this,nt,e.queryCache||new Ag),re(this,wr,e.mutationCache||new Tg),re(this,kr,e.defaultOptions||{}),re(this,xs,new Map),re(this,vs,new Map),re(this,jr,0)}mount(){Tn(this,jr)._++,j(this,jr)===1&&(re(this,ys,gi.subscribe(async e=>{e&&(await this.resumePausedMutations(),j(this,nt).onFocus())})),re(this,ws,Hn.subscribe(async e=>{e&&(await this.resumePausedMutations(),j(this,nt).onOnline())})))}unmount(){var e,t;Tn(this,jr)._--,j(this,jr)===0&&((e=j(this,ys))==null||e.call(this),re(this,ys,void 0),(t=j(this,ws))==null||t.call(this),re(this,ws,void 0))}isFetching(e){return j(this,nt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return j(this,wr).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=j(this,nt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=j(this,nt).build(this,r);return e.revalidateIfStale&&n.isStaleByTime(os(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return j(this,nt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=j(this,nt).get(n.queryHash),o=a==null?void 0:a.state.data,i=wg(t,o);if(i!==void 0)return j(this,nt).build(this,n).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return it.batch(()=>j(this,nt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=j(this,nt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=j(this,nt);it.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=j(this,nt),n={type:"active",...e};return it.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=it.batch(()=>j(this,nt).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Ot).catch(Ot)}invalidateQueries(e={},t={}){return it.batch(()=>{if(j(this,nt).findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},n=it.batch(()=>j(this,nt).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(Ot)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(Ot)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=j(this,nt).build(this,t);return r.isStaleByTime(os(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ot).catch(Ot)}fetchInfiniteQuery(e){return e.behavior=Gl(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ot).catch(Ot)}ensureInfiniteQueryData(e){return e.behavior=Gl(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Hn.isOnline()?j(this,wr).resumePausedMutations():Promise.resolve()}getQueryCache(){return j(this,nt)}getMutationCache(){return j(this,wr)}getDefaultOptions(){return j(this,kr)}setDefaultOptions(e){re(this,kr,e)}setQueryDefaults(e,t){j(this,xs).set(Yr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...j(this,xs).values()];let r={};return t.forEach(n=>{ln(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){j(this,vs).set(Yr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...j(this,vs).values()];let r={};return t.forEach(n=>{ln(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...j(this,kr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=hi(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===fi&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...j(this,kr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){j(this,nt).clear(),j(this,wr).clear()}},nt=new WeakMap,wr=new WeakMap,kr=new WeakMap,xs=new WeakMap,vs=new WeakMap,jr=new WeakMap,ys=new WeakMap,ws=new WeakMap,cd),Nt,Te,jn,yt,Wr,ks,Nr,Zt,Nn,js,Ns,Hr,Kr,Cr,Cs,Ue,Js,vo,yo,wo,ko,jo,No,Co,uu,dd,Mg=(dd=class extends Fs{constructor(t,r){super();fe(this,Ue);fe(this,Nt);fe(this,Te);fe(this,jn);fe(this,yt);fe(this,Wr);fe(this,ks);fe(this,Nr);fe(this,Zt);fe(this,Nn);fe(this,js);fe(this,Ns);fe(this,Hr);fe(this,Kr);fe(this,Cr);fe(this,Cs,new Set);this.options=r,re(this,Nt,t),re(this,Zt,null),re(this,Nr,xo()),this.options.experimental_prefetchInRender||j(this,Nr).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(j(this,Te).addObserver(this),ql(j(this,Te),this.options)?Ee(this,Ue,Js).call(this):this.updateResult(),Ee(this,Ue,ko).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return So(j(this,Te),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return So(j(this,Te),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ee(this,Ue,jo).call(this),Ee(this,Ue,No).call(this),j(this,Te).removeObserver(this)}setOptions(t,r){const n=this.options,a=j(this,Te);if(this.options=j(this,Nt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof $t(this.options.enabled,j(this,Te))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ee(this,Ue,Co).call(this),j(this,Te).setOptions(this.options),n._defaulted&&!Wn(this.options,n)&&j(this,Nt).getQueryCache().notify({type:"observerOptionsUpdated",query:j(this,Te),observer:this});const o=this.hasListeners();o&&Wl(j(this,Te),a,this.options,n)&&Ee(this,Ue,Js).call(this),this.updateResult(r),o&&(j(this,Te)!==a||$t(this.options.enabled,j(this,Te))!==$t(n.enabled,j(this,Te))||os(this.options.staleTime,j(this,Te))!==os(n.staleTime,j(this,Te)))&&Ee(this,Ue,vo).call(this);const i=Ee(this,Ue,yo).call(this);o&&(j(this,Te)!==a||$t(this.options.enabled,j(this,Te))!==$t(n.enabled,j(this,Te))||i!==j(this,Cr))&&Ee(this,Ue,wo).call(this,i)}getOptimisticResult(t){const r=j(this,Nt).getQueryCache().build(j(this,Nt),t),n=this.createResult(r,t);return Fg(this,n)&&(re(this,yt,n),re(this,ks,this.options),re(this,Wr,j(this,Te).state)),n}getCurrentResult(){return j(this,yt)}trackResult(t,r){const n={};return Object.keys(t).forEach(a=>{Object.defineProperty(n,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),r==null||r(a),t[a])})}),n}trackProp(t){j(this,Cs).add(t)}getCurrentQuery(){return j(this,Te)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=j(this,Nt).defaultQueryOptions(t),n=j(this,Nt).getQueryCache().build(j(this,Nt),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Ee(this,Ue,Js).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),j(this,yt)))}createResult(t,r){var I;const n=j(this,Te),a=this.options,o=j(this,yt),i=j(this,Wr),l=j(this,ks),d=t!==n?t.state:j(this,jn),{state:p}=t;let u={...p},m=!1,f;if(r._optimisticResults){const T=this.hasListeners(),_=!T&&ql(t,r),V=T&&Wl(t,n,r,a);(_||V)&&(u={...u,...cu(p.data,t.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:b,errorUpdatedAt:x,status:g}=u;if(r.select&&u.data!==void 0)if(o&&u.data===(i==null?void 0:i.data)&&r.select===j(this,Nn))f=j(this,js);else try{re(this,Nn,r.select),f=r.select(u.data),f=bo(o==null?void 0:o.data,f,r),re(this,js,f),re(this,Zt,null)}catch(T){re(this,Zt,T)}else f=u.data;if(r.placeholderData!==void 0&&f===void 0&&g==="pending"){let T;if(o!=null&&o.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))T=o.data;else if(T=typeof r.placeholderData=="function"?r.placeholderData((I=j(this,Ns))==null?void 0:I.state.data,j(this,Ns)):r.placeholderData,r.select&&T!==void 0)try{T=r.select(T),re(this,Zt,null)}catch(_){re(this,Zt,_)}T!==void 0&&(g="success",f=bo(o==null?void 0:o.data,T,r),m=!0)}j(this,Zt)&&(b=j(this,Zt),f=j(this,js),x=Date.now(),g="error");const v=u.fetchStatus==="fetching",y=g==="pending",w=g==="error",k=y&&v,C=f!==void 0,S={status:g,fetchStatus:u.fetchStatus,isPending:y,isSuccess:g==="success",isError:w,isInitialLoading:k,isLoading:k,data:f,dataUpdatedAt:u.dataUpdatedAt,error:b,errorUpdatedAt:x,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>d.dataUpdateCount||u.errorUpdateCount>d.errorUpdateCount,isFetching:v,isRefetching:v&&!y,isLoadingError:w&&!C,isPaused:u.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:w&&C,isStale:bi(t,r),refetch:this.refetch,promise:j(this,Nr)};if(this.options.experimental_prefetchInRender){const T=z=>{S.status==="error"?z.reject(S.error):S.data!==void 0&&z.resolve(S.data)},_=()=>{const z=re(this,Nr,S.promise=xo());T(z)},V=j(this,Nr);switch(V.status){case"pending":t.queryHash===n.queryHash&&T(V);break;case"fulfilled":(S.status==="error"||S.data!==V.value)&&_();break;case"rejected":(S.status!=="error"||S.error!==V.reason)&&_();break}}return S}updateResult(t){const r=j(this,yt),n=this.createResult(j(this,Te),this.options);if(re(this,Wr,j(this,Te).state),re(this,ks,this.options),j(this,Wr).data!==void 0&&re(this,Ns,j(this,Te)),Wn(n,r))return;re(this,yt,n);const a={},o=()=>{if(!r)return!0;const{notifyOnChangeProps:i}=this.options,l=typeof i=="function"?i():i;if(l==="all"||!l&&!j(this,Cs).size)return!0;const c=new Set(l??j(this,Cs));return this.options.throwOnError&&c.add("error"),Object.keys(j(this,yt)).some(d=>{const p=d;return j(this,yt)[p]!==r[p]&&c.has(p)})};(t==null?void 0:t.listeners)!==!1&&o()&&(a.listeners=!0),Ee(this,Ue,uu).call(this,{...a,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ee(this,Ue,ko).call(this)}},Nt=new WeakMap,Te=new WeakMap,jn=new WeakMap,yt=new WeakMap,Wr=new WeakMap,ks=new WeakMap,Nr=new WeakMap,Zt=new WeakMap,Nn=new WeakMap,js=new WeakMap,Ns=new WeakMap,Hr=new WeakMap,Kr=new WeakMap,Cr=new WeakMap,Cs=new WeakMap,Ue=new WeakSet,Js=function(t){Ee(this,Ue,Co).call(this);let r=j(this,Te).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Ot)),r},vo=function(){Ee(this,Ue,jo).call(this);const t=os(this.options.staleTime,j(this,Te));if(Qr||j(this,yt).isStale||!fo(t))return;const n=ru(j(this,yt).dataUpdatedAt,t)+1;re(this,Hr,setTimeout(()=>{j(this,yt).isStale||this.updateResult()},n))},yo=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(j(this,Te)):this.options.refetchInterval)??!1},wo=function(t){Ee(this,Ue,No).call(this),re(this,Cr,t),!(Qr||$t(this.options.enabled,j(this,Te))===!1||!fo(j(this,Cr))||j(this,Cr)===0)&&re(this,Kr,setInterval(()=>{(this.options.refetchIntervalInBackground||gi.isFocused())&&Ee(this,Ue,Js).call(this)},j(this,Cr)))},ko=function(){Ee(this,Ue,vo).call(this),Ee(this,Ue,wo).call(this,Ee(this,Ue,yo).call(this))},jo=function(){j(this,Hr)&&(clearTimeout(j(this,Hr)),re(this,Hr,void 0))},No=function(){j(this,Kr)&&(clearInterval(j(this,Kr)),re(this,Kr,void 0))},Co=function(){const t=j(this,Nt).getQueryCache().build(j(this,Nt),this.options);if(t===j(this,Te))return;const r=j(this,Te);re(this,Te,t),re(this,jn,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},uu=function(t){it.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(j(this,yt))}),j(this,Nt).getQueryCache().notify({query:j(this,Te),type:"observerResultsUpdated"})})},dd);function _g(e,t){return $t(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ql(e,t){return _g(e,t)||e.state.data!==void 0&&So(e,t,t.refetchOnMount)}function So(e,t,r){if($t(t.enabled,e)!==!1){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&bi(e,t)}return!1}function Wl(e,t,r,n){return(e!==t||$t(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&bi(e,r)}function bi(e,t){return $t(t.enabled,e)!==!1&&e.isStaleByTime(os(t.staleTime,e))}function Fg(e,t){return!Wn(e.getCurrentResult(),t)}var Sr,Er,Ct,ir,cr,$n,Eo,ud,zg=(ud=class extends Fs{constructor(r,n){super();fe(this,cr);fe(this,Sr);fe(this,Er);fe(this,Ct);fe(this,ir);re(this,Sr,r),this.setOptions(n),this.bindMethods(),Ee(this,cr,$n).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=j(this,Sr).defaultMutationOptions(r),Wn(this.options,n)||j(this,Sr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:j(this,Ct),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Yr(n.mutationKey)!==Yr(this.options.mutationKey)?this.reset():((a=j(this,Ct))==null?void 0:a.state.status)==="pending"&&j(this,Ct).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=j(this,Ct))==null||r.removeObserver(this)}onMutationUpdate(r){Ee(this,cr,$n).call(this),Ee(this,cr,Eo).call(this,r)}getCurrentResult(){return j(this,Er)}reset(){var r;(r=j(this,Ct))==null||r.removeObserver(this),re(this,Ct,void 0),Ee(this,cr,$n).call(this),Ee(this,cr,Eo).call(this)}mutate(r,n){var a;return re(this,ir,n),(a=j(this,Ct))==null||a.removeObserver(this),re(this,Ct,j(this,Sr).getMutationCache().build(j(this,Sr),this.options)),j(this,Ct).addObserver(this),j(this,Ct).execute(r)}},Sr=new WeakMap,Er=new WeakMap,Ct=new WeakMap,ir=new WeakMap,cr=new WeakSet,$n=function(){var n;const r=((n=j(this,Ct))==null?void 0:n.state)??du();re(this,Er,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Eo=function(r){it.batch(()=>{var n,a,o,i,l,c,d,p;if(j(this,ir)&&this.hasListeners()){const u=j(this,Er).variables,m=j(this,Er).context;(r==null?void 0:r.type)==="success"?((a=(n=j(this,ir)).onSuccess)==null||a.call(n,r.data,u,m),(i=(o=j(this,ir)).onSettled)==null||i.call(o,r.data,null,u,m)):(r==null?void 0:r.type)==="error"&&((c=(l=j(this,ir)).onError)==null||c.call(l,r.error,u,m),(p=(d=j(this,ir)).onSettled)==null||p.call(d,void 0,r.error,u,m))}this.listeners.forEach(u=>{u(j(this,Er))})})},ud),mu=h.createContext(void 0),zs=e=>{const t=h.useContext(mu);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},$g=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(mu.Provider,{value:e,children:t})),pu=h.createContext(!1),Bg=()=>h.useContext(pu);pu.Provider;function Ug(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Gg=h.createContext(Ug()),Vg=()=>h.useContext(Gg);function hu(e,t){return typeof e=="function"?e(...t):!!e}function Ro(){}var qg=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Wg=e=>{h.useEffect(()=>{e.clearReset()},[e])},Hg=({result:e,errorResetBoundary:t,throwOnError:r,query:n})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&hu(r,[e.error,n]),Kg=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Qg=(e,t)=>e.isLoading&&e.isFetching&&!t,Yg=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Hl=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Xg(e,t,r){var p,u,m,f,b;const n=zs(),a=Bg(),o=Vg(),i=n.defaultQueryOptions(e);(u=(p=n.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||u.call(p,i),i._optimisticResults=a?"isRestoring":"optimistic",Kg(i),qg(i,o),Wg(o);const l=!n.getQueryCache().get(i.queryHash),[c]=h.useState(()=>new t(n,i)),d=c.getOptimisticResult(i);if(h.useSyncExternalStore(h.useCallback(x=>{const g=a?Ro:c.subscribe(it.batchCalls(x));return c.updateResult(),g},[c,a]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(i,{listeners:!1})},[i,c]),Yg(i,d))throw Hl(i,c,o);if(Hg({result:d,errorResetBoundary:o,throwOnError:i.throwOnError,query:n.getQueryCache().get(i.queryHash)}))throw d.error;if((f=(m=n.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||f.call(m,i,d),i.experimental_prefetchInRender&&!Qr&&Qg(d,a)){const x=l?Hl(i,c,o):(b=n.getQueryCache().get(i.queryHash))==null?void 0:b.promise;x==null||x.catch(Ro).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?d:c.trackResult(d)}function qt(e,t){return Xg(e,Mg)}function Le(e,t){const r=zs(),[n]=h.useState(()=>new zg(r,e));h.useEffect(()=>{n.setOptions(e)},[n,e]);const a=h.useSyncExternalStore(h.useCallback(i=>n.subscribe(it.batchCalls(i)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),o=h.useCallback((i,l)=>{n.mutate(i,l).catch(Ro)},[n]);if(a.error&&hu(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}async function fu(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function We(e,t,r){const n=await fetch(t,{method:e,headers:r?{"Content-Type":"application/json"}:{},body:r?JSON.stringify(r):void 0,credentials:"include"});return await fu(n),n}const Jg=({on401:e})=>async({queryKey:t})=>{const r=await fetch(t.join("/"),{credentials:"include"});return e==="returnNull"&&r.status===401?null:(await fu(r),await r.json())},lr=new Lg({defaultOptions:{queries:{queryFn:Jg({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),Zg=1,eb=1e6;let Va=0;function tb(){return Va=(Va+1)%Number.MAX_SAFE_INTEGER,Va.toString()}const qa=new Map,Kl=e=>{if(qa.has(e))return;const t=setTimeout(()=>{qa.delete(e),tn({type:"REMOVE_TOAST",toastId:e})},eb);qa.set(e,t)},rb=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Zg)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Kl(r):e.toasts.forEach(n=>{Kl(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Bn=[];let Un={toasts:[]};function tn(e){Un=rb(Un,e),Bn.forEach(t=>{t(Un)})}function sb({...e}){const t=tb(),r=a=>tn({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>tn({type:"DISMISS_TOAST",toastId:t});return tn({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function jt(){const[e,t]=h.useState(Un);return h.useEffect(()=>(Bn.push(t),()=>{const r=Bn.indexOf(t);r>-1&&Bn.splice(r,1)}),[e]),{...e,toast:sb,dismiss:r=>tn({type:"DISMISS_TOAST",toastId:r})}}var xi="ToastProvider",[vi,nb,ab]=h0("Toast"),[gu,kC]=er("Toast",[ab]),[ob,va]=gu(xi),bu=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:i}=e,[l,c]=h.useState(null),[d,p]=h.useState(0),u=h.useRef(!1),m=h.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${xi}\`. Expected non-empty \`string\`.`),s.jsx(vi.Provider,{scope:t,children:s.jsx(ob,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:h.useCallback(()=>p(f=>f+1),[]),onToastRemove:h.useCallback(()=>p(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:m,children:i})})};bu.displayName=xi;var xu="ToastViewport",ib=["F8"],Do="toast.viewportPause",Po="toast.viewportResume",vu=h.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=ib,label:a="Notifications ({hotkey})",...o}=e,i=va(xu,r),l=nb(r),c=h.useRef(null),d=h.useRef(null),p=h.useRef(null),u=h.useRef(null),m=ut(t,u,i.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=i.toastCount>0;h.useEffect(()=>{const g=v=>{var w;n.length!==0&&n.every(k=>v[k]||v.code===k)&&((w=u.current)==null||w.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[n]),h.useEffect(()=>{const g=c.current,v=u.current;if(b&&g&&v){const y=()=>{if(!i.isClosePausedRef.current){const N=new CustomEvent(Do);v.dispatchEvent(N),i.isClosePausedRef.current=!0}},w=()=>{if(i.isClosePausedRef.current){const N=new CustomEvent(Po);v.dispatchEvent(N),i.isClosePausedRef.current=!1}},k=N=>{!g.contains(N.relatedTarget)&&w()},C=()=>{g.contains(document.activeElement)||w()};return g.addEventListener("focusin",y),g.addEventListener("focusout",k),g.addEventListener("pointermove",y),g.addEventListener("pointerleave",C),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{g.removeEventListener("focusin",y),g.removeEventListener("focusout",k),g.removeEventListener("pointermove",y),g.removeEventListener("pointerleave",C),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[b,i.isClosePausedRef]);const x=h.useCallback(({tabbingDirection:g})=>{const y=l().map(w=>{const k=w.ref.current,C=[k,...yb(k)];return g==="forwards"?C:C.reverse()});return(g==="forwards"?y.reverse():y).flat()},[l]);return h.useEffect(()=>{const g=u.current;if(g){const v=y=>{var C,N,S;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const I=document.activeElement,T=y.shiftKey;if(y.target===g&&T){(C=d.current)==null||C.focus();return}const z=x({tabbingDirection:T?"backwards":"forwards"}),le=z.findIndex(U=>U===I);Wa(z.slice(le+1))?y.preventDefault():T?(N=d.current)==null||N.focus():(S=p.current)==null||S.focus()}};return g.addEventListener("keydown",v),()=>g.removeEventListener("keydown",v)}},[l,x]),s.jsxs(f0,{ref:c,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&s.jsx(Ao,{ref:d,onFocusFromOutsideViewport:()=>{const g=x({tabbingDirection:"forwards"});Wa(g)}}),s.jsx(vi.Slot,{scope:r,children:s.jsx(Xe.ol,{tabIndex:-1,...o,ref:m})}),b&&s.jsx(Ao,{ref:p,onFocusFromOutsideViewport:()=>{const g=x({tabbingDirection:"backwards"});Wa(g)}})]})});vu.displayName=xu;var yu="ToastFocusProxy",Ao=h.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,o=va(yu,r);return s.jsx(md,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:i=>{var d;const l=i.relatedTarget;!((d=o.viewport)!=null&&d.contains(l))&&n()}})});Ao.displayName=yu;var ya="Toast",lb="toast.swipeStart",cb="toast.swipeMove",db="toast.swipeCancel",ub="toast.swipeEnd",wu=h.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:o,...i}=e,[l=!0,c]=Ms({prop:n,defaultProp:a,onChange:o});return s.jsx(Wt,{present:r||l,children:s.jsx(hb,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:Bt(e.onPause),onResume:Bt(e.onResume),onSwipeStart:Pe(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Pe(e.onSwipeMove,d=>{const{x:p,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${p}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:Pe(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Pe(e.onSwipeEnd,d=>{const{x:p,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${p}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),c(!1)})})})});wu.displayName=ya;var[mb,pb]=gu(ya,{onClose(){}}),hb=h.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:p,onSwipeMove:u,onSwipeCancel:m,onSwipeEnd:f,...b}=e,x=va(ya,r),[g,v]=h.useState(null),y=ut(t,U=>v(U)),w=h.useRef(null),k=h.useRef(null),C=a||x.duration,N=h.useRef(0),S=h.useRef(C),I=h.useRef(0),{onToastAdd:T,onToastRemove:_}=x,V=Bt(()=>{var ce;(g==null?void 0:g.contains(document.activeElement))&&((ce=x.viewport)==null||ce.focus()),i()}),z=h.useCallback(U=>{!U||U===1/0||(window.clearTimeout(I.current),N.current=new Date().getTime(),I.current=window.setTimeout(V,U))},[V]);h.useEffect(()=>{const U=x.viewport;if(U){const ce=()=>{z(S.current),d==null||d()},K=()=>{const F=new Date().getTime()-N.current;S.current=S.current-F,window.clearTimeout(I.current),c==null||c()};return U.addEventListener(Do,K),U.addEventListener(Po,ce),()=>{U.removeEventListener(Do,K),U.removeEventListener(Po,ce)}}},[x.viewport,C,c,d,z]),h.useEffect(()=>{o&&!x.isClosePausedRef.current&&z(C)},[o,C,x.isClosePausedRef,z]),h.useEffect(()=>(T(),()=>_()),[T,_]);const le=h.useMemo(()=>g?Ru(g):null,[g]);return x.viewport?s.jsxs(s.Fragment,{children:[le&&s.jsx(fb,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:le}),s.jsx(mb,{scope:r,onClose:V,children:ga.createPortal(s.jsx(vi.ItemSlot,{scope:r,children:s.jsx(g0,{asChild:!0,onEscapeKeyDown:Pe(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||V(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Xe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":x.swipeDirection,...b,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Pe(e.onKeyDown,U=>{U.key==="Escape"&&(l==null||l(U.nativeEvent),U.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,V()))}),onPointerDown:Pe(e.onPointerDown,U=>{U.button===0&&(w.current={x:U.clientX,y:U.clientY})}),onPointerMove:Pe(e.onPointerMove,U=>{if(!w.current)return;const ce=U.clientX-w.current.x,K=U.clientY-w.current.y,F=!!k.current,ae=["left","right"].includes(x.swipeDirection),J=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,ve=ae?J(0,ce):0,be=ae?0:J(0,K),A=U.pointerType==="touch"?10:2,Ie={x:ve,y:be},G={originalEvent:U,delta:Ie};F?(k.current=Ie,Ln(cb,u,G,{discrete:!1})):Ql(Ie,x.swipeDirection,A)?(k.current=Ie,Ln(lb,p,G,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(ce)>A||Math.abs(K)>A)&&(w.current=null)}),onPointerUp:Pe(e.onPointerUp,U=>{const ce=k.current,K=U.target;if(K.hasPointerCapture(U.pointerId)&&K.releasePointerCapture(U.pointerId),k.current=null,w.current=null,ce){const F=U.currentTarget,ae={originalEvent:U,delta:ce};Ql(ce,x.swipeDirection,x.swipeThreshold)?Ln(ub,f,ae,{discrete:!0}):Ln(db,m,ae,{discrete:!0}),F.addEventListener("click",J=>J.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),fb=e=>{const{__scopeToast:t,children:r,...n}=e,a=va(ya,t),[o,i]=h.useState(!1),[l,c]=h.useState(!1);return xb(()=>i(!0)),h.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(pd,{asChild:!0,children:s.jsx(md,{...n,children:o&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},gb="ToastTitle",ku=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Xe.div,{...n,ref:t})});ku.displayName=gb;var bb="ToastDescription",ju=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Xe.div,{...n,ref:t})});ju.displayName=bb;var Nu="ToastAction",Cu=h.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(Eu,{altText:r,asChild:!0,children:s.jsx(yi,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Nu}\`. Expected non-empty \`string\`.`),null)});Cu.displayName=Nu;var Su="ToastClose",yi=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=pb(Su,r);return s.jsx(Eu,{asChild:!0,children:s.jsx(Xe.button,{type:"button",...n,ref:t,onClick:Pe(e.onClick,a.onClose)})})});yi.displayName=Su;var Eu=h.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(Xe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function Ru(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),vb(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const i=n.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...Ru(n))}}),t}function Ln(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?b0(a,o):a.dispatchEvent(o)}var Ql=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),o=n>a;return t==="left"||t==="right"?o&&n>r:!o&&a>r};function xb(e=()=>{}){const t=Bt(e);hd(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function vb(e){return e.nodeType===e.ELEMENT_NODE}function yb(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Wa(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var wb=bu,Du=vu,Pu=wu,Au=ku,Iu=ju,Tu=Cu,Ou=yi;function Lu(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Lu(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Mu(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Lu(e))&&(n&&(n+=" "),n+=t);return n}const Yl=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Xl=Mu,wa=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Xl(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=t,i=Object.keys(a).map(d=>{const p=r==null?void 0:r[d],u=o==null?void 0:o[d];if(p===null)return null;const m=Yl(p)||Yl(u);return a[d][m]}),l=r&&Object.entries(r).reduce((d,p)=>{let[u,m]=p;return m===void 0||(d[u]=m),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,p)=>{let{class:u,className:m,...f}=p;return Object.entries(f).every(b=>{let[x,g]=b;return Array.isArray(g)?g.includes({...o,...l}[x]):{...o,...l}[x]===g})?[...d,u,m]:d},[]);return Xl(e,i,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_u=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:i,...l},c)=>h.createElement("svg",{ref:c,...jb,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:_u("lucide",a),...l},[...i.map(([d,p])=>h.createElement(d,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(e,t)=>{const r=h.forwardRef(({className:n,...a},o)=>h.createElement(Nb,{ref:o,iconNode:t,className:_u(`lucide-${kb(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=Y("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=Y("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=Y("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=Y("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=Y("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=Y("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=Y("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=Y("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=Y("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=Y("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=Y("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=Y("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=Y("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=Y("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=Y("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=Y("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=Y("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=Y("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=Y("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=Y("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=Y("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=Y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=Y("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=Y("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=Y("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=Y("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=Y("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=Y("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=Y("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=Y("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=Y("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=Y("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=Y("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=Y("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=Y("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=Y("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=Y("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=Y("ImageOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Y("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=Y("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=Y("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=Y("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=Y("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=Y("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=Y("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=Y("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Y("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Y("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=Y("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=Y("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=Y("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=Y("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=Y("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=Y("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=Y("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=Y("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=Y("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=Y("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=Y("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=Y("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=Y("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Y("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=Y("Rows2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=Y("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=Y("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=Y("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=Y("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=Y("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=Y("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=Y("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=Y("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=Y("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=Y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=Y("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=Y("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ci="-",sx=e=>{const t=ax(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const l=i.split(Ci);return l[0]===""&&l.length!==1&&l.shift(),Xu(l,t)||nx(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},Xu=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?Xu(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(Ci);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},sc=/^\[(.+)\]$/,nx=e=>{if(sc.test(e)){const t=sc.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},ax=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return ix(Object.entries(e.classGroups),r).forEach(([o,i])=>{Mo(i,n,o,t)}),n},Mo=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:nc(t,a);o.classGroupId=r;return}if(typeof a=="function"){if(ox(a)){Mo(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,i])=>{Mo(i,nc(t,o),r,n)})})},nc=(e,t)=>{let r=e;return t.split(Ci).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},ox=e=>e.isThemeGetter,ix=(e,t)=>t?e.map(([r,n])=>{const a=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[t+i,l])):o);return[r,a]}):e,lx=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(o,i)=>{r.set(o,i),t++,t>e&&(t=0,n=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=n.get(o))!==void 0)return a(o,i),i},set(o,i){r.has(o)?r.set(o,i):a(o,i)}}},Ju="!",cx=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],o=t.length,i=l=>{const c=[];let d=0,p=0,u;for(let g=0;g<l.length;g++){let v=l[g];if(d===0){if(v===a&&(n||l.slice(g,g+o)===t)){c.push(l.slice(p,g)),p=g+o;continue}if(v==="/"){u=g;continue}}v==="["?d++:v==="]"&&d--}const m=c.length===0?l:l.substring(p),f=m.startsWith(Ju),b=f?m.substring(1):m,x=u&&u>p?u-p:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:b,maybePostfixModifierPosition:x}};return r?l=>r({className:l,parseClassName:i}):i},dx=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},ux=e=>({cache:lx(e.cacheSize),parseClassName:cx(e),...sx(e)}),mx=/\s+/,px=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,o=[],i=e.trim().split(mx);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:p,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:f}=r(d);let b=!!f,x=n(b?m.substring(0,f):m);if(!x){if(!b){l=d+(l.length>0?" "+l:l);continue}if(x=n(m),!x){l=d+(l.length>0?" "+l:l);continue}b=!1}const g=dx(p).join(":"),v=u?g+Ju:g,y=v+x;if(o.includes(y))continue;o.push(y);const w=a(x,b);for(let k=0;k<w.length;++k){const C=w[k];o.push(v+C)}l=d+(l.length>0?" "+l:l)}return l};function hx(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Zu(t))&&(n&&(n+=" "),n+=r);return n}const Zu=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Zu(e[n]))&&(r&&(r+=" "),r+=t);return r};function fx(e,...t){let r,n,a,o=i;function i(c){const d=t.reduce((p,u)=>u(p),e());return r=ux(d),n=r.cache.get,a=r.cache.set,o=l,l(c)}function l(c){const d=n(c);if(d)return d;const p=px(c,r);return a(c,p),p}return function(){return o(hx.apply(null,arguments))}}const Je=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},em=/^\[(?:([a-z-]+):)?(.+)\]$/i,gx=/^\d+\/\d+$/,bx=new Set(["px","full","screen"]),xx=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vx=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yx=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,wx=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,kx=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,nr=e=>cs(e)||bx.has(e)||gx.test(e),gr=e=>$s(e,"length",Px),cs=e=>!!e&&!Number.isNaN(Number(e)),Xa=e=>$s(e,"number",cs),Hs=e=>!!e&&Number.isInteger(Number(e)),jx=e=>e.endsWith("%")&&cs(e.slice(0,-1)),Ne=e=>em.test(e),br=e=>xx.test(e),Nx=new Set(["length","size","percentage"]),Cx=e=>$s(e,Nx,tm),Sx=e=>$s(e,"position",tm),Ex=new Set(["image","url"]),Rx=e=>$s(e,Ex,Ix),Dx=e=>$s(e,"",Ax),Ks=()=>!0,$s=(e,t,r)=>{const n=em.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},Px=e=>vx.test(e)&&!yx.test(e),tm=()=>!1,Ax=e=>wx.test(e),Ix=e=>kx.test(e),Tx=()=>{const e=Je("colors"),t=Je("spacing"),r=Je("blur"),n=Je("brightness"),a=Je("borderColor"),o=Je("borderRadius"),i=Je("borderSpacing"),l=Je("borderWidth"),c=Je("contrast"),d=Je("grayscale"),p=Je("hueRotate"),u=Je("invert"),m=Je("gap"),f=Je("gradientColorStops"),b=Je("gradientColorStopPositions"),x=Je("inset"),g=Je("margin"),v=Je("opacity"),y=Je("padding"),w=Je("saturate"),k=Je("scale"),C=Je("sepia"),N=Je("skew"),S=Je("space"),I=Je("translate"),T=()=>["auto","contain","none"],_=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",Ne,t],z=()=>[Ne,t],le=()=>["",nr,gr],U=()=>["auto",cs,Ne],ce=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ae=()=>["start","end","center","between","around","evenly","stretch"],J=()=>["","0",Ne],ve=()=>["auto","avoid","all","avoid-page","page","left","right","column"],be=()=>[cs,Ne];return{cacheSize:500,separator:":",theme:{colors:[Ks],spacing:[nr,gr],blur:["none","",br,Ne],brightness:be(),borderColor:[e],borderRadius:["none","","full",br,Ne],borderSpacing:z(),borderWidth:le(),contrast:be(),grayscale:J(),hueRotate:be(),invert:J(),gap:z(),gradientColorStops:[e],gradientColorStopPositions:[jx,gr],inset:V(),margin:V(),opacity:be(),padding:z(),saturate:be(),scale:be(),sepia:J(),skew:be(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",Ne]}],container:["container"],columns:[{columns:[br]}],"break-after":[{"break-after":ve()}],"break-before":[{"break-before":ve()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ce(),Ne]}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Hs,Ne]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ne]}],grow:[{grow:J()}],shrink:[{shrink:J()}],order:[{order:["first","last","none",Hs,Ne]}],"grid-cols":[{"grid-cols":[Ks]}],"col-start-end":[{col:["auto",{span:["full",Hs,Ne]},Ne]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[Ks]}],"row-start-end":[{row:["auto",{span:[Hs,Ne]},Ne]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ne]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ne]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...ae()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ae(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ae(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ne,t]}],"min-w":[{"min-w":[Ne,t,"min","max","fit"]}],"max-w":[{"max-w":[Ne,t,"none","full","min","max","fit","prose",{screen:[br]},br]}],h:[{h:[Ne,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ne,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ne,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ne,t,"auto","min","max","fit"]}],"font-size":[{text:["base",br,gr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Xa]}],"font-family":[{font:[Ks]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ne]}],"line-clamp":[{"line-clamp":["none",cs,Xa]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",nr,Ne]}],"list-image":[{"list-image":["none",Ne]}],"list-style-type":[{list:["none","disc","decimal",Ne]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",nr,gr]}],"underline-offset":[{"underline-offset":["auto",nr,Ne]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ce(),Sx]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Cx]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Rx]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:K()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[nr,Ne]}],"outline-w":[{outline:[nr,gr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[nr,gr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",br,Dx]}],"shadow-color":[{shadow:[Ks]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",br,Ne]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[u]}],saturate:[{saturate:[w]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ne]}],duration:[{duration:be()}],ease:[{ease:["linear","in","out","in-out",Ne]}],delay:[{delay:be()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ne]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Hs,Ne]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ne]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ne]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ne]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[nr,gr,Xa]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Ox=fx(Tx);function X(...e){return Ox(Mu(e))}function ac(){const e="table_app_user_id";let t=localStorage.getItem(e);return t||(t=`user_${Date.now()}_${Math.random().toString(36).substring(2,15)}`,localStorage.setItem(e,t)),t}const Lx=wb,rm=h.forwardRef(({className:e,...t},r)=>s.jsx(Du,{ref:r,className:X("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));rm.displayName=Du.displayName;const Mx=wa("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),sm=h.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(Pu,{ref:n,className:X(Mx({variant:t}),e),...r}));sm.displayName=Pu.displayName;const _x=h.forwardRef(({className:e,...t},r)=>s.jsx(Tu,{ref:r,className:X("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));_x.displayName=Tu.displayName;const nm=h.forwardRef(({className:e,...t},r)=>s.jsx(Ou,{ref:r,className:X("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(kt,{className:"h-4 w-4"})}));nm.displayName=Ou.displayName;const am=h.forwardRef(({className:e,...t},r)=>s.jsx(Au,{ref:r,className:X("text-sm font-semibold",e),...t}));am.displayName=Au.displayName;const om=h.forwardRef(({className:e,...t},r)=>s.jsx(Iu,{ref:r,className:X("text-sm opacity-90",e),...t}));om.displayName=Iu.displayName;function Fx(){const{toasts:e}=jt();return s.jsxs(Lx,{children:[e.map(function({id:t,title:r,description:n,action:a,...o}){return s.jsxs(sm,{...o,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(am,{children:r}),n&&s.jsx(om,{children:n})]}),a,s.jsx(nm,{})]},t)}),s.jsx(rm,{})]})}var[ja,jC]=er("Tooltip",[ha]),Si=ha(),im="TooltipProvider",zx=700,oc="tooltip.open",[$x,lm]=ja(im),cm=e=>{const{__scopeTooltip:t,delayDuration:r=zx,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:o}=e,i=h.useRef(!0),l=h.useRef(!1),c=h.useRef(0);return h.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),s.jsx($x,{scope:t,isOpenDelayedRef:i,delayDuration:r,onOpen:h.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:h.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:h.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:o})};cm.displayName=im;var dm="Tooltip",[NC,Na]=ja(dm),_o="TooltipTrigger",Bx=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Na(_o,r),o=lm(_o,r),i=Si(r),l=h.useRef(null),c=ut(t,l,a.onTriggerChange),d=h.useRef(!1),p=h.useRef(!1),u=h.useCallback(()=>d.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),s.jsx(ti,{asChild:!0,...i,children:s.jsx(Xe.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:Pe(e.onPointerMove,m=>{m.pointerType!=="touch"&&!p.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),p.current=!0)}),onPointerLeave:Pe(e.onPointerLeave,()=>{a.onTriggerLeave(),p.current=!1}),onPointerDown:Pe(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:Pe(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:Pe(e.onBlur,a.onClose),onClick:Pe(e.onClick,a.onClose)})})});Bx.displayName=_o;var Ux="TooltipPortal",[CC,Gx]=ja(Ux,{forceMount:void 0}),Es="TooltipContent",um=h.forwardRef((e,t)=>{const r=Gx(Es,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...o}=e,i=Na(Es,e.__scopeTooltip);return s.jsx(Wt,{present:n||i.open,children:i.disableHoverableContent?s.jsx(mm,{side:a,...o,ref:t}):s.jsx(Vx,{side:a,...o,ref:t})})}),Vx=h.forwardRef((e,t)=>{const r=Na(Es,e.__scopeTooltip),n=lm(Es,e.__scopeTooltip),a=h.useRef(null),o=ut(t,a),[i,l]=h.useState(null),{trigger:c,onClose:d}=r,p=a.current,{onPointerInTransitChange:u}=n,m=h.useCallback(()=>{l(null),u(!1)},[u]),f=h.useCallback((b,x)=>{const g=b.currentTarget,v={x:b.clientX,y:b.clientY},y=Qx(v,g.getBoundingClientRect()),w=Yx(v,y),k=Xx(x.getBoundingClientRect()),C=Zx([...w,...k]);l(C),u(!0)},[u]);return h.useEffect(()=>()=>m(),[m]),h.useEffect(()=>{if(c&&p){const b=g=>f(g,p),x=g=>f(g,c);return c.addEventListener("pointerleave",b),p.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",b),p.removeEventListener("pointerleave",x)}}},[c,p,f,m]),h.useEffect(()=>{if(i){const b=x=>{const g=x.target,v={x:x.clientX,y:x.clientY},y=(c==null?void 0:c.contains(g))||(p==null?void 0:p.contains(g)),w=!Jx(v,i);y?m():w&&(m(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,p,i,d,m]),s.jsx(mm,{...e,ref:o})}),[qx,Wx]=ja(dm,{isInside:!1}),Hx=xd("TooltipContent"),mm=h.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=Na(Es,r),d=Si(r),{onClose:p}=c;return h.useEffect(()=>(document.addEventListener(oc,p),()=>document.removeEventListener(oc,p)),[p]),h.useEffect(()=>{if(c.trigger){const u=m=>{const f=m.target;f!=null&&f.contains(c.trigger)&&p()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[c.trigger,p]),s.jsx(fd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:u=>u.preventDefault(),onDismiss:p,children:s.jsxs(gd,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(Hx,{children:n}),s.jsx(qx,{scope:r,isInside:!0,children:s.jsx(x0,{id:c.contentId,role:"tooltip",children:a||n})})]})})});um.displayName=Es;var pm="TooltipArrow",Kx=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Si(r);return Wx(pm,r).isInside?null:s.jsx(bd,{...a,...n,ref:t})});Kx.displayName=pm;function Qx(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,n,a,o)){case o:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Yx(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function Xx(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function Jx(e,t){const{x:r,y:n}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o].x,c=t[o].y,d=t[i].x,p=t[i].y;c>n!=p>n&&r<(d-l)*(n-c)/(p-c)+l&&(a=!a)}return a}function Zx(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),ev(t)}function ev(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const o=r[r.length-1],i=r[r.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var tv=cm,hm=um;const rv=tv,sv=h.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(hm,{ref:n,sideOffset:t,className:X("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r}));sv.displayName=hm.displayName;const fm=h.createContext(void 0);function nv({children:e}){const[t,r]=h.useState(()=>localStorage.getItem("theme")||"light");h.useEffect(()=>{const a=document.documentElement;t==="dark"?a.classList.add("dark"):a.classList.remove("dark"),localStorage.setItem("theme",t)},[t]);const n=()=>{r(a=>a==="light"?"dark":"light")};return s.jsx(fm.Provider,{value:{theme:t,toggleTheme:n},children:e})}function Ei(){const e=h.useContext(fm);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}function Ri(){const e=zs(),{data:t=[],isLoading:r}=qt({queryKey:["/api/table-rows"]}),{data:n=[],isLoading:a}=qt({queryKey:["/api/table-columns"]}),o=Le({mutationFn:async x=>(await We("POST","/api/table-rows",x)).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-rows"]})}}),i=Le({mutationFn:async({id:x,updates:g})=>(await We("PATCH",`/api/table-rows/${x}`,g)).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-rows"]})}}),l=Le({mutationFn:async x=>{await We("DELETE",`/api/table-rows/${x}`)},onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-rows"]})}}),c=Le({mutationFn:async x=>(await We("POST","/api/table-rows/reorder",{rowIds:x})).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-rows"]})}}),d=Le({mutationFn:async x=>(await We("POST","/api/table-columns",x)).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-columns"]})}}),p=Le({mutationFn:async x=>{await We("DELETE",`/api/table-columns/${x}`)},onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-columns"]})}}),u=Le({mutationFn:async x=>(await We("POST","/api/table-columns/reorder",{columnIds:x})).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-columns"]})}}),m=Le({mutationFn:async({rowId:x,imageUrl:g,caption:v})=>(await We("POST",`/api/table-rows/${x}/images`,{imageUrl:g,caption:v})).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-rows"]})}}),f=Le({mutationFn:async({rowId:x,imageIndex:g,imageUrl:v,caption:y})=>(await We("PATCH",`/api/table-rows/${x}/images/${g}`,{imageUrl:v,caption:y})).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-rows"]})}}),b=Le({mutationFn:async({rowId:x,imageIndex:g})=>{const v=g!==void 0?`/api/table-rows/${x}/images/${g}`:`/api/table-rows/${x}/images`;return(await We("DELETE",v)).json()},onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-rows"]})}});return{rows:t,columns:n,isLoading:r||a,createRow:o,updateRow:i,deleteRow:l,reorderRows:c,createColumn:d,deleteColumn:p,reorderColumns:u,addImageToRow:m,updateImageInRow:f,deleteImageFromRow:b}}function xt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var av=typeof Symbol=="function"&&Symbol.observable||"@@observable",ic=av,Ja=()=>Math.random().toString(36).substring(7).split("").join("."),ov={INIT:`@@redux/INIT${Ja()}`,REPLACE:`@@redux/REPLACE${Ja()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ja()}`},lc=ov;function iv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function gm(e,t,r){if(typeof e!="function")throw new Error(xt(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(xt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(xt(1));return r(gm)(e,t)}let n=e,a=t,o=new Map,i=o,l=0,c=!1;function d(){i===o&&(i=new Map,o.forEach((g,v)=>{i.set(v,g)}))}function p(){if(c)throw new Error(xt(3));return a}function u(g){if(typeof g!="function")throw new Error(xt(4));if(c)throw new Error(xt(5));let v=!0;d();const y=l++;return i.set(y,g),function(){if(v){if(c)throw new Error(xt(6));v=!1,d(),i.delete(y),o=null}}}function m(g){if(!iv(g))throw new Error(xt(7));if(typeof g.type>"u")throw new Error(xt(8));if(typeof g.type!="string")throw new Error(xt(17));if(c)throw new Error(xt(9));try{c=!0,a=n(a,g)}finally{c=!1}return(o=i).forEach(y=>{y()}),g}function f(g){if(typeof g!="function")throw new Error(xt(10));n=g,m({type:lc.REPLACE})}function b(){const g=u;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(xt(11));function y(){const k=v;k.next&&k.next(p())}return y(),{unsubscribe:g(y)}},[ic](){return this}}}return m({type:lc.INIT}),{dispatch:m,subscribe:u,getState:p,replaceReducer:f,[ic]:b}}function cc(e,t){return function(...r){return t(e.apply(this,r))}}function dc(e,t){if(typeof e=="function")return cc(e,t);if(typeof e!="object"||e===null)throw new Error(xt(16));const r={};for(const n in e){const a=e[n];typeof a=="function"&&(r[n]=cc(a,t))}return r}function bm(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function lv(...e){return t=>(r,n)=>{const a=t(r,n);let o=()=>{throw new Error(xt(15))};const i={getState:a.getState,dispatch:(c,...d)=>o(c,...d)},l=e.map(c=>c(i));return o=bm(...l)(a.dispatch),{...a,dispatch:o}}}var cv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sn=h;function dv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var uv=typeof Object.is=="function"?Object.is:dv,mv=Sn.useSyncExternalStore,pv=Sn.useRef,hv=Sn.useEffect,fv=Sn.useMemo,gv=Sn.useDebugValue;cv.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var o=pv(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=fv(function(){function c(f){if(!d){if(d=!0,p=f,f=n(f),a!==void 0&&i.hasValue){var b=i.value;if(a(b,f))return u=b}return u=f}if(b=u,uv(p,f))return b;var x=n(f);return a!==void 0&&a(b,x)?(p=f,b):(p=f,u=x)}var d=!1,p,u,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,n,a]);var l=mv(e,o[0],o[1]);return hv(function(){i.hasValue=!0,i.value=l},[l]),gv(l),l};var bv=h.version.startsWith("19"),xv=Symbol.for(bv?"react.transitional.element":"react.element"),vv=Symbol.for("react.portal"),yv=Symbol.for("react.fragment"),wv=Symbol.for("react.strict_mode"),kv=Symbol.for("react.profiler"),jv=Symbol.for("react.consumer"),Nv=Symbol.for("react.context"),xm=Symbol.for("react.forward_ref"),Cv=Symbol.for("react.suspense"),Sv=Symbol.for("react.suspense_list"),Di=Symbol.for("react.memo"),Ev=Symbol.for("react.lazy"),Rv=xm,Dv=Di;function Pv(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case xv:switch(e=e.type,e){case yv:case kv:case wv:case Cv:case Sv:return e;default:switch(e=e&&e.$$typeof,e){case Nv:case xm:case Ev:case Di:return e;case jv:return e;default:return t}}case vv:return t}}}function Av(e){return Pv(e)===Di}function Iv(e,t,r,n,{areStatesEqual:a,areOwnPropsEqual:o,areStatePropsEqual:i}){let l=!1,c,d,p,u,m;function f(y,w){return c=y,d=w,p=e(c,d),u=t(n,d),m=r(p,u,d),l=!0,m}function b(){return p=e(c,d),t.dependsOnOwnProps&&(u=t(n,d)),m=r(p,u,d),m}function x(){return e.dependsOnOwnProps&&(p=e(c,d)),t.dependsOnOwnProps&&(u=t(n,d)),m=r(p,u,d),m}function g(){const y=e(c,d),w=!i(y,p);return p=y,w&&(m=r(p,u,d)),m}function v(y,w){const k=!o(w,d),C=!a(y,c,w,d);return c=y,d=w,k&&C?b():k?x():C?g():m}return function(w,k){return l?v(w,k):f(w,k)}}function Tv(e,{initMapStateToProps:t,initMapDispatchToProps:r,initMergeProps:n,...a}){const o=t(e,a),i=r(e,a),l=n(e,a);return Iv(o,i,l,e,a)}function Ov(e,t){const r={};for(const n in e){const a=e[n];typeof a=="function"&&(r[n]=(...o)=>t(a(...o)))}return r}function Fo(e){return function(r){const n=e(r);function a(){return n}return a.dependsOnOwnProps=!1,a}}function uc(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function vm(e,t){return function(n,{displayName:a}){const o=function(l,c){return o.dependsOnOwnProps?o.mapToProps(l,c):o.mapToProps(l,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(l,c){o.mapToProps=e,o.dependsOnOwnProps=uc(e);let d=o(l,c);return typeof d=="function"&&(o.mapToProps=d,o.dependsOnOwnProps=uc(d),d=o(l,c)),d},o}}function Pi(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function Lv(e){return e&&typeof e=="object"?Fo(t=>Ov(e,t)):e?typeof e=="function"?vm(e):Pi(e,"mapDispatchToProps"):Fo(t=>({dispatch:t}))}function Mv(e){return e?typeof e=="function"?vm(e):Pi(e,"mapStateToProps"):Fo(()=>({}))}function _v(e,t,r){return{...r,...e,...t}}function Fv(e){return function(r,{displayName:n,areMergedPropsEqual:a}){let o=!1,i;return function(c,d,p){const u=e(c,d,p);return o?a(u,i)||(i=u):(o=!0,i=u),i}}}function zv(e){return e?typeof e=="function"?Fv(e):Pi(e,"mergeProps"):()=>_v}function $v(e){e()}function Bv(){let e=null,t=null;return{clear(){e=null,t=null},notify(){$v(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var mc={notify(){},get:()=>[]};function ym(e,t){let r,n=mc,a=0,o=!1;function i(x){p();const g=n.subscribe(x);let v=!1;return()=>{v||(v=!0,g(),u())}}function l(){n.notify()}function c(){b.onStateChange&&b.onStateChange()}function d(){return o}function p(){a++,r||(r=t?t.addNestedSub(c):e.subscribe(c),n=Bv())}function u(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=mc)}function m(){o||(o=!0,p())}function f(){o&&(o=!1,u())}const b={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:m,tryUnsubscribe:f,getListeners:()=>n};return b}var Uv=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Gv=Uv(),Vv=()=>typeof navigator<"u"&&navigator.product==="ReactNative",qv=Vv(),Wv=()=>Gv||qv?h.useLayoutEffect:h.useEffect,Yn=Wv();function pc(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Za(e,t){if(pc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!pc(e[r[a]],t[r[a]]))return!1;return!0}var Hv={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Kv={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Qv={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},wm={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Yv={[Rv]:Qv,[Dv]:wm};function hc(e){return Av(e)?wm:Yv[e.$$typeof]||Hv}var Xv=Object.defineProperty,Jv=Object.getOwnPropertyNames,fc=Object.getOwnPropertySymbols,Zv=Object.getOwnPropertyDescriptor,ey=Object.getPrototypeOf,gc=Object.prototype;function zo(e,t){if(typeof t!="string"){if(gc){const o=ey(t);o&&o!==gc&&zo(e,o)}let r=Jv(t);fc&&(r=r.concat(fc(t)));const n=hc(e),a=hc(t);for(let o=0;o<r.length;++o){const i=r[o];if(!Kv[i]&&!(a&&a[i])&&!(n&&n[i])){const l=Zv(t,i);try{Xv(e,i,l)}catch{}}}}return e}var eo=Symbol.for("react-redux-context"),to=typeof globalThis<"u"?globalThis:{};function ty(){if(!h.createContext)return{};const e=to[eo]??(to[eo]=new Map);let t=e.get(h.createContext);return t||(t=h.createContext(null),e.set(h.createContext,t)),t}var km=ty(),ry=[null,null];function sy(e,t,r){Yn(()=>e(...t),r)}function ny(e,t,r,n,a,o){e.current=n,r.current=!1,a.current&&(a.current=null,o())}function ay(e,t,r,n,a,o,i,l,c,d,p){if(!e)return()=>{};let u=!1,m=null;const f=()=>{if(u||!l.current)return;const x=t.getState();let g,v;try{g=n(x,a.current)}catch(y){v=y,m=y}v||(m=null),g===o.current?i.current||d():(o.current=g,c.current=g,i.current=!0,p())};return r.onStateChange=f,r.trySubscribe(),f(),()=>{if(u=!0,r.tryUnsubscribe(),r.onStateChange=null,m)throw m}}function oy(e,t){return e===t}function iy(e,t,r,{pure:n,areStatesEqual:a=oy,areOwnPropsEqual:o=Za,areStatePropsEqual:i=Za,areMergedPropsEqual:l=Za,forwardRef:c=!1,context:d=km}={}){const p=d,u=Mv(e),m=Lv(t),f=zv(r),b=!!e;return g=>{const v=g.displayName||g.name||"Component",y=`Connect(${v})`,w={shouldHandleStateChanges:b,displayName:y,wrappedComponentName:v,WrappedComponent:g,initMapStateToProps:u,initMapDispatchToProps:m,initMergeProps:f,areStatesEqual:a,areStatePropsEqual:i,areOwnPropsEqual:o,areMergedPropsEqual:l};function k(S){const[I,T,_]=h.useMemo(()=>{const{reactReduxForwardedRef:L,...q}=S;return[S.context,L,q]},[S]),V=h.useMemo(()=>{let L=p;return I!=null&&I.Consumer,L},[I,p]),z=h.useContext(V),le=!!S.store&&!!S.store.getState&&!!S.store.dispatch,U=!!z&&!!z.store,ce=le?S.store:z.store,K=U?z.getServerState:ce.getState,F=h.useMemo(()=>Tv(ce.dispatch,w),[ce]),[ae,J]=h.useMemo(()=>{if(!b)return ry;const L=ym(ce,le?void 0:z.subscription),q=L.notifyNestedSubs.bind(L);return[L,q]},[ce,le,z]),ve=h.useMemo(()=>le?z:{...z,subscription:ae},[le,z,ae]),be=h.useRef(void 0),A=h.useRef(_),Ie=h.useRef(void 0),G=h.useRef(!1),ee=h.useRef(!1),xe=h.useRef(void 0);Yn(()=>(ee.current=!0,()=>{ee.current=!1}),[]);const je=h.useMemo(()=>()=>Ie.current&&_===A.current?Ie.current:F(ce.getState(),_),[ce,_]),ue=h.useMemo(()=>q=>ae?ay(b,ce,ae,F,A,be,G,ee,Ie,J,q):()=>{},[ae]);sy(ny,[A,be,G,_,Ie,J]);let Se;try{Se=h.useSyncExternalStore(ue,je,K?()=>F(K(),_):je)}catch(L){throw xe.current&&(L.message+=`
The error may be correlated with this previous error:
${xe.current.stack}

`),L}Yn(()=>{xe.current=void 0,Ie.current=void 0,be.current=Se});const he=h.useMemo(()=>h.createElement(g,{...Se,ref:T}),[T,g,Se]);return h.useMemo(()=>b?h.createElement(V.Provider,{value:ve},he):he,[V,he,ve])}const N=h.memo(k);if(N.WrappedComponent=g,N.displayName=k.displayName=y,c){const I=h.forwardRef(function(_,V){return h.createElement(N,{..._,reactReduxForwardedRef:V})});return I.displayName=y,I.WrappedComponent=g,zo(I,g)}return zo(N,g)}}var jm=iy;function ly(e){const{children:t,context:r,serverState:n,store:a}=e,o=h.useMemo(()=>{const c=ym(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=h.useMemo(()=>a.getState(),[a]);Yn(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,i]);const l=r||km;return h.createElement(l.Provider,{value:o},t)}var cy=ly,dy="Invariant failed";function uy(e,t){throw new Error(dy)}var Gt=function(t){var r=t.top,n=t.right,a=t.bottom,o=t.left,i=n-o,l=a-r,c={top:r,right:n,bottom:a,left:o,width:i,height:l,x:o,y:r,center:{x:(n+o)/2,y:(a+r)/2}};return c},Ai=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},bc=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},my=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},ro={top:0,right:0,bottom:0,left:0},Ii=function(t){var r=t.borderBox,n=t.margin,a=n===void 0?ro:n,o=t.border,i=o===void 0?ro:o,l=t.padding,c=l===void 0?ro:l,d=Gt(Ai(r,a)),p=Gt(bc(r,i)),u=Gt(bc(p,c));return{marginBox:d,borderBox:Gt(r),paddingBox:p,contentBox:u,margin:a,border:i,padding:c}},It=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var a=Number(r);return isNaN(a)&&uy(),a},py=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Xn=function(t,r){var n=t.borderBox,a=t.border,o=t.margin,i=t.padding,l=my(n,r);return Ii({borderBox:l,border:a,margin:o,padding:i})},Jn=function(t,r){return r===void 0&&(r=py()),Xn(t,r)},Nm=function(t,r){var n={top:It(r.marginTop),right:It(r.marginRight),bottom:It(r.marginBottom),left:It(r.marginLeft)},a={top:It(r.paddingTop),right:It(r.paddingRight),bottom:It(r.paddingBottom),left:It(r.paddingLeft)},o={top:It(r.borderTopWidth),right:It(r.borderRightWidth),bottom:It(r.borderBottomWidth),left:It(r.borderLeftWidth)};return Ii({borderBox:t,margin:n,padding:a,border:o})},Cm=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return Nm(r,n)},dn=function(t){var r=[],n=null,a=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];r=l,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function Zn(){return Zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zn.apply(null,arguments)}function Sm(e,t){}Sm.bind(null,"warn");Sm.bind(null,"error");function Dr(){}function hy(e,t){return{...e,...t}}function Mt(e,t,r){const n=t.map(a=>{const o=hy(r,a.options);return e.addEventListener(a.eventName,a.fn,o),function(){e.removeEventListener(a.eventName,a.fn,o)}});return function(){n.forEach(o=>{o()})}}const fy="Invariant failed";class ea extends Error{}ea.prototype.toString=function(){return this.message};function H(e,t){throw new ea(fy)}class gy extends Ce.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Dr,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof ea&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Mt(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof ea){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const by=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,ta=e=>e+1,xy=e=>`
  You have lifted an item in position ${ta(e.source.index)}
`,Em=(e,t)=>{const r=e.droppableId===t.droppableId,n=ta(e.index),a=ta(t.index);return r?`
      You have moved the item from position ${n}
      to position ${a}
    `:`
    You have moved the item from position ${n}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${a}
  `},Rm=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,vy=e=>{const t=e.destination;if(t)return Em(e.source,t);const r=e.combine;return r?Rm(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},xc=e=>`
  The item has returned to its starting position
  of ${ta(e.index)}
`,yy=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${xc(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${Em(e.source,t)}
    `:r?`
      You have dropped the item.
      ${Rm(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${xc(e.source)}
  `},Vn={dragHandleUsageInstructions:by,onDragStart:xy,onDragUpdate:vy,onDragEnd:yy};function wy(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function Dm(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!wy(e[r],t[r]))return!1;return!0}function Oe(e,t){const r=h.useState(()=>({inputs:t,result:e()}))[0],n=h.useRef(!0),a=h.useRef(r),i=n.current||!!(t&&a.current.inputs&&Dm(t,a.current.inputs))?a.current:{inputs:t,result:e()};return h.useEffect(()=>{n.current=!1,a.current=i},[i]),i.result}function de(e,t){return Oe(()=>e,t)}const dt={x:0,y:0},mt=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Rt=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Pr=(e,t)=>e.x===t.x&&e.y===t.y,Bs=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Xr=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},un=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),vc=(e,t)=>Math.min(...t.map(r=>un(e,r))),Pm=e=>t=>({x:e(t.x),y:e(t.y)});var ky=(e,t)=>{const r=Gt({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const En=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),yc=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],jy={top:0,right:0,bottom:0,left:0},Ny=(e,t)=>t?En(e,t.scroll.diff.displacement):e,Cy=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,Sy=(e,t)=>t&&t.shouldClipSubject?ky(t.pageMarginBox,e):Gt(e);var Rs=({page:e,withPlaceholder:t,axis:r,frame:n})=>{const a=Ny(e.marginBox,n),o=Cy(a,r,t),i=Sy(o,n);return{page:e,withPlaceholder:t,active:i}},Ti=(e,t)=>{e.frame||H();const r=e.frame,n=Rt(t,r.scroll.initial),a=Bs(n),o={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:a},max:r.scroll.max}},i=Rs({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return{...e,frame:o,subject:i}};function ct(e,t=Dm){let r=null;function n(...a){if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;const o=e.apply(this,a);return r={lastResult:o,lastArgs:a,lastThis:this},o}return n.clear=function(){r=null},n}const Am=ct(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),Im=ct(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),Ca=ct(e=>Object.values(e)),Ey=ct(e=>Object.values(e));var Us=ct((e,t)=>Ey(t).filter(n=>e===n.descriptor.droppableId).sort((n,a)=>n.descriptor.index-a.descriptor.index));function Oi(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Sa(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Ea=ct((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),Ry=({isMovingForward:e,draggable:t,destination:r,insideDestination:n,previousImpact:a})=>{if(!r.isCombineEnabled||!Oi(a))return null;function i(f){const b={type:"COMBINE",combine:{draggableId:f,droppableId:r.descriptor.id}};return{...a,at:b}}const l=a.displaced.all,c=l.length?l[0]:null;if(e)return c?i(c):null;const d=Ea(t,n);if(!c){if(!d.length)return null;const f=d[d.length-1];return i(f.descriptor.id)}const p=d.findIndex(f=>f.descriptor.id===c);p===-1&&H();const u=p-1;if(u<0)return null;const m=d[u];return i(m.descriptor.id)},Gs=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const Tm={point:dt,value:0},mn={invisible:{},visible:{},all:[]},Dy={displaced:mn,displacedBy:Tm,at:null};var _t=(e,t)=>r=>e<=r&&r<=t,Om=e=>{const t=_t(e.top,e.bottom),r=_t(e.left,e.right);return n=>{if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;const o=t(n.top)||t(n.bottom),i=r(n.left)||r(n.right);if(o&&i)return!0;const c=n.top<e.top&&n.bottom>e.bottom,d=n.left<e.left&&n.right>e.right;return c&&d?!0:c&&i||d&&o}},Py=e=>{const t=_t(e.top,e.bottom),r=_t(e.left,e.right);return n=>t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right)};const Li={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Lm={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Ay=e=>t=>{const r=_t(t.top,t.bottom),n=_t(t.left,t.right);return a=>e===Li?r(a.top)&&r(a.bottom):n(a.left)&&n(a.right)};const Iy=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:dt;return En(e,r)},Ty=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,Oy=(e,t,r)=>r(t)(e),Mi=({target:e,destination:t,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:a})=>{const o=n?Iy(e,t):e;return Ty(o,t,a)&&Oy(o,r,a)},Ly=e=>Mi({...e,isVisibleThroughFrameFn:Om}),Mm=e=>Mi({...e,isVisibleThroughFrameFn:Py}),My=e=>Mi({...e,isVisibleThroughFrameFn:Ay(e.destination.axis)}),_y=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:n,visible:a}=t;if(n[e])return!1;const o=a[e];return o?o.shouldAnimate:!0};function Fy(e,t){const r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Gt(Ai(r,n))}function pn({afterDragging:e,destination:t,displacedBy:r,viewport:n,forceShouldAnimate:a,last:o}){return e.reduce(function(l,c){const d=Fy(c,r),p=c.descriptor.id;if(l.all.push(p),!Ly({target:d,destination:t,viewport:n,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const m=_y(p,o,a),f={draggableId:p,shouldAnimate:m};return l.visible[p]=f,l},{all:[],visible:{},invisible:{}})}function zy(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function wc({insideDestination:e,inHomeList:t,displacedBy:r,destination:n}){const a=zy(e,{inHomeList:t});return{displaced:mn,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:a}}}}function ra({draggable:e,insideDestination:t,destination:r,viewport:n,displacedBy:a,last:o,index:i,forceShouldAnimate:l}){const c=Gs(e,r);if(i==null)return wc({insideDestination:t,inHomeList:c,displacedBy:a,destination:r});const d=t.find(b=>b.descriptor.index===i);if(!d)return wc({insideDestination:t,inHomeList:c,displacedBy:a,destination:r});const p=Ea(e,t),u=t.indexOf(d),m=p.slice(u);return{displaced:pn({afterDragging:m,destination:r,displacedBy:a,last:o,viewport:n.frame,forceShouldAnimate:l}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function Or(e,t){return!!t.effected[e]}var $y=({isMovingForward:e,destination:t,draggables:r,combine:n,afterCritical:a})=>{if(!t.isCombineEnabled)return null;const o=n.draggableId,l=r[o].descriptor.index;return Or(o,a)?e?l:l-1:e?l+1:l},By=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:n})=>{if(!r.length)return null;const a=n.index,o=e?a+1:a-1,i=r[0].descriptor.index,l=r[r.length-1].descriptor.index,c=t?l:l+1;return o<i||o>c?null:o},Uy=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:n,destination:a,insideDestination:o,previousImpact:i,viewport:l,afterCritical:c})=>{const d=i.at;if(d||H(),d.type==="REORDER"){const u=By({isMovingForward:e,isInHomeList:t,location:d.destination,insideDestination:o});return u==null?null:ra({draggable:r,insideDestination:o,destination:a,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:u})}const p=$y({isMovingForward:e,destination:a,displaced:i.displaced,draggables:n,combine:d.combine,afterCritical:c});return p==null?null:ra({draggable:r,insideDestination:o,destination:a,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:p})},Gy=({displaced:e,afterCritical:t,combineWith:r,displacedBy:n})=>{const a=!!(e.visible[r]||e.invisible[r]);return Or(r,t)?a?dt:Bs(n.point):a?n.point:dt},Vy=({afterCritical:e,impact:t,draggables:r})=>{const n=Sa(t);n||H();const a=n.draggableId,o=r[a].page.borderBox.center,i=Gy({displaced:t.displaced,afterCritical:e,combineWith:a,displacedBy:t.displacedBy});return mt(o,i)};const _m=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,qy=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,_i=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,kc=({axis:e,moveRelativeTo:t,isMoving:r})=>Xr(e.line,t.marginBox[e.end]+_m(e,r),_i(e,t.marginBox,r)),jc=({axis:e,moveRelativeTo:t,isMoving:r})=>Xr(e.line,t.marginBox[e.start]-qy(e,r),_i(e,t.marginBox,r)),Wy=({axis:e,moveInto:t,isMoving:r})=>Xr(e.line,t.contentBox[e.start]+_m(e,r),_i(e,t.contentBox,r));var Hy=({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:a})=>{const o=Us(n.descriptor.id,r),i=t.page,l=n.axis;if(!o.length)return Wy({axis:l,moveInto:n.page,isMoving:i});const{displaced:c,displacedBy:d}=e,p=c.all[0];if(p){const m=r[p];if(Or(p,a))return jc({axis:l,moveRelativeTo:m.page,isMoving:i});const f=Xn(m.page,d.point);return jc({axis:l,moveRelativeTo:f,isMoving:i})}const u=o[o.length-1];if(u.descriptor.id===t.descriptor.id)return i.borderBox.center;if(Or(u.descriptor.id,a)){const m=Xn(u.page,Bs(a.displacedBy.point));return kc({axis:l,moveRelativeTo:m,isMoving:i})}return kc({axis:l,moveRelativeTo:u.page,isMoving:i})},$o=(e,t)=>{const r=e.frame;return r?mt(t,r.scroll.diff.displacement):t};const Ky=({impact:e,draggable:t,droppable:r,draggables:n,afterCritical:a})=>{const o=t.page.borderBox.center,i=e.at;return!r||!i?o:i.type==="REORDER"?Hy({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:a}):Vy({impact:e,draggables:n,afterCritical:a})};var Ra=e=>{const t=Ky(e),r=e.droppable;return r?$o(r,t):t},Fm=(e,t)=>{const r=Rt(t,e.scroll.initial),n=Bs(r);return{frame:Gt({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function Nc(e,t){return e.map(r=>t[r])}function Qy(e,t){for(let r=0;r<t.length;r++){const n=t[r].visible[e];if(n)return n}return null}var Yy=({impact:e,viewport:t,destination:r,draggables:n,maxScrollChange:a})=>{const o=Fm(t,mt(t.scroll.current,a)),i=r.frame?Ti(r,mt(r.frame.scroll.current,a)):r,l=e.displaced,c=pn({afterDragging:Nc(l.all,n),destination:r,displacedBy:e.displacedBy,viewport:o.frame,last:l,forceShouldAnimate:!1}),d=pn({afterDragging:Nc(l.all,n),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),p={},u={},m=[l,c,d];return l.all.forEach(b=>{const x=Qy(b,m);if(x){u[b]=x;return}p[b]=!0}),{...e,displaced:{all:l.all,invisible:p,visible:u}}},Xy=(e,t)=>mt(e.scroll.diff.displacement,t),Fi=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const n=Xy(r,e),a=Rt(n,t.page.borderBox.center);return mt(t.client.borderBox.center,a)},zm=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:a,onlyOnMainAxis:o=!1})=>{const i=Rt(r,e.page.borderBox.center),c={target:En(e.page.borderBox,i),destination:t,withDroppableDisplacement:a,viewport:n};return o?My(c):Mm(c)},Jy=({isMovingForward:e,draggable:t,destination:r,draggables:n,previousImpact:a,viewport:o,previousPageBorderBoxCenter:i,previousClientSelection:l,afterCritical:c})=>{if(!r.isEnabled)return null;const d=Us(r.descriptor.id,n),p=Gs(t,r),u=Ry({isMovingForward:e,draggable:t,destination:r,insideDestination:d,previousImpact:a})||Uy({isMovingForward:e,isInHomeList:p,draggable:t,draggables:n,destination:r,insideDestination:d,previousImpact:a,viewport:o,afterCritical:c});if(!u)return null;const m=Ra({impact:u,draggable:t,droppable:r,draggables:n,afterCritical:c});if(zm({draggable:t,destination:r,newPageBorderBoxCenter:m,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Fi({pageBorderBoxCenter:m,draggable:t,viewport:o}),impact:u,scrollJumpRequest:null};const b=Rt(m,i),x=Yy({impact:u,viewport:o,destination:r,draggables:n,maxScrollChange:b});return{clientSelection:l,impact:x,scrollJumpRequest:b}};const bt=e=>{const t=e.subject.active;return t||H(),t};var Zy=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:n,viewport:a})=>{const o=r.subject.active;if(!o)return null;const i=r.axis,l=_t(o[i.start],o[i.end]),c=Ca(n).filter(p=>p!==r).filter(p=>p.isEnabled).filter(p=>!!p.subject.active).filter(p=>Om(a.frame)(bt(p))).filter(p=>{const u=bt(p);return e?o[i.crossAxisEnd]<u[i.crossAxisEnd]:u[i.crossAxisStart]<o[i.crossAxisStart]}).filter(p=>{const u=bt(p),m=_t(u[i.start],u[i.end]);return l(u[i.start])||l(u[i.end])||m(o[i.start])||m(o[i.end])}).sort((p,u)=>{const m=bt(p)[i.crossAxisStart],f=bt(u)[i.crossAxisStart];return e?m-f:f-m}).filter((p,u,m)=>bt(p)[i.crossAxisStart]===bt(m[0])[i.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const d=c.filter(p=>_t(bt(p)[i.start],bt(p)[i.end])(t[i.line]));return d.length===1?d[0]:d.length>1?d.sort((p,u)=>bt(p)[i.start]-bt(u)[i.start])[0]:c.sort((p,u)=>{const m=vc(t,yc(bt(p))),f=vc(t,yc(bt(u)));return m!==f?m-f:bt(p)[i.start]-bt(u)[i.start]})[0]};const Cc=(e,t)=>{const r=e.page.borderBox.center;return Or(e.descriptor.id,t)?Rt(r,t.displacedBy.point):r},ew=(e,t)=>{const r=e.page.borderBox;return Or(e.descriptor.id,t)?En(r,Bs(t.displacedBy.point)):r};var tw=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:n,afterCritical:a})=>n.filter(i=>Mm({target:ew(i,a),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,l)=>{const c=un(e,$o(r,Cc(i,a))),d=un(e,$o(r,Cc(l,a)));return c<d?-1:d<c?1:i.descriptor.index-l.descriptor.index})[0]||null,Rn=ct(function(t,r){const n=r[t.line];return{value:n,point:Xr(t.line,n)}});const rw=(e,t,r)=>{const n=e.axis;if(e.descriptor.mode==="virtual")return Xr(n.line,t[n.line]);const a=e.subject.page.contentBox[n.size],c=Us(e.descriptor.id,r).reduce((d,p)=>d+p.client.marginBox[n.size],0)+t[n.line]-a;return c<=0?null:Xr(n.line,c)},$m=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),Bm=(e,t,r)=>{const n=e.frame;Gs(t,e)&&H(),e.subject.withPlaceholder&&H();const a=Rn(e.axis,t.displaceBy).point,o=rw(e,a,r),i={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){const p=Rs({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:p}}const l=o?mt(n.scroll.max,o):n.scroll.max,c=$m(n,l),d=Rs({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:c});return{...e,subject:d,frame:c}},sw=e=>{const t=e.subject.withPlaceholder;t||H();const r=e.frame;if(!r){const i=Rs({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const n=t.oldFrameMaxScroll;n||H();const a=$m(r,n),o=Rs({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null});return{...e,subject:o,frame:a}};var nw=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:n,draggables:a,destination:o,viewport:i,afterCritical:l})=>{if(!t){if(r.length)return null;const u={displaced:mn,displacedBy:Tm,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},m=Ra({impact:u,draggable:n,droppable:o,draggables:a,afterCritical:l}),f=Gs(n,o)?o:Bm(o,n,a);return zm({draggable:n,destination:f,newPageBorderBoxCenter:m,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?u:null}const c=e[o.axis.line]<=t.page.borderBox.center[o.axis.line],d=(()=>{const u=t.descriptor.index;return t.descriptor.id===n.descriptor.id||c?u:u+1})(),p=Rn(o.axis,n.displaceBy);return ra({draggable:n,insideDestination:r,destination:o,viewport:i,displacedBy:p,last:mn,index:d})},aw=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:n,draggables:a,droppables:o,viewport:i,afterCritical:l})=>{const c=Zy({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:o,viewport:i});if(!c)return null;const d=Us(c.descriptor.id,a),p=tw({pageBorderBoxCenter:t,viewport:i,destination:c,insideDestination:d,afterCritical:l}),u=nw({previousPageBorderBoxCenter:t,destination:c,draggable:r,draggables:a,moveRelativeTo:p,insideDestination:d,viewport:i,afterCritical:l});if(!u)return null;const m=Ra({impact:u,draggable:r,droppable:c,draggables:a,afterCritical:l});return{clientSelection:Fi({pageBorderBoxCenter:m,draggable:r,viewport:i}),impact:u,scrollJumpRequest:null}},Dt=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const ow=(e,t)=>{const r=Dt(e);return r?t[r]:null};var iw=({state:e,type:t})=>{const r=ow(e.impact,e.dimensions.droppables),n=!!r,a=e.dimensions.droppables[e.critical.droppable.id],o=r||a,i=o.axis.direction,l=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!n)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],p=e.current.page.borderBoxCenter,{draggables:u,droppables:m}=e.dimensions;return l?Jy({isMovingForward:c,previousPageBorderBoxCenter:p,draggable:d,destination:o,draggables:u,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):aw({isMovingForward:c,previousPageBorderBoxCenter:p,draggable:d,isOver:o,draggables:u,droppables:m,viewport:e.viewport,afterCritical:e.afterCritical})};function Br(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Um(e){const t=_t(e.top,e.bottom),r=_t(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function lw(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function cw({pageBorderBox:e,draggable:t,candidates:r}){const n=t.page.borderBox.center,a=r.map(o=>{const i=o.axis,l=Xr(o.axis.line,e.center[i.line],o.page.borderBox.center[i.crossAxisLine]);return{id:o.descriptor.id,distance:un(n,l)}}).sort((o,i)=>i.distance-o.distance);return a[0]?a[0].id:null}function dw({pageBorderBox:e,draggable:t,droppables:r}){const n=Ca(r).filter(a=>{if(!a.isEnabled)return!1;const o=a.subject.active;if(!o||!lw(e,o))return!1;if(Um(o)(e.center))return!0;const i=a.axis,l=o.center[i.crossAxisLine],c=e[i.crossAxisStart],d=e[i.crossAxisEnd],p=_t(o[i.crossAxisStart],o[i.crossAxisEnd]),u=p(c),m=p(d);return!u&&!m?!0:u?c<l:d>l});return n.length?n.length===1?n[0].descriptor.id:cw({pageBorderBox:e,draggable:t,candidates:n}):null}const Gm=(e,t)=>Gt(En(e,t));var uw=(e,t)=>{const r=e.frame;return r?Gm(t,r.scroll.diff.value):t};function Vm({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function mw({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var pw=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:n,last:a,viewport:o,afterCritical:i})=>{const l=r.axis,c=Rn(r.axis,t.displaceBy),d=c.value,p=e[l.start],u=e[l.end],f=Ea(t,n).find(x=>{const g=x.descriptor.id,v=x.page.borderBox.center[l.line],y=Or(g,i),w=Vm({displaced:a,id:g});return y?w?u<=v:p<v-d:w?u<=v+d:p<v})||null,b=mw({draggable:t,closest:f,inHomeList:Gs(t,r)});return ra({draggable:t,insideDestination:n,destination:r,viewport:o,last:a,displacedBy:c,index:b})};const hw=4;var fw=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:n,insideDestination:a,afterCritical:o})=>{if(!n.isCombineEnabled)return null;const i=n.axis,l=Rn(n.axis,e.displaceBy),c=l.value,d=t[i.start],p=t[i.end],m=Ea(e,a).find(b=>{const x=b.descriptor.id,g=b.page.borderBox,y=g[i.size]/hw,w=Or(x,o),k=Vm({displaced:r.displaced,id:x});return w?k?p>g[i.start]+y&&p<g[i.end]-y:d>g[i.start]-c+y&&d<g[i.end]-c-y:k?p>g[i.start]+c+y&&p<g[i.end]+c-y:d>g[i.start]+y&&d<g[i.end]-y});return m?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:n.descriptor.id}}}:null},qm=({pageOffset:e,draggable:t,draggables:r,droppables:n,previousImpact:a,viewport:o,afterCritical:i})=>{const l=Gm(t.page.borderBox,e),c=dw({pageBorderBox:l,draggable:t,droppables:n});if(!c)return Dy;const d=n[c],p=Us(d.descriptor.id,r),u=uw(d,l);return fw({pageBorderBoxWithDroppableScroll:u,draggable:t,previousImpact:a,destination:d,insideDestination:p,afterCritical:i})||pw({pageBorderBoxWithDroppableScroll:u,draggable:t,destination:d,insideDestination:p,last:a.displaced,viewport:o,afterCritical:i})},zi=(e,t)=>({...e,[t.descriptor.id]:t});const gw=({previousImpact:e,impact:t,droppables:r})=>{const n=Dt(e),a=Dt(t);if(!n||n===a)return r;const o=r[n];if(!o.subject.withPlaceholder)return r;const i=sw(o);return zi(r,i)};var bw=({draggable:e,draggables:t,droppables:r,previousImpact:n,impact:a})=>{const o=gw({previousImpact:n,impact:a,droppables:r}),i=Dt(a);if(!i)return o;const l=r[i];if(Gs(e,l)||l.subject.withPlaceholder)return o;const c=Bm(l,e,t);return zi(o,c)},nn=({state:e,clientSelection:t,dimensions:r,viewport:n,impact:a,scrollJumpRequest:o})=>{const i=n||e.viewport,l=r||e.dimensions,c=t||e.current.client.selection,d=Rt(c,e.initial.client.selection),p={offset:d,selection:c,borderBoxCenter:mt(e.initial.client.borderBoxCenter,d)},u={selection:mt(p.selection,i.scroll.current),borderBoxCenter:mt(p.borderBoxCenter,i.scroll.current),offset:mt(p.offset,i.scroll.diff.value)},m={client:p,page:u};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:i,current:m};const f=l.draggables[e.critical.draggable.id],b=a||qm({pageOffset:u.offset,draggable:f,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),x=bw({draggable:f,impact:b,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:m,dimensions:{draggables:l.draggables,droppables:x},impact:b,viewport:i,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function xw(e,t){return e.map(r=>t[r])}var Wm=({impact:e,viewport:t,draggables:r,destination:n,forceShouldAnimate:a})=>{const o=e.displaced,i=xw(o.all,r),l=pn({afterDragging:i,destination:n,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:a,last:o});return{...e,displaced:l}},Hm=({impact:e,draggable:t,droppable:r,draggables:n,viewport:a,afterCritical:o})=>{const i=Ra({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:o});return Fi({pageBorderBoxCenter:i,draggable:t,viewport:a})},Km=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&H();const n=e.impact,a=r||e.viewport,o=t||e.dimensions,{draggables:i,droppables:l}=o,c=i[e.critical.draggable.id],d=Dt(n);d||H();const p=l[d],u=Wm({impact:n,viewport:a,destination:p,draggables:i}),m=Hm({impact:u,draggable:c,droppable:p,draggables:i,viewport:a,afterCritical:e.afterCritical});return nn({impact:u,clientSelection:m,state:e,dimensions:o,viewport:a})},vw=e=>({index:e.index,droppableId:e.droppableId}),Qm=({draggable:e,home:t,draggables:r,viewport:n})=>{const a=Rn(t.axis,e.displaceBy),o=Us(t.descriptor.id,r),i=o.indexOf(e);i===-1&&H();const l=o.slice(i+1),c=l.reduce((m,f)=>(m[f.descriptor.id]=!0,m),{}),d={inVirtualList:t.descriptor.mode==="virtual",displacedBy:a,effected:c};return{impact:{displaced:pn({afterDragging:l,destination:t,displacedBy:a,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:vw(e.descriptor)}},afterCritical:d}},yw=(e,t)=>({draggables:e.draggables,droppables:zi(e.droppables,t)}),ww=({draggable:e,offset:t,initialWindowScroll:r})=>{const n=Xn(e.client,t),a=Jn(n,r);return{...e,placeholder:{...e.placeholder,client:n},client:n,page:a}},kw=e=>{const t=e.frame;return t||H(),t},jw=({additions:e,updatedDroppables:t,viewport:r})=>{const n=r.scroll.diff.value;return e.map(a=>{const o=a.descriptor.droppableId,i=t[o],c=kw(i).scroll.diff.value,d=mt(n,c);return ww({draggable:a,offset:d,initialWindowScroll:r.scroll.initial})})},Nw=({state:e,published:t})=>{const r=t.modified.map(v=>{const y=e.dimensions.droppables[v.droppableId];return Ti(y,v.scroll)}),n={...e.dimensions.droppables,...Am(r)},a=Im(jw({additions:t.additions,updatedDroppables:n,viewport:e.viewport})),o={...e.dimensions.draggables,...a};t.removals.forEach(v=>{delete o[v]});const i={droppables:n,draggables:o},l=Dt(e.impact),c=l?i.droppables[l]:null,d=i.draggables[e.critical.draggable.id],p=i.droppables[e.critical.droppable.id],{impact:u,afterCritical:m}=Qm({draggable:d,home:p,draggables:o,viewport:e.viewport}),f=c&&c.isCombineEnabled?e.impact:u,b=qm({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:f,viewport:e.viewport,afterCritical:m}),x={...e,phase:"DRAGGING",impact:b,onLiftImpact:u,dimensions:i,afterCritical:m,forceShouldAnimate:!1};return e.phase==="COLLECTING"?x:{...x,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Bo=e=>e.movementMode==="SNAP",so=(e,t,r)=>{const n=yw(e.dimensions,t);return!Bo(e)||r?nn({state:e,dimensions:n}):Km({state:e,dimensions:n})};function no(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Sc={phase:"IDLE",completed:null,shouldFlush:!1};var Cw=(e=Sc,t)=>{if(t.type==="FLUSH")return{...Sc,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&H();const{critical:r,clientSelection:n,viewport:a,dimensions:o,movementMode:i}=t.payload,l=o.draggables[r.draggable.id],c=o.droppables[r.droppable.id],d={selection:n,borderBoxCenter:l.client.borderBox.center,offset:dt},p={client:d,page:{selection:mt(d.selection,a.scroll.initial),borderBoxCenter:mt(d.selection,a.scroll.initial),offset:mt(d.selection,a.scroll.diff.value)}},u=Ca(o.droppables).every(x=>!x.isFixedOnPage),{impact:m,afterCritical:f}=Qm({draggable:l,home:c,draggables:o.draggables,viewport:a});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:i,dimensions:o,initial:p,current:p,isWindowScrollAllowed:u,impact:m,afterCritical:f,onLiftImpact:m,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&H(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||H(),Nw({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Br(e)||H();const{client:r}=t.payload;return Pr(r,e.current.client.selection)?e:nn({state:e,clientSelection:r,impact:Bo(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return no(e);Br(e)||H();const{id:r,newScroll:n}=t.payload,a=e.dimensions.droppables[r];if(!a)return e;const o=Ti(a,n);return so(e,o,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Br(e)||H();const{id:r,isEnabled:n}=t.payload,a=e.dimensions.droppables[r];a||H(),a.isEnabled===n&&H();const o={...a,isEnabled:n};return so(e,o,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Br(e)||H();const{id:r,isCombineEnabled:n}=t.payload,a=e.dimensions.droppables[r];a||H(),a.isCombineEnabled===n&&H();const o={...a,isCombineEnabled:n};return so(e,o,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Br(e)||H(),e.isWindowScrollAllowed||H();const r=t.payload.newScroll;if(Pr(e.viewport.scroll.current,r))return no(e);const n=Fm(e.viewport,r);return Bo(e)?Km({state:e,viewport:n}):nn({state:e,viewport:n})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Br(e))return e;const r=t.payload.maxScroll;if(Pr(r,e.viewport.scroll.max))return e;const n={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:n}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&H();const r=iw({state:e,type:t.type});return r?nn({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&H(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:n,newHomeClientOffset:a}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||H(),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:a,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};function Be(e,t){return e instanceof Object&&"type"in e&&e.type===t}const Sw=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),Ew=e=>({type:"LIFT",payload:e}),Rw=e=>({type:"INITIAL_PUBLISH",payload:e}),Dw=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),Pw=()=>({type:"COLLECTION_STARTING",payload:null}),Aw=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),Iw=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Tw=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Ym=e=>({type:"MOVE",payload:e}),Ow=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),Lw=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Mw=()=>({type:"MOVE_UP",payload:null}),_w=()=>({type:"MOVE_DOWN",payload:null}),Fw=()=>({type:"MOVE_RIGHT",payload:null}),zw=()=>({type:"MOVE_LEFT",payload:null}),$i=()=>({type:"FLUSH",payload:null}),$w=e=>({type:"DROP_ANIMATE",payload:e}),Bi=e=>({type:"DROP_COMPLETE",payload:e}),Xm=e=>({type:"DROP",payload:e}),Bw=e=>({type:"DROP_PENDING",payload:e}),Jm=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Uw=e=>({getState:t,dispatch:r})=>n=>a=>{if(!Be(a,"LIFT")){n(a);return}const{id:o,clientSelection:i,movementMode:l}=a.payload,c=t();c.phase==="DROP_ANIMATING"&&r(Bi({completed:c.completed})),t().phase!=="IDLE"&&H(),r($i()),r(Sw({draggableId:o,movementMode:l}));const p={draggableId:o,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:u,dimensions:m,viewport:f}=e.startPublishing(p);r(Rw({critical:u,dimensions:m,clientSelection:i,movementMode:l,viewport:f}))},Gw=e=>()=>t=>r=>{Be(r,"INITIAL_PUBLISH")&&e.dragging(),Be(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(Be(r,"FLUSH")||Be(r,"DROP_COMPLETE"))&&e.resting(),t(r)};const Ui={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},hn={opacity:{drop:0,combining:.7},scale:{drop:.75}},Zm={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},$r=`${Zm.outOfTheWay}s ${Ui.outOfTheWay}`,an={fluid:`opacity ${$r}`,snap:`transform ${$r}, opacity ${$r}`,drop:e=>{const t=`${e}s ${Ui.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${$r}`,placeholder:`height ${$r}, width ${$r}, margin ${$r}`},Ec=e=>Pr(e,dt)?void 0:`translate(${e.x}px, ${e.y}px)`,Uo={moveTo:Ec,drop:(e,t)=>{const r=Ec(e);if(r)return t?`${r} scale(${hn.scale.drop})`:r}},{minDropTime:Go,maxDropTime:ep}=Zm,Vw=ep-Go,Rc=1500,qw=.6;var Ww=({current:e,destination:t,reason:r})=>{const n=un(e,t);if(n<=0)return Go;if(n>=Rc)return ep;const a=n/Rc,o=Go+Vw*a,i=r==="CANCEL"?o*qw:o;return Number(i.toFixed(2))},Hw=({impact:e,draggable:t,dimensions:r,viewport:n,afterCritical:a})=>{const{draggables:o,droppables:i}=r,l=Dt(e),c=l?i[l]:null,d=i[t.descriptor.droppableId],p=Hm({impact:e,draggable:t,draggables:o,afterCritical:a,droppable:c||d,viewport:n});return Rt(p,t.client.borderBox.center)},Kw=({draggables:e,reason:t,lastImpact:r,home:n,viewport:a,onLiftImpact:o})=>!r.at||t!=="DROP"?{impact:Wm({draggables:e,impact:o,destination:n,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:mn},didDropInsideDroppable:!0};const Qw=({getState:e,dispatch:t})=>r=>n=>{if(!Be(n,"DROP")){r(n);return}const a=e(),o=n.payload.reason;if(a.phase==="COLLECTING"){t(Bw({reason:o}));return}if(a.phase==="IDLE")return;a.phase==="DROP_PENDING"&&a.isWaiting&&H(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||H();const l=a.critical,c=a.dimensions,d=c.draggables[a.critical.draggable.id],{impact:p,didDropInsideDroppable:u}=Kw({reason:o,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),m=u?Oi(p):null,f=u?Sa(p):null,b={index:l.draggable.index,droppableId:l.droppable.id},x={draggableId:d.descriptor.id,type:d.descriptor.type,source:b,reason:o,mode:a.movementMode,destination:m,combine:f},g=Hw({impact:p,draggable:d,dimensions:c,viewport:a.viewport,afterCritical:a.afterCritical}),v={critical:a.critical,afterCritical:a.afterCritical,result:x,impact:p};if(!(!Pr(a.current.client.offset,g)||!!x.combine)){t(Bi({completed:v}));return}const w=Ww({current:a.current.client.offset,destination:g,reason:o});t($w({newHomeClientOffset:g,dropDuration:w,completed:v}))};var tp=()=>({x:window.pageXOffset,y:window.pageYOffset});function Yw(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function Xw({onWindowScroll:e}){function t(){e(tp())}const r=dn(t),n=Yw(r);let a=Dr;function o(){return a!==Dr}function i(){o()&&H(),a=Mt(window,[n])}function l(){o()||H(),r.cancel(),a(),a=Dr}return{start:i,stop:l,isActive:o}}const Jw=e=>Be(e,"DROP_COMPLETE")||Be(e,"DROP_ANIMATE")||Be(e,"FLUSH"),Zw=e=>{const t=Xw({onWindowScroll:r=>{e.dispatch(Ow({newScroll:r}))}});return r=>n=>{!t.isActive()&&Be(n,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&Jw(n)&&t.stop(),r(n)}};var e1=e=>{let t=!1,r=!1;const n=setTimeout(()=>{r=!0}),a=o=>{t||r||(t=!0,e(o),clearTimeout(n))};return a.wasCalled=()=>t,a},t1=()=>{const e=[],t=a=>{const o=e.findIndex(l=>l.timerId===a);o===-1&&H();const[i]=e.splice(o,1);i.callback()};return{add:a=>{const o=setTimeout(()=>t(o)),i={timerId:o,callback:a};e.push(i)},flush:()=>{if(!e.length)return;const a=[...e];e.length=0,a.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const r1=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,s1=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,n1=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n},Qs=(e,t)=>{t()},_n=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function ao(e,t,r,n){if(!e){r(n(t));return}const a=e1(r);e(t,{announce:a}),a.wasCalled()||r(n(t))}var a1=(e,t)=>{const r=t1();let n=null;const a=(u,m)=>{n&&H(),Qs("onBeforeCapture",()=>{const f=e().onBeforeCapture;f&&f({draggableId:u,mode:m})})},o=(u,m)=>{n&&H(),Qs("onBeforeDragStart",()=>{const f=e().onBeforeDragStart;f&&f(_n(u,m))})},i=(u,m)=>{n&&H();const f=_n(u,m);n={mode:m,lastCritical:u,lastLocation:f.source,lastCombine:null},r.add(()=>{Qs("onDragStart",()=>ao(e().onDragStart,f,t,Vn.onDragStart))})},l=(u,m)=>{const f=Oi(m),b=Sa(m);n||H();const x=!n1(u,n.lastCritical);x&&(n.lastCritical=u);const g=!r1(n.lastLocation,f);g&&(n.lastLocation=f);const v=!s1(n.lastCombine,b);if(v&&(n.lastCombine=b),!x&&!g&&!v)return;const y={..._n(u,n.mode),combine:b,destination:f};r.add(()=>{Qs("onDragUpdate",()=>ao(e().onDragUpdate,y,t,Vn.onDragUpdate))})},c=()=>{n||H(),r.flush()},d=u=>{n||H(),n=null,Qs("onDragEnd",()=>ao(e().onDragEnd,u,t,Vn.onDragEnd))};return{beforeCapture:a,beforeStart:o,start:i,update:l,flush:c,drop:d,abort:()=>{if(!n)return;const u={..._n(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};d(u)}}},o1=(e,t)=>{const r=a1(e,t);return n=>a=>o=>{if(Be(o,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(Be(o,"INITIAL_PUBLISH")){const l=o.payload.critical;r.beforeStart(l,o.payload.movementMode),a(o),r.start(l,o.payload.movementMode);return}if(Be(o,"DROP_COMPLETE")){const l=o.payload.completed.result;r.flush(),a(o),r.drop(l);return}if(a(o),Be(o,"FLUSH")){r.abort();return}const i=n.getState();i.phase==="DRAGGING"&&r.update(i.critical,i.impact)}};const i1=e=>t=>r=>{if(!Be(r,"DROP_ANIMATION_FINISHED")){t(r);return}const n=e.getState();n.phase!=="DROP_ANIMATING"&&H(),e.dispatch(Bi({completed:n.completed}))},l1=e=>{let t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return a=>o=>{if((Be(o,"FLUSH")||Be(o,"DROP_COMPLETE")||Be(o,"DROP_ANIMATION_FINISHED"))&&n(),a(o),!Be(o,"DROP_ANIMATE"))return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(Jm())}};r=requestAnimationFrame(()=>{r=null,t=Mt(window,[i])})}};var c1=e=>()=>t=>r=>{(Be(r,"DROP_COMPLETE")||Be(r,"FLUSH")||Be(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)},d1=e=>{let t=!1;return()=>r=>n=>{if(Be(n,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(Be(n,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Be(n,"DROP_COMPLETE")){t=!1;const a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const u1=e=>Be(e,"DROP_COMPLETE")||Be(e,"DROP_ANIMATE")||Be(e,"FLUSH");var m1=e=>t=>r=>n=>{if(u1(n)){e.stop(),r(n);return}if(Be(n,"INITIAL_PUBLISH")){r(n);const a=t.getState();a.phase!=="DRAGGING"&&H(),e.start(a);return}r(n),e.scroll(t.getState())};const p1=e=>t=>r=>{if(t(r),!Be(r,"PUBLISH_WHILE_DRAGGING"))return;const n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Xm({reason:n.reason})))},h1=bm;var f1=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:n,announce:a,autoScroller:o})=>gm(Cw,h1(lv(Gw(r),c1(e),Uw(e),Qw,i1,l1,p1,m1(o),Zw,d1(t),o1(n,a))));const oo=()=>({additions:{},removals:{},modified:{}});function g1({registry:e,callbacks:t}){let r=oo(),n=null;const a=()=>{n||(t.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:c,removals:d,modified:p}=r,u=Object.keys(c).map(b=>e.draggable.getById(b).getDimension(dt)).sort((b,x)=>b.descriptor.index-x.descriptor.index),m=Object.keys(p).map(b=>{const g=e.droppable.getById(b).callbacks.getScrollWhileDragging();return{droppableId:b,scroll:g}}),f={additions:u,removals:Object.keys(d),modified:m};r=oo(),t.publish(f)}))};return{add:c=>{const d=c.descriptor.id;r.additions[d]=c,r.modified[c.descriptor.droppableId]=!0,r.removals[d]&&delete r.removals[d],a()},remove:c=>{const d=c.descriptor;r.removals[d.id]=!0,r.modified[d.droppableId]=!0,r.additions[d.id]&&delete r.additions[d.id],a()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=oo())}}}var rp=({scrollHeight:e,scrollWidth:t,height:r,width:n})=>{const a=Rt({x:t,y:e},{x:n,y:r});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},sp=()=>{const e=document.documentElement;return e||H(),e},np=()=>{const e=sp();return rp({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},b1=()=>{const e=tp(),t=np(),r=e.y,n=e.x,a=sp(),o=a.clientWidth,i=a.clientHeight,l=n+o,c=r+i;return{frame:Gt({top:r,left:n,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:dt,displacement:dt}}}},x1=({critical:e,scrollOptions:t,registry:r})=>{const n=b1(),a=n.scroll.current,o=e.droppable,i=r.droppable.getAllByType(o.type).map(p=>p.callbacks.getDimensionAndWatchScroll(a,t)),l=r.draggable.getAllByType(e.draggable.type).map(p=>p.getDimension(a));return{dimensions:{draggables:Im(l),droppables:Am(i)},critical:e,viewport:n}};function Dc(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var v1=(e,t)=>{let r=null;const n=g1({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=(m,f)=>{e.droppable.exists(m)||H(),r&&t.updateDroppableIsEnabled({id:m,isEnabled:f})},o=(m,f)=>{r&&(e.droppable.exists(m)||H(),t.updateDroppableIsCombineEnabled({id:m,isCombineEnabled:f}))},i=(m,f)=>{r&&(e.droppable.exists(m)||H(),t.updateDroppableScroll({id:m,newScroll:f}))},l=(m,f)=>{r&&e.droppable.getById(m).callbacks.scroll(f)},c=()=>{if(!r)return;n.stop();const m=r.critical.droppable;e.droppable.getAllByType(m.type).forEach(f=>f.callbacks.dragStopped()),r.unsubscribe(),r=null},d=m=>{r||H();const f=r.critical.draggable;m.type==="ADDITION"&&Dc(e,f,m.value)&&n.add(m.value),m.type==="REMOVAL"&&Dc(e,f,m.value)&&n.remove(m.value)};return{updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:o,scrollDroppable:l,updateDroppableScroll:i,startPublishing:m=>{r&&H();const f=e.draggable.getById(m.draggableId),b=e.droppable.getById(f.descriptor.droppableId),x={draggable:f.descriptor,droppable:b.descriptor},g=e.subscribe(d);return r={critical:x,unsubscribe:g},x1({critical:x,registry:e,scrollOptions:m.scrollOptions})},stopPublishing:c}},ap=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",y1=e=>{window.scrollBy(e.x,e.y)};const w1=ct(e=>Ca(e).filter(t=>!(!t.isEnabled||!t.frame))),k1=(e,t)=>w1(t).find(n=>(n.frame||H(),Um(n.frame.pageMarginBox)(e)))||null;var j1=({center:e,destination:t,droppables:r})=>{if(t){const a=r[t];return a.frame?a:null}return k1(e,r)};const fn={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var N1=(e,t,r=()=>fn)=>{const n=r(),a=e[t.size]*n.startFromPercentage,o=e[t.size]*n.maxScrollAtPercentage;return{startScrollingFrom:a,maxScrollValueAt:o}},op=({startOfRange:e,endOfRange:t,current:r})=>{const n=t-e;return n===0?0:(r-e)/n},Gi=1,C1=(e,t,r=()=>fn)=>{const n=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return n.maxPixelScroll;if(e===t.startScrollingFrom)return Gi;const o=1-op({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=n.maxPixelScroll*n.ease(o);return Math.ceil(i)},S1=(e,t,r)=>{const n=r(),a=n.durationDampening.accelerateAt,o=n.durationDampening.stopDampeningAt,i=t,l=o,d=Date.now()-i;if(d>=o)return e;if(d<a)return Gi;const p=op({startOfRange:a,endOfRange:l,current:d}),u=e*n.ease(p);return Math.ceil(u)},Pc=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:a})=>{const o=C1(e,t,a);return o===0?0:n?Math.max(S1(o,r,a),Gi):o},Ac=({container:e,distanceToEdges:t,dragStartTime:r,axis:n,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i=N1(e,n,o);return t[n.end]<t[n.start]?Pc({distanceToEdge:t[n.end],thresholds:i,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o}):-1*Pc({distanceToEdge:t[n.start],thresholds:i,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o})},E1=({container:e,subject:t,proposedScroll:r})=>{const n=t.height>e.height,a=t.width>e.width;return!a&&!n?r:a&&n?null:{x:a?0:r.x,y:n?0:r.y}};const R1=Pm(e=>e===0?0:e);var ip=({dragStartTime:e,container:t,subject:r,center:n,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i={top:n.y-t.top,right:t.right-n.x,bottom:t.bottom-n.y,left:n.x-t.left},l=Ac({container:t,distanceToEdges:i,dragStartTime:e,axis:Li,shouldUseTimeDampening:a,getAutoScrollerOptions:o}),c=Ac({container:t,distanceToEdges:i,dragStartTime:e,axis:Lm,shouldUseTimeDampening:a,getAutoScrollerOptions:o}),d=R1({x:c,y:l});if(Pr(d,dt))return null;const p=E1({container:t,subject:r,proposedScroll:d});return p?Pr(p,dt)?null:p:null};const D1=Pm(e=>e===0?0:e>0?1:-1),Vi=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:n})=>{const a=mt(t,n),o={x:e(a.x,r.x),y:e(a.y,r.y)};return Pr(o,dt)?null:o}})(),lp=({max:e,current:t,change:r})=>{const n={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},a=D1(r),o=Vi({max:n,current:t,change:a});return!o||a.x!==0&&o.x===0||a.y!==0&&o.y===0},qi=(e,t)=>lp({current:e.scroll.current,max:e.scroll.max,change:t}),P1=(e,t)=>{if(!qi(e,t))return null;const r=e.scroll.max,n=e.scroll.current;return Vi({current:n,max:r,change:t})},Wi=(e,t)=>{const r=e.frame;return r?lp({current:r.scroll.current,max:r.scroll.max,change:t}):!1},A1=(e,t)=>{const r=e.frame;return!r||!Wi(e,t)?null:Vi({current:r.scroll.current,max:r.scroll.max,change:t})};var I1=({viewport:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i=ip({dragStartTime:n,container:e.frame,subject:t,center:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o});return i&&qi(e,i)?i:null},T1=({droppable:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i=e.frame;if(!i)return null;const l=ip({dragStartTime:n,container:i.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o});return l&&Wi(e,l)?l:null},Ic=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:a,getAutoScrollerOptions:o})=>{const i=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const u=e.viewport,m=I1({dragStartTime:t,viewport:u,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:o});if(m){n(m);return}}const d=j1({center:i,destination:Dt(e.impact),droppables:e.dimensions.droppables});if(!d)return;const p=T1({dragStartTime:t,droppable:d,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:o});p&&a(d.descriptor.id,p)},O1=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>fn})=>{const n=dn(e),a=dn(t);let o=null;const i=d=>{o||H();const{shouldUseTimeDampening:p,dragStartTime:u}=o;Ic({state:d,scrollWindow:n,scrollDroppable:a,dragStartTime:u,shouldUseTimeDampening:p,getAutoScrollerOptions:r})};return{start:d=>{o&&H();const p=Date.now();let u=!1;const m=()=>{u=!0};Ic({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:m,scrollDroppable:m,getAutoScrollerOptions:r}),o={dragStartTime:p,shouldUseTimeDampening:u},u&&i(d)},stop:()=>{o&&(n.cancel(),a.cancel(),o=null)},scroll:i}},L1=({move:e,scrollDroppable:t,scrollWindow:r})=>{const n=(l,c)=>{const d=mt(l.current.client.selection,c);e({client:d})},a=(l,c)=>{if(!Wi(l,c))return c;const d=A1(l,c);if(!d)return t(l.descriptor.id,c),null;const p=Rt(c,d);return t(l.descriptor.id,p),Rt(c,p)},o=(l,c,d)=>{if(!l||!qi(c,d))return d;const p=P1(c,d);if(!p)return r(d),null;const u=Rt(d,p);return r(u),Rt(d,u)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const d=Dt(l.impact);d||H();const p=a(l.dimensions.droppables[d],c);if(!p)return;const u=l.viewport,m=o(l.isWindowScrollAllowed,u,p);m&&n(l,m)}},M1=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:n})=>{const a=O1({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n}),o=L1({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(n().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){a.scroll(c);return}c.scrollJumpRequest&&o(c)}},start:a.start,stop:a.stop}};const Ds="data-rfd",Ps=(()=>{const e=`${Ds}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Vo=(()=>{const e=`${Ds}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),_1=(()=>{const e=`${Ds}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Tc={contextId:`${Ds}-scroll-container-context-id`},F1=e=>t=>`[${t}="${e}"]`,Ys=(e,t)=>e.map(r=>{const n=r.styles[t];return n?`${r.selector} { ${n} }`:""}).join(" "),z1="pointer-events: none;";var $1=e=>{const t=F1(e),r=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Ps.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:z1,dropAnimating:l}}})(),n=(()=>{const l=`
      transition: ${an.outOfTheWay};
    `;return{selector:t(Vo.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),a={selector:t(_1.contextId),styles:{always:"overflow-anchor: none;"}},i=[n,r,a,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Ys(i,"always"),resting:Ys(i,"resting"),dragging:Ys(i,"dragging"),dropAnimating:Ys(i,"dropAnimating"),userCancel:Ys(i,"userCancel")}};const Pt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?h.useLayoutEffect:h.useEffect,io=()=>{const e=document.querySelector("head");return e||H(),e},Oc=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function B1(e,t){const r=Oe(()=>$1(e),[e]),n=h.useRef(null),a=h.useRef(null),o=de(ct(u=>{const m=a.current;m||H(),m.textContent=u}),[]),i=de(u=>{const m=n.current;m||H(),m.textContent=u},[]);Pt(()=>{!n.current&&!a.current||H();const u=Oc(t),m=Oc(t);return n.current=u,a.current=m,u.setAttribute(`${Ds}-always`,e),m.setAttribute(`${Ds}-dynamic`,e),io().appendChild(u),io().appendChild(m),i(r.always),o(r.resting),()=>{const f=b=>{const x=b.current;x||H(),io().removeChild(x),b.current=null};f(n),f(a)}},[t,i,o,r.always,r.resting,e]);const l=de(()=>o(r.dragging),[o,r.dragging]),c=de(u=>{if(u==="DROP"){o(r.dropAnimating);return}o(r.userCancel)},[o,r.dropAnimating,r.userCancel]),d=de(()=>{a.current&&o(r.resting)},[o,r.resting]);return Oe(()=>({dragging:l,dropping:c,resting:d}),[l,c,d])}function cp(e,t){return Array.from(e.querySelectorAll(t))}var dp=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Da(e){return e instanceof dp(e).HTMLElement}function U1(e,t){const r=`[${Ps.contextId}="${e}"]`,n=cp(document,r);if(!n.length)return null;const a=n.find(o=>o.getAttribute(Ps.draggableId)===t);return!a||!Da(a)?null:a}function G1(e){const t=h.useRef({}),r=h.useRef(null),n=h.useRef(null),a=h.useRef(!1),o=de(function(m,f){const b={id:m,focus:f};return t.current[m]=b,function(){const g=t.current;g[m]!==b&&delete g[m]}},[]),i=de(function(m){const f=U1(e,m);f&&f!==document.activeElement&&f.focus()},[e]),l=de(function(m,f){r.current===m&&(r.current=f)},[]),c=de(function(){n.current||a.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const m=r.current;m&&i(m)}))},[i]),d=de(function(m){r.current=null;const f=document.activeElement;f&&f.getAttribute(Ps.draggableId)===m&&(r.current=m)},[]);return Pt(()=>(a.current=!0,function(){a.current=!1;const m=n.current;m&&cancelAnimationFrame(m)}),[]),Oe(()=>({register:o,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[o,d,c,l])}function V1(){const e={draggables:{},droppables:{}},t=[];function r(u){return t.push(u),function(){const f=t.indexOf(u);f!==-1&&t.splice(f,1)}}function n(u){t.length&&t.forEach(m=>m(u))}function a(u){return e.draggables[u]||null}function o(u){const m=a(u);return m||H(),m}const i={register:u=>{e.draggables[u.descriptor.id]=u,n({type:"ADDITION",value:u})},update:(u,m)=>{const f=e.draggables[m.descriptor.id];f&&f.uniqueId===u.uniqueId&&(delete e.draggables[m.descriptor.id],e.draggables[u.descriptor.id]=u)},unregister:u=>{const m=u.descriptor.id,f=a(m);f&&u.uniqueId===f.uniqueId&&(delete e.draggables[m],e.droppables[u.descriptor.droppableId]&&n({type:"REMOVAL",value:u}))},getById:o,findById:a,exists:u=>!!a(u),getAllByType:u=>Object.values(e.draggables).filter(m=>m.descriptor.type===u)};function l(u){return e.droppables[u]||null}function c(u){const m=l(u);return m||H(),m}const d={register:u=>{e.droppables[u.descriptor.id]=u},unregister:u=>{const m=l(u.descriptor.id);m&&u.uniqueId===m.uniqueId&&delete e.droppables[u.descriptor.id]},getById:c,findById:l,exists:u=>!!l(u),getAllByType:u=>Object.values(e.droppables).filter(m=>m.descriptor.type===u)};function p(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:d,subscribe:r,clean:p}}function q1(){const e=Oe(V1,[]);return h.useEffect(()=>function(){e.clean()},[e]),e}var Hi=Ce.createContext(null),sa=()=>{const e=document.body;return e||H(),e};const W1={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},H1=e=>`rfd-announcement-${e}`;function K1(e){const t=Oe(()=>H1(e),[e]),r=h.useRef(null);return h.useEffect(function(){const o=document.createElement("div");return r.current=o,o.id=t,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),Zn(o.style,W1),sa().appendChild(o),function(){setTimeout(function(){const c=sa();c.contains(o)&&c.removeChild(o),o===r.current&&(r.current=null)})}},[t]),de(a=>{const o=r.current;if(o){o.textContent=a;return}},[])}const Q1={separator:"::"};function Ki(e,t=Q1){const r=Ce.useId();return Oe(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}function Y1({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function X1({contextId:e,text:t}){const r=Ki("hidden-text",{separator:"-"}),n=Oe(()=>Y1({contextId:e,uniqueId:r}),[r,e]);return h.useEffect(function(){const o=document.createElement("div");return o.id=n,o.textContent=t,o.style.display="none",sa().appendChild(o),function(){const l=sa();l.contains(o)&&l.removeChild(o)}},[n,t]),n}var Pa=Ce.createContext(null);function up(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),t}function J1(){let e=null;function t(){return!!e}function r(i){return i===e}function n(i){e&&H();const l={abandon:i};return e=l,l}function a(){e||H(),e=null}function o(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:n,release:a,tryAbandon:o}}function gn(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const Z1=9,ek=13,Qi=27,mp=32,tk=33,rk=34,sk=35,nk=36,ak=37,ok=38,ik=39,lk=40,ck={[ek]:!0,[Z1]:!0};var pp=e=>{ck[e.keyCode]&&e.preventDefault()};const Aa=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(n=>`on${n}`in document)||e})(),hp=0,Lc=5;function dk(e,t){return Math.abs(t.x-e.x)>=Lc||Math.abs(t.y-e.y)>=Lc}const Mc={type:"IDLE"};function uk({cancel:e,completed:t,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:a=>{const{button:o,clientX:i,clientY:l}=a;if(o!==hp)return;const c={x:i,y:l},d=r();if(d.type==="DRAGGING"){a.preventDefault(),d.actions.move(c);return}d.type!=="PENDING"&&H();const p=d.point;if(!dk(p,c))return;a.preventDefault();const u=d.actions.fluidLift(c);n({type:"DRAGGING",actions:u})}},{eventName:"mouseup",fn:a=>{const o=r();if(o.type!=="DRAGGING"){e();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:a=>{r().type==="DRAGGING"&&a.preventDefault(),e()}},{eventName:"keydown",fn:a=>{if(r().type==="PENDING"){e();return}if(a.keyCode===Qi){a.preventDefault(),e();return}pp(a)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:a=>{const o=r();if(o.type==="IDLE"&&H(),o.actions.shouldRespectForcePress()){e();return}a.preventDefault()}},{eventName:Aa,fn:e}]}function mk(e){const t=h.useRef(Mc),r=h.useRef(Dr),n=Oe(()=>({eventName:"mousedown",fn:function(u){if(u.defaultPrevented||u.button!==hp||u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)return;const m=e.findClosestDraggableId(u);if(!m)return;const f=e.tryGetLock(m,i,{sourceEvent:u});if(!f)return;u.preventDefault();const b={x:u.clientX,y:u.clientY};r.current(),d(f,b)}}),[e]),a=Oe(()=>({eventName:"webkitmouseforcewillbegin",fn:p=>{if(p.defaultPrevented)return;const u=e.findClosestDraggableId(p);if(!u)return;const m=e.findOptionsForDraggable(u);m&&(m.shouldRespectForcePress||e.canGetLock(u)&&p.preventDefault())}}),[e]),o=de(function(){const u={passive:!1,capture:!0};r.current=Mt(window,[a,n],u)},[a,n]),i=de(()=>{t.current.type!=="IDLE"&&(t.current=Mc,r.current(),o())},[o]),l=de(()=>{const p=t.current;i(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[i]),c=de(function(){const u={capture:!0,passive:!1},m=uk({cancel:l,completed:i,getPhase:()=>t.current,setPhase:f=>{t.current=f}});r.current=Mt(window,m,u)},[l,i]),d=de(function(u,m){t.current.type!=="IDLE"&&H(),t.current={type:"PENDING",point:m,actions:u},c()},[c]);Pt(function(){return o(),function(){r.current()}},[o])}function pk(){}const hk={[rk]:!0,[tk]:!0,[nk]:!0,[sk]:!0};function fk(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:a=>{if(a.keyCode===Qi){a.preventDefault(),r();return}if(a.keyCode===mp){a.preventDefault(),n();return}if(a.keyCode===lk){a.preventDefault(),e.moveDown();return}if(a.keyCode===ok){a.preventDefault(),e.moveUp();return}if(a.keyCode===ik){a.preventDefault(),e.moveRight();return}if(a.keyCode===ak){a.preventDefault(),e.moveLeft();return}if(hk[a.keyCode]){a.preventDefault();return}pp(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Aa,fn:r}]}function gk(e){const t=h.useRef(pk),r=Oe(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==mp)return;const i=e.findClosestDraggableId(o);if(!i)return;const l=e.tryGetLock(i,p,{sourceEvent:o});if(!l)return;o.preventDefault();let c=!0;const d=l.snapLift();t.current();function p(){c||H(),c=!1,t.current(),n()}t.current=Mt(window,fk(d,p),{capture:!0,passive:!1})}}),[e]),n=de(function(){const o={passive:!1,capture:!0};t.current=Mt(window,[r],o)},[r]);Pt(function(){return n(),function(){t.current()}},[n])}const lo={type:"IDLE"},bk=120,xk=.15;function vk({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===Qi&&r.preventDefault(),e()}},{eventName:Aa,fn:e}]}function yk({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const a=r();if(a.type!=="DRAGGING"){e();return}a.hasMoved=!0;const{clientX:o,clientY:i}=n.touches[0],l={x:o,y:i};n.preventDefault(),a.actions.move(l)}},{eventName:"touchend",fn:n=>{const a=r();if(a.type!=="DRAGGING"){e();return}n.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:n=>{if(r().type!=="DRAGGING"){e();return}n.preventDefault(),e()}},{eventName:"touchforcechange",fn:n=>{const a=r();a.type==="IDLE"&&H();const o=n.touches[0];if(!o||!(o.force>=xk))return;const l=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){l&&e();return}if(l){if(a.hasMoved){n.preventDefault();return}e();return}n.preventDefault()}},{eventName:Aa,fn:e}]}function wk(e){const t=h.useRef(lo),r=h.useRef(Dr),n=de(function(){return t.current},[]),a=de(function(f){t.current=f},[]),o=Oe(()=>({eventName:"touchstart",fn:function(f){if(f.defaultPrevented)return;const b=e.findClosestDraggableId(f);if(!b)return;const x=e.tryGetLock(b,l,{sourceEvent:f});if(!x)return;const g=f.touches[0],{clientX:v,clientY:y}=g,w={x:v,y};r.current(),u(x,w)}}),[e]),i=de(function(){const f={capture:!0,passive:!1};r.current=Mt(window,[o],f)},[o]),l=de(()=>{const m=t.current;m.type!=="IDLE"&&(m.type==="PENDING"&&clearTimeout(m.longPressTimerId),a(lo),r.current(),i())},[i,a]),c=de(()=>{const m=t.current;l(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[l]),d=de(function(){const f={capture:!0,passive:!1},b={cancel:c,completed:l,getPhase:n},x=Mt(window,yk(b),f),g=Mt(window,vk(b),f);r.current=function(){x(),g()}},[c,n,l]),p=de(function(){const f=n();f.type!=="PENDING"&&H();const b=f.actions.fluidLift(f.point);a({type:"DRAGGING",actions:b,hasMoved:!1})},[n,a]),u=de(function(f,b){n().type!=="IDLE"&&H();const x=setTimeout(p,bk);a({type:"PENDING",point:b,actions:f,longPressTimerId:x}),d()},[d,n,a,p]);Pt(function(){return i(),function(){r.current();const b=n();b.type==="PENDING"&&(clearTimeout(b.longPressTimerId),a(lo))}},[n,i,a]),Pt(function(){return Mt(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const kk=["input","button","textarea","select","option","optgroup","video","audio"];function fp(e,t){if(t==null)return!1;if(kk.includes(t.tagName.toLowerCase()))return!0;const n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:fp(e,t.parentElement)}function jk(e,t){const r=t.target;return Da(r)?fp(e,r):!1}var Nk=e=>Gt(e.getBoundingClientRect()).center;function Ck(e){return e instanceof dp(e).Element}const Sk=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||e})();function gp(e,t){return e==null?null:e[Sk](t)?e:gp(e.parentElement,t)}function Ek(e,t){return e.closest?e.closest(t):gp(e,t)}function Rk(e){return`[${Ps.contextId}="${e}"]`}function Dk(e,t){const r=t.target;if(!Ck(r))return null;const n=Rk(e),a=Ek(r,n);return!a||!Da(a)?null:a}function Pk(e,t){const r=Dk(e,t);return r?r.getAttribute(Ps.draggableId):null}function Ak(e,t){const r=`[${Vo.contextId}="${e}"]`,a=cp(document,r).find(o=>o.getAttribute(Vo.id)===t);return!a||!Da(a)?null:a}function Ik(e){e.preventDefault()}function Fn({expected:e,phase:t,isLockActive:r,shouldWarn:n}){return!(!r()||e!==t)}function bp({lockAPI:e,store:t,registry:r,draggableId:n}){if(e.isClaimed())return!1;const a=r.draggable.findById(n);return!(!a||!a.options.isEnabled||!ap(t.getState(),n))}function Tk({lockAPI:e,contextId:t,store:r,registry:n,draggableId:a,forceSensorStop:o,sourceEvent:i}){if(!bp({lockAPI:e,store:r,registry:n,draggableId:a}))return null;const c=n.draggable.getById(a),d=Ak(t,c.descriptor.id);if(!d||i&&!c.options.canDragInteractiveElements&&jk(d,i))return null;const p=e.claim(o||Dr);let u="PRE_DRAG";function m(){return c.options.shouldRespectForcePress}function f(){return e.isActive(p)}function b(C,N){Fn({expected:C,phase:u,isLockActive:f,shouldWarn:!0})&&r.dispatch(N())}const x=b.bind(null,"DRAGGING");function g(C){function N(){e.release(),u="COMPLETED"}u!=="PRE_DRAG"&&(N(),H()),r.dispatch(Ew(C.liftActionArgs)),u="DRAGGING";function S(I,T={shouldBlockNextClick:!1}){if(C.cleanup(),T.shouldBlockNextClick){const _=Mt(window,[{eventName:"click",fn:Ik,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(_)}N(),r.dispatch(Xm({reason:I}))}return{isActive:()=>Fn({expected:"DRAGGING",phase:u,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:m,drop:I=>S("DROP",I),cancel:I=>S("CANCEL",I),...C.actions}}function v(C){const N=dn(I=>{x(()=>Ym({client:I}))});return{...g({liftActionArgs:{id:a,clientSelection:C,movementMode:"FLUID"},cleanup:()=>N.cancel(),actions:{move:N}}),move:N}}function y(){const C={moveUp:()=>x(Mw),moveRight:()=>x(Fw),moveDown:()=>x(_w),moveLeft:()=>x(zw)};return g({liftActionArgs:{id:a,clientSelection:Nk(d),movementMode:"SNAP"},cleanup:Dr,actions:C})}function w(){Fn({expected:"PRE_DRAG",phase:u,isLockActive:f,shouldWarn:!0})&&e.release()}return{isActive:()=>Fn({expected:"PRE_DRAG",phase:u,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:m,fluidLift:v,snapLift:y,abort:w}}const Ok=[mk,gk,wk];function Lk({contextId:e,store:t,registry:r,customSensors:n,enableDefaultSensors:a}){const o=[...a?Ok:[],...n||[]],i=h.useState(()=>J1())[0],l=de(function(g,v){gn(g)&&!gn(v)&&i.tryAbandon()},[i]);Pt(function(){let g=t.getState();return t.subscribe(()=>{const y=t.getState();l(g,y),g=y})},[i,t,l]),Pt(()=>i.tryAbandon,[i.tryAbandon]);const c=de(x=>bp({lockAPI:i,registry:r,store:t,draggableId:x}),[i,r,t]),d=de((x,g,v)=>Tk({lockAPI:i,registry:r,contextId:e,store:t,draggableId:x,forceSensorStop:g||null,sourceEvent:v&&v.sourceEvent?v.sourceEvent:null}),[e,i,r,t]),p=de(x=>Pk(e,x),[e]),u=de(x=>{const g=r.draggable.findById(x);return g?g.options:null},[r.draggable]),m=de(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch($i()))},[i,t]),f=de(()=>i.isClaimed(),[i]),b=Oe(()=>({canGetLock:c,tryGetLock:d,findClosestDraggableId:p,findOptionsForDraggable:u,tryReleaseLock:m,isLockClaimed:f}),[c,d,p,u,m,f]);for(let x=0;x<o.length;x++)o[x](b)}const Mk=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};ga.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),_k=e=>({...fn,...e.autoScrollerOptions,durationDampening:{...fn.durationDampening,...e.autoScrollerOptions}});function Xs(e){return e.current||H(),e.current}function Fk(e){const{contextId:t,setCallbacks:r,sensors:n,nonce:a,dragHandleUsageInstructions:o}=e,i=h.useRef(null),l=up(e),c=de(()=>Mk(l.current),[l]),d=de(()=>_k(l.current),[l]),p=K1(t),u=X1({contextId:t,text:o}),m=B1(t,a),f=de(_=>{Xs(i).dispatch(_)},[]),b=Oe(()=>dc({publishWhileDragging:Dw,updateDroppableScroll:Aw,updateDroppableIsEnabled:Iw,updateDroppableIsCombineEnabled:Tw,collectionStarting:Pw},f),[f]),x=q1(),g=Oe(()=>v1(x,b),[x,b]),v=Oe(()=>M1({scrollWindow:y1,scrollDroppable:g.scrollDroppable,getAutoScrollerOptions:d,...dc({move:Ym},f)}),[g.scrollDroppable,f,d]),y=G1(t),w=Oe(()=>f1({announce:p,autoScroller:v,dimensionMarshal:g,focusMarshal:y,getResponders:c,styleMarshal:m}),[p,v,g,y,c,m]);i.current=w;const k=de(()=>{const _=Xs(i);_.getState().phase!=="IDLE"&&_.dispatch($i())},[]),C=de(()=>{const _=Xs(i).getState();return _.phase==="DROP_ANIMATING"?!0:_.phase==="IDLE"?!1:_.isDragging},[]),N=Oe(()=>({isDragging:C,tryAbort:k}),[C,k]);r(N);const S=de(_=>ap(Xs(i).getState(),_),[]),I=de(()=>Br(Xs(i).getState()),[]),T=Oe(()=>({marshal:g,focus:y,contextId:t,canLift:S,isMovementAllowed:I,dragHandleUsageInstructionsId:u,registry:x}),[t,g,u,y,S,I,x]);return Lk({contextId:t,store:w,registry:x,customSensors:n||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),h.useEffect(()=>k,[k]),Ce.createElement(Pa.Provider,{value:T},Ce.createElement(cy,{context:Hi,store:w},e.children))}function zk(){return Ce.useId()}function xp(e){const t=zk(),r=e.dragHandleUsageInstructions||Vn.dragHandleUsageInstructions;return Ce.createElement(gy,null,n=>Ce.createElement(Fk,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const _c={dragging:5e3,dropAnimating:4500},$k=(e,t)=>t?an.drop(t.duration):e?an.snap:an.fluid,Bk=(e,t)=>{if(e)return t?hn.opacity.drop:hn.opacity.combining},Uk=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function Gk(e){const r=e.dimension.client,{offset:n,combineWith:a,dropping:o}=e,i=!!a,l=Uk(e),c=!!o,d=c?Uo.drop(n,i):Uo.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:$k(l,o),transform:d,opacity:Bk(i,c),zIndex:c?_c.dropAnimating:_c.dragging,pointerEvents:"none"}}function Vk(e){return{transform:Uo.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function qk(e){return e.type==="DRAGGING"?Gk(e):Vk(e)}function Wk(e,t,r=dt){const n=window.getComputedStyle(t),a=t.getBoundingClientRect(),o=Nm(a,n),i=Jn(o,r),l={client:o,tagName:t.tagName.toLowerCase(),display:n.display},c={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:o,page:i}}function Hk(e){const t=Ki("draggable"),{descriptor:r,registry:n,getDraggableRef:a,canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:l}=e,c=Oe(()=>({canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:l}),[o,l,i]),d=de(f=>{const b=a();return b||H(),Wk(r,b,f)},[r,a]),p=Oe(()=>({uniqueId:t,descriptor:r,options:c,getDimension:d}),[r,d,c,t]),u=h.useRef(p),m=h.useRef(!0);Pt(()=>(n.draggable.register(u.current),()=>n.draggable.unregister(u.current)),[n.draggable]),Pt(()=>{if(m.current){m.current=!1;return}const f=u.current;u.current=p,n.draggable.update(p,f)},[p,n.draggable])}var Yi=Ce.createContext(null);function na(e){const t=h.useContext(e);return t||H(),t}function Kk(e){e.preventDefault()}const Qk=e=>{const t=h.useRef(null),r=de((N=null)=>{t.current=N},[]),n=de(()=>t.current,[]),{contextId:a,dragHandleUsageInstructionsId:o,registry:i}=na(Pa),{type:l,droppableId:c}=na(Yi),d=Oe(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:p,draggableId:u,isEnabled:m,shouldRespectForcePress:f,canDragInteractiveElements:b,isClone:x,mapped:g,dropAnimationFinished:v}=e;if(!x){const N=Oe(()=>({descriptor:d,registry:i,getDraggableRef:n,canDragInteractiveElements:b,shouldRespectForcePress:f,isEnabled:m}),[d,i,n,b,f,m]);Hk(N)}const y=Oe(()=>m?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":u,"data-rfd-drag-handle-context-id":a,draggable:!1,onDragStart:Kk}:null,[a,o,u,m]),w=de(N=>{g.type==="DRAGGING"&&g.dropping&&N.propertyName==="transform"&&ga.flushSync(v)},[v,g]),k=Oe(()=>{const N=qk(g),S=g.type==="DRAGGING"&&g.dropping?w:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":a,"data-rfd-draggable-id":u,style:N,onTransitionEnd:S},dragHandleProps:y}},[a,y,u,g,w,r]),C=Oe(()=>({draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}),[d.droppableId,d.id,d.index,d.type]);return Ce.createElement(Ce.Fragment,null,p(k,g.snapshot,C))};var vp=(e,t)=>e===t,yp=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const Yk=e=>e.combine?e.combine.draggableId:null,Xk=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function Jk(){const e=ct((a,o)=>({x:a,y:o})),t=ct((a,o,i=null,l=null,c=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:i,combineWith:l,combineTargetFor:null})),r=ct((a,o,i,l,c=null,d=null,p=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:o,offset:a,dimension:i,forceShouldAnimate:p,snapshot:t(o,l,c,d,null)}}));return(a,o)=>{if(gn(a)){if(a.critical.draggable.id!==o.draggableId)return null;const i=a.current.client.offset,l=a.dimensions.draggables[o.draggableId],c=Dt(a.impact),d=Xk(a.impact),p=a.forceShouldAnimate;return r(e(i.x,i.y),a.movementMode,l,o.isClone,c,d,p)}if(a.phase==="DROP_ANIMATING"){const i=a.completed;if(i.result.draggableId!==o.draggableId)return null;const l=o.isClone,c=a.dimensions.draggables[o.draggableId],d=i.result,p=d.mode,u=yp(d),m=Yk(d),b={duration:a.dropDuration,curve:Ui.drop,moveTo:a.newHomeClientOffset,opacity:m?hn.opacity.drop:null,scale:m?hn.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:c,dropping:b,draggingOver:u,combineWith:m,mode:p,forceShouldAnimate:null,snapshot:t(p,l,u,m,b)}}}return null}}function wp(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const Zk={mapped:{type:"SECONDARY",offset:dt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:wp(null)}};function ej(){const e=ct((i,l)=>({x:i,y:l})),t=ct(wp),r=ct((i,l=null,c)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),n=i=>i?r(dt,i,!0):null,a=(i,l,c,d)=>{const p=c.displaced.visible[i],u=!!(d.inVirtualList&&d.effected[i]),m=Sa(c),f=m&&m.draggableId===i?l:null;if(!p){if(!u)return n(f);if(c.displaced.invisible[i])return null;const g=Bs(d.displacedBy.point),v=e(g.x,g.y);return r(v,f,!0)}if(u)return n(f);const b=c.displacedBy.point,x=e(b.x,b.y);return r(x,f,p.shouldAnimate)};return(i,l)=>{if(gn(i))return i.critical.draggable.id===l.draggableId?null:a(l.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const c=i.completed;return c.result.draggableId===l.draggableId?null:a(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const tj=()=>{const e=Jk(),t=ej();return(n,a)=>e(n,a)||t(n,a)||Zk},rj={dropAnimationFinished:Jm},sj=jm(tj,rj,null,{context:Hi,areStatePropsEqual:vp})(Qk);function kp(e){return na(Yi).isUsingCloneFor===e.draggableId&&!e.isClone?null:Ce.createElement(sj,e)}function qo(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return Ce.createElement(kp,Zn({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const jp=e=>t=>e===t,nj=jp("scroll"),aj=jp("auto"),Fc=(e,t)=>t(e.overflowX)||t(e.overflowY),oj=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return Fc(r,nj)||Fc(r,aj)},ij=()=>!1,Np=e=>e==null?null:e===document.body?ij()?e:null:e===document.documentElement?null:oj(e)?e:Np(e.parentElement);var Wo=e=>({x:e.scrollLeft,y:e.scrollTop});const Cp=e=>e?window.getComputedStyle(e).position==="fixed"?!0:Cp(e.parentElement):!1;var lj=e=>{const t=Np(e),r=Cp(e);return{closestScrollable:t,isFixedOnPage:r}},cj=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:n,direction:a,client:o,page:i,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:m,client:f}=l,b=rp({scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth,height:f.paddingBox.height,width:f.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:f,scrollSize:m,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:b,diff:{value:dt,displacement:dt}}}})(),d=a==="vertical"?Li:Lm,p=Rs({page:i,withPlaceholder:null,axis:d,frame:c});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:n,axis:d,isEnabled:t,client:o,page:i,frame:c,subject:p}};const dj=(e,t)=>{const r=Cm(e);if(!t||e!==t)return r;const n=r.paddingBox.top-t.scrollTop,a=r.paddingBox.left-t.scrollLeft,o=n+t.scrollHeight,i=a+t.scrollWidth,c=Ai({top:n,right:i,bottom:o,left:a},r.border);return Ii({borderBox:c,margin:r.margin,border:r.border,padding:r.padding})};var uj=({ref:e,descriptor:t,env:r,windowScroll:n,direction:a,isDropDisabled:o,isCombineEnabled:i,shouldClipSubject:l})=>{const c=r.closestScrollable,d=dj(e,c),p=Jn(d,n),u=(()=>{if(!c)return null;const f=Cm(c),b={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:f,page:Jn(f,n),scroll:Wo(c),scrollSize:b,shouldClipSubject:l}})();return cj({descriptor:t,isEnabled:!o,isCombineEnabled:i,isFixedOnPage:r.isFixedOnPage,direction:a,client:d,page:p,closest:u})};const mj={passive:!1},pj={passive:!0};var zc=e=>e.shouldPublishImmediately?mj:pj;const zn=e=>e&&e.env.closestScrollable||null;function hj(e){const t=h.useRef(null),r=na(Pa),n=Ki("droppable"),{registry:a,marshal:o}=r,i=up(e),l=Oe(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=h.useRef(l),d=Oe(()=>ct((k,C)=>{t.current||H();const N={x:k,y:C};o.updateDroppableScroll(l.id,N)}),[l.id,o]),p=de(()=>{const k=t.current;return!k||!k.env.closestScrollable?dt:Wo(k.env.closestScrollable)},[]),u=de(()=>{const k=p();d(k.x,k.y)},[p,d]),m=Oe(()=>dn(u),[u]),f=de(()=>{const k=t.current,C=zn(k);if(k&&C||H(),k.scrollOptions.shouldPublishImmediately){u();return}m()},[m,u]),b=de((k,C)=>{t.current&&H();const N=i.current,S=N.getDroppableRef();S||H();const I=lj(S),T={ref:S,descriptor:l,env:I,scrollOptions:C};t.current=T;const _=uj({ref:S,descriptor:l,env:I,windowScroll:k,direction:N.direction,isDropDisabled:N.isDropDisabled,isCombineEnabled:N.isCombineEnabled,shouldClipSubject:!N.ignoreContainerClipping}),V=I.closestScrollable;return V&&(V.setAttribute(Tc.contextId,r.contextId),V.addEventListener("scroll",f,zc(T.scrollOptions))),_},[r.contextId,l,f,i]),x=de(()=>{const k=t.current,C=zn(k);return k&&C||H(),Wo(C)},[]),g=de(()=>{const k=t.current;k||H();const C=zn(k);t.current=null,C&&(m.cancel(),C.removeAttribute(Tc.contextId),C.removeEventListener("scroll",f,zc(k.scrollOptions)))},[f,m]),v=de(k=>{const C=t.current;C||H();const N=zn(C);N||H(),N.scrollTop+=k.y,N.scrollLeft+=k.x},[]),y=Oe(()=>({getDimensionAndWatchScroll:b,getScrollWhileDragging:x,dragStopped:g,scroll:v}),[g,b,x,v]),w=Oe(()=>({uniqueId:n,descriptor:l,callbacks:y}),[y,l,n]);Pt(()=>(c.current=w.descriptor,a.droppable.register(w),()=>{t.current&&g(),a.droppable.unregister(w)}),[y,l,g,w,o,a.droppable]),Pt(()=>{t.current&&o.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),Pt(()=>{t.current&&o.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function co(){}const $c={width:0,height:0,margin:jy},fj=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?$c:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},gj=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const n=fj({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?an.placeholder:null}},bj=e=>{const t=h.useRef(null),r=de(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:n,onTransitionEnd:a,onClose:o,contextId:i}=e,[l,c]=h.useState(e.animate==="open");h.useEffect(()=>l?n!=="open"?(r(),c(!1),co):t.current?co:(t.current=setTimeout(()=>{t.current=null,c(!1)}),r):co,[n,l,r]);const d=de(u=>{u.propertyName==="height"&&(a(),n==="close"&&o())},[n,o,a]),p=gj({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return Ce.createElement(e.placeholder.tagName,{style:p,"data-rfd-placeholder-context-id":i,onTransitionEnd:d,ref:e.innerRef})};var xj=Ce.memo(bj);class vj extends Ce.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const yj=e=>{const t=h.useContext(Pa);t||H();const{contextId:r,isMovementAllowed:n}=t,a=h.useRef(null),o=h.useRef(null),{children:i,droppableId:l,type:c,mode:d,direction:p,ignoreContainerClipping:u,isDropDisabled:m,isCombineEnabled:f,snapshot:b,useClone:x,updateViewportMaxScroll:g,getContainerForClone:v}=e,y=de(()=>a.current,[]),w=de((V=null)=>{a.current=V},[]);de(()=>o.current,[]);const k=de((V=null)=>{o.current=V},[]),C=de(()=>{n()&&g({maxScroll:np()})},[n,g]);hj({droppableId:l,type:c,mode:d,direction:p,isDropDisabled:m,isCombineEnabled:f,ignoreContainerClipping:u,getDroppableRef:y});const N=Oe(()=>Ce.createElement(vj,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:V,data:z,animate:le})=>Ce.createElement(xj,{placeholder:z,onClose:V,innerRef:k,animate:le,contextId:r,onTransitionEnd:C})),[r,C,e.placeholder,e.shouldAnimatePlaceholder,k]),S=Oe(()=>({innerRef:w,placeholder:N,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":r}}),[r,l,N,w]),I=x?x.dragging.draggableId:null,T=Oe(()=>({droppableId:l,type:c,isUsingCloneFor:I}),[l,I,c]);function _(){if(!x)return null;const{dragging:V,render:z}=x,le=Ce.createElement(kp,{draggableId:V.draggableId,index:V.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(U,ce)=>z(U,ce,V));return z0.createPortal(le,v())}return Ce.createElement(Yi.Provider,{value:T},i(S,b),_())};function wj(){return document.body||H(),document.body}const Bc={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:wj},Sp=e=>{let t={...e},r;for(r in Bc)e[r]===void 0&&(t={...t,[r]:Bc[r]});return t},uo=(e,t)=>e===t.droppable.type,Uc=(e,t)=>t.draggables[e.draggable.id],kj=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=ct(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),n=ct((o,i,l,c,d,p)=>{const u=d.descriptor.id;if(d.descriptor.droppableId===o){const b=p?{render:p,dragging:r(d.descriptor)}:null,x={isDraggingOver:l,draggingOverWith:l?u:null,draggingFromThisWith:u,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:b}}if(!i)return t;if(!c)return e;const f={isDraggingOver:l,draggingOverWith:u,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:f,useClone:null}});return(o,i)=>{const l=Sp(i),c=l.droppableId,d=l.type,p=!l.isDropDisabled,u=l.renderClone;if(gn(o)){const m=o.critical;if(!uo(d,m))return t;const f=Uc(m,o.dimensions),b=Dt(o.impact)===c;return n(c,p,b,b,f,u)}if(o.phase==="DROP_ANIMATING"){const m=o.completed;if(!uo(d,m.critical))return t;const f=Uc(m.critical,o.dimensions);return n(c,p,yp(m.result)===c,Dt(m.impact)===c,f,u)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const m=o.completed;if(!uo(d,m.critical))return t;const f=Dt(m.impact)===c,b=!!(m.impact.at&&m.impact.at.type==="COMBINE"),x=m.critical.droppable.id===c;return f?b?e:t:x?e:t}return t}},jj={updateViewportMaxScroll:Lw},Ho=jm(kj,jj,(e,t,r)=>({...Sp(r),...e,...t}),{context:Hi,areStatePropsEqual:vp})(yj),Ep=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:X("w-full caption-bottom text-sm",e),...t})}));Ep.displayName="Table";const Rp=h.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:X("[&_tr]:border-b",e),...t}));Rp.displayName="TableHeader";const Dp=h.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:X("[&_tr:last-child]:border-0",e),...t}));Dp.displayName="TableBody";const Nj=h.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:X("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Nj.displayName="TableFooter";const qn=h.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:X("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));qn.displayName="TableRow";const Ko=h.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:X("h-12 px-4 text-center align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Ko.displayName="TableHead";const Zs=h.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:X("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Zs.displayName="TableCell";const Cj=h.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:X("mt-4 text-sm text-muted-foreground",e),...t}));Cj.displayName="TableCaption";const Xi=wa("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",xs:"h-7 rounded-md px-2 text-xs",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),O=h.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},o)=>{const i=n?v0:"button";return s.jsx(i,{className:X(Xi({variant:t,size:r,className:e})),ref:o,...a})});O.displayName="Button";function Sj({column:e,dragHandleProps:t,onDelete:r,isAuthenticated:n=!1,editMode:a=!1}){const i=["id","no","route","code","location","delivery","tngRoute","info","images","kilometer","tollPrice"].includes(e.dataKey);return s.jsxs("div",{className:"flex items-center justify-center w-[98%] mx-auto relative",children:[s.jsx("div",{...t,className:"text-center",children:s.jsx("span",{className:"block bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent font-medium",style:{fontSize:"10px"},children:e.name})}),!i&&s.jsx("div",{className:"absolute right-0 flex items-center gap-1 opacity-50 group-hover:opacity-100 transition-opacity",children:s.jsx(O,{size:"sm",variant:"ghost",className:`h-auto p-0 text-sm ${n?"text-muted-foreground hover:text-destructive":"opacity-50 cursor-not-allowed text-muted-foreground"}`,onClick:()=>n&&r(),disabled:!n,title:n?"Delete column":"Authentication required to delete columns","data-testid":`button-delete-column-${e.dataKey}`,children:s.jsx(kt,{className:"w-3 h-3"})})})]})}const Ae=h.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:X("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));Ae.displayName="Input";const As=C0,Is=S0,Jr=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(vd,{ref:n,className:X("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(y0,{asChild:!0,children:s.jsx(Cn,{className:"h-4 w-4 opacity-50"})})]}));Jr.displayName=vd.displayName;const Pp=h.forwardRef(({className:e,...t},r)=>s.jsx(yd,{ref:r,className:X("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(ki,{className:"h-4 w-4"})}));Pp.displayName=yd.displayName;const Ap=h.forwardRef(({className:e,...t},r)=>s.jsx(wd,{ref:r,className:X("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Cn,{className:"h-4 w-4"})}));Ap.displayName=wd.displayName;const Zr=h.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(w0,{children:s.jsxs(kd,{ref:a,className:X("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(Pp,{}),s.jsx(k0,{className:X("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(Ap,{})]})}));Zr.displayName=kd.displayName;const Ej=h.forwardRef(({className:e,...t},r)=>s.jsx(jd,{ref:r,className:X("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Ej.displayName=jd.displayName;const wt=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Nd,{ref:n,className:X("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(j0,{children:s.jsx(Ir,{className:"h-4 w-4"})})}),s.jsx(N0,{children:t})]}));wt.displayName=Nd.displayName;const Rj=h.forwardRef(({className:e,...t},r)=>s.jsx(Cd,{ref:r,className:X("-mx-1 my-1 h-px bg-muted",e),...t}));Rj.displayName=Cd.displayName;function mo({value:e,type:t,onSave:r,options:n,dataKey:a}){const[o,i]=h.useState(!1),[l,c]=h.useState(e),d=h.useRef(null);h.useEffect(()=>{c(e)},[e]),h.useEffect(()=>{o&&d.current&&(d.current.focus(),d.current.select())},[o]);const p=()=>{let b=l;t==="number"?b=parseInt(l)||0:t==="currency"&&(b=parseFloat(l.toString().replace(/[^0-9.]/g,""))||0,b=b.toFixed(2)),r(b),i(!1)},u=()=>{c(e),i(!1)},m=b=>{b.key==="Enter"?p():b.key==="Escape"&&u()},f=()=>{if(a==="latitude")return"e.g. 3.139003 (decimal degrees)";if(a==="longitude")return"e.g. 101.686855 (decimal degrees)";if(t==="currency")return"0.00";if(t==="number")return"Enter number"};return o?t==="select"&&n?s.jsxs(As,{value:l,onValueChange:b=>{c(b),r(b),i(!1)},children:[s.jsx(Jr,{className:"w-full h-6 px-2 py-1 text-sm bg-transparent border-transparent",children:s.jsx(Is,{})}),s.jsx(Zr,{children:n.map(b=>s.jsx(wt,{value:b,children:b},b))})]}):s.jsx(Ae,{ref:d,type:t==="number"||t==="currency"?"number":"text",step:t==="currency"?"0.01":void 0,value:t==="currency"?l.toString().replace(/[^0-9.]/g,""):l,onChange:b=>c(b.target.value),onBlur:p,onKeyDown:m,placeholder:f(),className:"w-full h-6 px-2 py-1 text-sm cell-editing glass-input border-none","data-testid":"input-editable-cell"}):s.jsx("span",{onClick:()=>i(!0),className:"cursor-pointer hover:bg-muted/50 rounded px-1 py-0.5 transition-colors","data-testid":"text-editable-cell",children:e})}const Dj="modulepreload",Pj=function(e){return"/"+e},Gc={},St=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=Pj(c),c in Gc)return;Gc[c]=!0;const d=c.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":Dj,d||(u.as="script"),u.crossOrigin="",u.href=c,l&&u.setAttribute("nonce",l),document.head.appendChild(u),d)return new Promise((m,f)=>{u.addEventListener("load",m),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})};function Aj({images:e,rowId:t,onAddImage:r,editMode:n,onAccessDenied:a}){const[o,i]=h.useState(null);return h.useEffect(()=>{let l=null;const d=setTimeout(async()=>{if(typeof window<"u"&&e.length>0)try{await new Promise(y=>setTimeout(y,150));const p=document.getElementById(`lightgallery-preview-${t}`);if(!p){console.warn("Gallery element not found:",`lightgallery-preview-${t}`);return}if(p.querySelectorAll("a[data-src]").length===0){console.warn("No image links found for lightGallery");return}const{default:m}=await St(async()=>{const{default:y}=await import("./gallery-vendor-Bg4Nf3lp.js");return{default:y}},[]),f=await St(()=>import("./lg-thumbnail.es5-B_2a59Ql.js"),[]),b=await St(()=>import("./lg-zoom.es5-CFpITAXr.js"),[]),x=await St(()=>import("./lg-autoplay.es5-DUE-vek5.js"),[]),g=await St(()=>import("./lg-fullscreen.es5-BR_uMRHr.js"),[]),v=await St(()=>import("./lg-video.es5-C1lgJo_I.js"),[]);await St(()=>Promise.resolve({}),__vite__mapDeps([0])),await St(()=>Promise.resolve({}),__vite__mapDeps([1])),await St(()=>Promise.resolve({}),__vite__mapDeps([2])),await St(()=>Promise.resolve({}),__vite__mapDeps([3])),await St(()=>Promise.resolve({}),__vite__mapDeps([4])),await St(()=>Promise.resolve({}),__vite__mapDeps([5])),l=m(p,{licenseKey:"GPLv3",plugins:[f.default,b.default,x.default,g.default,v.default],speed:800,mode:"lg-slide",download:!1,selector:"a[data-src]",animateThumb:!0,startClass:"lg-start-zoom",backdropDuration:300,hideBarsDelay:2e3,mousewheel:!0,enableSwipe:!0,enableDrag:!0,autoplayFirstVideo:!1,youTubePlayerParams:{modestbranding:1,showinfo:0,rel:0,controls:1},vimeoPlayerParams:{byline:0,portrait:0,color:"A90707"}}),i(l)}catch(p){console.error("Failed to load LightGallery:",p);const u=f=>{f.preventDefault();const x=f.target.closest("a[data-src]");x&&window.open(x.dataset.src,"_blank")},m=document.getElementById(`lightgallery-preview-${t}`);m&&m.addEventListener("click",u)}},100);return()=>{if(clearTimeout(d),l)try{l.destroy()}catch(p){console.warn("Error destroying lightGallery:",p)}}},[e,t]),e.length===0?s.jsx("div",{className:"flex items-center justify-center gap-2","data-testid":`image-preview-${t}`,children:s.jsx(_b,{className:"w-4 h-4 text-muted-foreground"})}):s.jsxs("div",{className:"flex items-center justify-center gap-2","data-testid":`image-preview-${t}`,children:[s.jsxs("div",{id:`lightgallery-preview-${t}`,className:"flex items-center gap-1",children:[s.jsx("div",{className:"flex flex-col items-center gap-1",children:s.jsxs("a",{href:e[0].url,"data-src":e[0].url,"data-sub-html":e[0].caption,"data-video":e[0].type==="video"?JSON.stringify({source:[{src:e[0].url,type:"video/mp4"}],attributes:{preload:!1,controls:!0}}):void 0,"data-poster":e[0].type==="video"?e[0].thumbnail:void 0,className:"relative inline-block rounded overflow-hidden hover:scale-105 transition-transform cursor-pointer","data-testid":`media-preview-${t}-0`,title:e[0].caption||(e[0].type==="video"?"Video":"Image"),onClick:l=>{o||(l.preventDefault(),window.open(e[0].url,"_blank"))},children:[e[0].type==="video"?s.jsxs("div",{className:"w-10 h-8 bg-gray-800 border border-border rounded flex items-center justify-center",children:[s.jsx(Lo,{className:"w-4 h-4 text-white"}),e[0].thumbnail&&s.jsx("img",{src:e[0].thumbnail,alt:e[0].caption||"Video thumbnail",className:"absolute inset-0 w-full h-full object-cover rounded"})]}):s.jsx("img",{src:e[0].url,alt:e[0].caption||"Image preview",className:"w-10 h-8 object-cover border border-border",onError:l=>{const c=l.target;c.style.display="none",console.warn("Failed to load image:",e[0].url)}}),e.length>1&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-primary text-primary-foreground text-sm rounded-full w-5 h-5 flex items-center justify-center",children:e.length})]})}),e.slice(1).map((l,c)=>s.jsx("a",{href:l.url,"data-src":l.url,"data-sub-html":l.caption,"data-video":l.type==="video"?JSON.stringify({source:[{src:l.url,type:"video/mp4"}],attributes:{preload:!1,controls:!0}}):void 0,"data-poster":l.type==="video"?l.thumbnail:void 0,style:{display:"none"},"data-testid":`image-hidden-${t}-${c+1}`,children:s.jsx("img",{src:l.url,alt:l.caption||`Hidden media ${c+2}`})},c+1))]}),n&&s.jsx(O,{size:"sm",variant:"ghost",className:"text-xs text-primary hover:text-primary/80",onClick:()=>r(),"data-testid":`button-edit-images-${t}`,title:"Edit images",children:s.jsx(ka,{className:"w-4 h-4"})})]})}const ze=Sd,Ji=Ed,Ij=Rd,Tj=oi,Ip=h.forwardRef(({className:e,...t},r)=>s.jsx(ri,{ref:r,className:X("fixed inset-0 z-50 bg-black/40 dark:bg-black/85 backdrop-blur-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 transition-all duration-300 ease-out",e),...t}));Ip.displayName=ri.displayName;const Me=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Ij,{children:[s.jsx(Ip,{}),s.jsx(si,{ref:n,className:X("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border-2 border-border bg-card backdrop-blur-lg p-6 shadow-2xl duration-300 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-[2rem] transition-all ease-out",e),...r,children:t})]}));Me.displayName=si.displayName;const _e=({className:e,...t})=>s.jsx("div",{className:X("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});_e.displayName="DialogHeader";const Ye=({className:e,...t})=>s.jsx("div",{className:X("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ye.displayName="DialogFooter";const Fe=h.forwardRef(({className:e,...t},r)=>s.jsx(ni,{ref:r,className:X("text-lg font-semibold leading-none tracking-tight",e),...t}));Fe.displayName=ni.displayName;const He=h.forwardRef(({className:e,...t},r)=>s.jsx(ai,{ref:r,className:X("text-sm text-muted-foreground",e),...t}));He.displayName=ai.displayName;const Oj=wa("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Tp=h.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:X(Oj({variant:t}),e),...r}));Tp.displayName="Alert";const Lj=h.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:X("mb-1 font-medium leading-none tracking-tight",e),...t}));Lj.displayName="AlertTitle";const Op=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:X("text-sm [&_p]:leading-relaxed",e),...t}));Op.displayName="AlertDescription";var Mj="Label",Lp=h.forwardRef((e,t)=>s.jsx(Xe.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Lp.displayName=Mj;var Mp=Lp;const _j=wa("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ye=h.forwardRef(({className:e,...t},r)=>s.jsx(Mp,{ref:r,className:X(_j(),e),...t}));ye.displayName=Mp.displayName;var _p={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Vc=Ce.createContext&&Ce.createContext(_p),Fj=["attr","size","title"];function zj(e,t){if(e==null)return{};var r=$j(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $j(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function aa(){return aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aa.apply(this,arguments)}function qc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qc(Object(r),!0).forEach(function(n){Bj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bj(e,t,r){return t=Uj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uj(e){var t=Gj(e,"string");return typeof t=="symbol"?t:t+""}function Gj(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fp(e){return e&&e.map((t,r)=>Ce.createElement(t.tag,oa({key:r},t.attr),Fp(t.child)))}function zp(e){return t=>Ce.createElement(Vj,aa({attr:oa({},e.attr)},t),Fp(e.child))}function Vj(e){var t=r=>{var{attr:n,size:a,title:o}=e,i=zj(e,Fj),l=a||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),Ce.createElement("svg",aa({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,i,{className:c,style:oa(oa({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&Ce.createElement("title",null,o),e.children)};return Vc!==void 0?Ce.createElement(Vc.Consumer,null,r=>t(r)):t(_p)}function po(e){return zp({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19.527 4.799c1.212 2.608.937 5.678-.405 8.173-1.101 2.047-2.744 3.74-4.098 5.614-.619.858-1.244 1.75-1.669 2.727-.141.325-.263.658-.383.992-.121.333-.224.673-.34 1.008-.109.314-.236.684-.627.687h-.007c-.466-.001-.579-.53-.695-.887-.284-.874-.581-1.713-1.019-2.525-.51-.944-1.145-1.817-1.79-2.671L19.527 4.799zM8.545 7.705l-3.959 4.707c.724 1.54 1.821 2.863 2.871 4.18.247.31.494.622.737.936l4.984-5.925-.029.01c-1.741.601-3.691-.291-4.392-1.987a3.377 3.377 0 0 1-.209-.716c-.063-.437-.077-.761-.004-1.198l.001-.007zM5.492 3.149l-.003.004c-1.947 2.466-2.281 5.88-1.117 8.77l4.785-5.689-.058-.05-3.607-3.035zM14.661.436l-3.838 4.563a.295.295 0 0 1 .027-.01c1.6-.551 3.403.15 4.22 1.626.176.319.323.683.377 1.045.068.446.085.773.012 1.22l-.003.016 3.836-4.561A8.382 8.382 0 0 0 14.67.439l-.009-.003zM9.466 5.868L14.162.285l-.047-.012A8.31 8.31 0 0 0 11.986 0a8.439 8.439 0 0 0-6.169 2.766l-.016.018 3.665 3.084z"},child:[]}]})(e)}function ho(e){return zp({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.218 0C9.915 0 6.835 1.49 4.723 4.148c-1.515 1.913-2.31 4.272-2.31 6.706v1.739c0 .894-.62 1.738-1.862 1.813-.298.025-.547.224-.547.522-.05.82.82 2.31 2.012 3.502.82.844 1.788 1.515 2.832 2.036a3 3 0 0 0 2.955 3.528 2.966 2.966 0 0 0 2.931-2.385h2.509c.323 1.689 2.086 2.856 3.974 2.21 1.64-.546 2.36-2.409 1.763-3.924a12.84 12.84 0 0 0 1.838-1.465 10.73 10.73 0 0 0 3.18-7.65c0-2.882-1.118-5.589-3.155-7.625A10.899 10.899 0 0 0 13.218 0zm0 1.217c2.558 0 4.967.994 6.78 2.807a9.525 9.525 0 0 1 2.807 6.78A9.526 9.526 0 0 1 20 17.585a9.647 9.647 0 0 1-6.78 2.807h-2.46a3.008 3.008 0 0 0-2.93-2.41 3.03 3.03 0 0 0-2.534 1.367v.024a8.945 8.945 0 0 1-2.41-1.788c-.844-.844-1.316-1.614-1.515-2.11a2.858 2.858 0 0 0 1.441-.846 2.959 2.959 0 0 0 .795-2.036v-1.789c0-2.11.696-4.197 2.012-5.861 1.863-2.385 4.62-3.726 7.6-3.726zm-2.41 5.986a1.192 1.192 0 0 0-1.191 1.192 1.192 1.192 0 0 0 1.192 1.193A1.192 1.192 0 0 0 12 8.395a1.192 1.192 0 0 0-1.192-1.192zm7.204 0a1.192 1.192 0 0 0-1.192 1.192 1.192 1.192 0 0 0 1.192 1.193 1.192 1.192 0 0 0 1.192-1.193 1.192 1.192 0 0 0-1.192-1.192zm-7.377 4.769a.596.596 0 0 0-.546.845 4.813 4.813 0 0 0 4.346 2.757 4.77 4.77 0 0 0 4.347-2.757.596.596 0 0 0-.547-.845h-.025a.561.561 0 0 0-.521.348 3.59 3.59 0 0 1-3.254 2.061 3.591 3.591 0 0 1-3.254-2.061.64.64 0 0 0-.546-.348z"},child:[]}]})(e)}var Zi="Checkbox",[qj,SC]=er(Zi),[Wj,Hj]=qj(Zi),$p=h.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:p,...u}=e,[m,f]=h.useState(null),b=ut(t,k=>f(k)),x=h.useRef(!1),g=m?p||!!m.closest("form"):!0,[v=!1,y]=Ms({prop:a,defaultProp:o,onChange:d}),w=h.useRef(v);return h.useEffect(()=>{const k=m==null?void 0:m.form;if(k){const C=()=>y(w.current);return k.addEventListener("reset",C),()=>k.removeEventListener("reset",C)}},[m,y]),s.jsxs(Wj,{scope:r,state:v,disabled:l,children:[s.jsx(Xe.button,{type:"button",role:"checkbox","aria-checked":Ar(v)?"mixed":v,"aria-required":i,"data-state":Gp(v),"data-disabled":l?"":void 0,disabled:l,value:c,...u,ref:b,onKeyDown:Pe(e.onKeyDown,k=>{k.key==="Enter"&&k.preventDefault()}),onClick:Pe(e.onClick,k=>{y(C=>Ar(C)?!0:!C),g&&(x.current=k.isPropagationStopped(),x.current||k.stopPropagation())})}),g&&s.jsx(Kj,{control:m,bubbles:!x.current,name:n,value:c,checked:v,required:i,disabled:l,form:p,style:{transform:"translateX(-100%)"},defaultChecked:Ar(o)?!1:o})]})});$p.displayName=Zi;var Bp="CheckboxIndicator",Up=h.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,o=Hj(Bp,r);return s.jsx(Wt,{present:n||Ar(o.state)||o.state===!0,children:s.jsx(Xe.span,{"data-state":Gp(o.state),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});Up.displayName=Bp;var Kj=e=>{const{control:t,checked:r,bubbles:n=!0,defaultChecked:a,...o}=e,i=h.useRef(null),l=ii(r),c=li(t);h.useEffect(()=>{const p=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(l!==r&&f){const b=new Event("click",{bubbles:n});p.indeterminate=Ar(r),f.call(p,Ar(r)?!1:r),p.dispatchEvent(b)}},[l,r,n]);const d=h.useRef(Ar(r)?!1:r);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??d.current,...o,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ar(e){return e==="indeterminate"}function Gp(e){return Ar(e)?"indeterminate":e?"checked":"unchecked"}var Vp=$p,Qj=Up;const Rr=h.forwardRef(({className:e,...t},r)=>s.jsx(Vp,{ref:r,className:X("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(Qj,{className:X("flex items-center justify-center text-current"),children:s.jsx(Ir,{className:"h-4 w-4"})})}));Rr.displayName=Vp.displayName;var el="Popover",[qp,EC]=er(el,[ha]),Dn=ha(),[Yj,Lr]=qp(el),Wp=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:o,modal:i=!1}=e,l=Dn(t),c=h.useRef(null),[d,p]=h.useState(!1),[u=!1,m]=Ms({prop:n,defaultProp:a,onChange:o});return s.jsx(A0,{...l,children:s.jsx(Yj,{scope:t,contentId:Dd(),triggerRef:c,open:u,onOpenChange:m,onOpenToggle:h.useCallback(()=>m(f=>!f),[m]),hasCustomAnchor:d,onCustomAnchorAdd:h.useCallback(()=>p(!0),[]),onCustomAnchorRemove:h.useCallback(()=>p(!1),[]),modal:i,children:r})})};Wp.displayName=el;var Hp="PopoverAnchor",Xj=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Lr(Hp,r),o=Dn(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=a;return h.useEffect(()=>(i(),()=>l()),[i,l]),s.jsx(ti,{...o,...n,ref:t})});Xj.displayName=Hp;var Kp="PopoverTrigger",Qp=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Lr(Kp,r),o=Dn(r),i=ut(t,a.triggerRef),l=s.jsx(Xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":eh(a.open),...n,ref:i,onClick:Pe(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(ti,{asChild:!0,...o,children:l})});Qp.displayName=Kp;var tl="PopoverPortal",[Jj,Zj]=qp(tl,{forceMount:void 0}),Yp=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,o=Lr(tl,t);return s.jsx(Jj,{scope:t,forceMount:r,children:s.jsx(Wt,{present:r||o.open,children:s.jsx(pd,{asChild:!0,container:a,children:n})})})};Yp.displayName=tl;var Ts="PopoverContent",Xp=h.forwardRef((e,t)=>{const r=Zj(Ts,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,o=Lr(Ts,e.__scopePopover);return s.jsx(Wt,{present:n||o.open,children:o.modal?s.jsx(tN,{...a,ref:t}):s.jsx(rN,{...a,ref:t})})});Xp.displayName=Ts;var eN=I0("PopoverContent.RemoveScroll"),tN=h.forwardRef((e,t)=>{const r=Lr(Ts,e.__scopePopover),n=h.useRef(null),a=ut(t,n),o=h.useRef(!1);return h.useEffect(()=>{const i=n.current;if(i)return E0(i)},[]),s.jsx(R0,{as:eN,allowPinchZoom:!0,children:s.jsx(Jp,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pe(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Pe(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Pe(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),rN=h.forwardRef((e,t)=>{const r=Lr(Ts,e.__scopePopover),n=h.useRef(!1),a=h.useRef(!1);return s.jsx(Jp,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=r.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),Jp=h.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:p,...u}=e,m=Lr(Ts,r),f=Dn(r);return D0(),s.jsx(P0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:s.jsx(fd,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:p,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:s.jsx(gd,{"data-state":eh(m.open),role:"dialog",id:m.contentId,...f,...u,ref:t,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Zp="PopoverClose",sN=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Lr(Zp,r);return s.jsx(Xe.button,{type:"button",...n,ref:t,onClick:Pe(e.onClick,()=>a.onOpenChange(!1))})});sN.displayName=Zp;var nN="PopoverArrow",aN=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Dn(r);return s.jsx(bd,{...a,...n,ref:t})});aN.displayName=nN;function eh(e){return e?"open":"closed"}var oN=Wp,iN=Qp,lN=Yp,th=Xp;const Qo=oN,Yo=iN,ia=h.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(lN,{children:s.jsx(th,{ref:a,align:t,sideOffset:r,className:X("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...n})}));ia.displayName=th.displayName;delete ba.Icon.Default.prototype._getIconUrl;ba.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Wc=e=>{if(!e)return"black";const t=e.toLowerCase().trim();return t.includes("kl 7")||t.includes("kl7")?"blue":t.includes("kl 6")||t.includes("kl6")?"green":t.includes("kl 4")||t.includes("kl4")?"red":t.includes("kl 3")||t.includes("kl3")?"orange":t.includes("kl 1")||t.includes("kl1")?"violet":t.includes("kl 5")||t.includes("kl5")?"yellow":t.includes("kl 9")||t.includes("kl9")?"grey":t.includes("sl 1")||t.includes("sl1")?"gold":t.includes("sl 2")||t.includes("sl2")?"blue":t.includes("sl 3")||t.includes("sl3")||t.includes("set 1")||t.includes("set1")?"grey":t.includes("set 2")||t.includes("set2")?"red":t.includes("set 3")||t.includes("set3")?"orange":(t.includes("warehouse"),"black")},ds=new Map,cN=(e,t=!1)=>{const r=`custom-${e}-${t}`;if(!ds.has(r)){const n=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 36" width="24" height="36">
        <path fill="${e}" stroke="#000" stroke-width="1" d="M12 0C7.6 0 4 3.6 4 8c0 5.4 8 16 8 16s8-10.6 8-16c0-4.4-3.6-8-8-8zm0 12c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4z"/>
      </svg>
    `,a="data:image/svg+xml;base64,"+btoa(n);ds.set(r,new ba.Icon({iconUrl:a,shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[12,18],iconAnchor:[6,18],popupAnchor:[0,-16],shadowSize:[15,15],className:t?"current-location-marker":""}))}return ds.get(r)},dN=(e,t=!1)=>{const r=`${e}-${t}`;return ds.has(r)||ds.set(r,new ba.Icon({iconUrl:`https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${e}.png`,shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[12,20],iconAnchor:[6,20],popupAnchor:[0,-18],shadowSize:[15,15],className:t?"current-location-marker":""})),ds.get(r)};function uN({center:e,zoom:t}){const r=Gd();return h.useEffect(()=>{if(!(!r||!r.getContainer()))try{r.setView(e,t,{animate:!1}),r.invalidateSize({animate:!1})}catch{}},[r,e,t]),null}function mN({currentLocation:e}){const t=Gd(),r=h.useCallback(()=>{e&&t&&t.setView([e.latitude,e.longitude],15,{animate:!1})},[e,t]);return e?s.jsx("div",{className:"absolute top-4 right-4 z-[1000]",children:s.jsx(O,{variant:"outline",size:"sm",onClick:r,className:"bg-white/95 hover:bg-white shadow-lg border-2 border-blue-500 hover:border-blue-600 backdrop-blur-sm","data-testid":"button-back-to-current",title:"Back to current location",children:s.jsx(Hb,{className:"w-4 h-4 text-blue-500"})})}):null}const pN=h.memo(function({locations:t,height:r="500px",showFullscreenButton:n=!0}){const[a,o]=h.useState(!1),[i,l]=h.useState([]),c=h.useMemo(()=>t.map(b=>b.code).filter(b=>!!b).filter((b,x,g)=>g.indexOf(b)===x).sort(),[t]);h.useEffect(()=>{c.length>0&&i.length===0&&l(c)},[c]);const d=f=>{l(b=>b.includes(f)?b.filter(x=>x!==f):[...b,f])},p=()=>{l(c)},u=()=>{l([])},m=({isFullscreen:f=!1})=>{const b=h.useMemo(()=>f?t.filter(y=>!y.code||i.includes(y.code)):t.filter(y=>y.isCurrent).length?t.filter(y=>y.isCurrent):[t[0]],[f,i,t]),x=h.useMemo(()=>t.find(y=>y.isCurrent),[t]),g=h.useMemo(()=>{if(b.length===0)return[3.139003,101.686855];const y=b.find(w=>w.isCurrent);return y?[y.latitude,y.longitude]:[b[0].latitude,b[0].longitude]},[b]),v=13;return s.jsxs($0,{center:g,zoom:v,style:{height:f?"100%":r,width:"100%"},className:"rounded-lg border border-border",preferCanvas:!0,zoomControl:f,children:[s.jsx(B0,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",updateWhenIdle:!0,updateWhenZooming:!1,keepBuffer:2}),s.jsx(uN,{center:g,zoom:v}),f&&s.jsx(mN,{currentLocation:x}),b.map((y,w)=>{const k=y.markerColor||Wc(y.code),C=y.markerColor&&y.markerColor.startsWith("#")?cN(y.markerColor,y.isCurrent):dN(k,y.isCurrent);return s.jsx(U0,{position:[y.latitude,y.longitude],icon:C,children:s.jsx(G0,{children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold",children:y.label}),y.code&&s.jsxs("div",{className:"text-sm font-medium",style:{color:k==="black"?"#000":k},children:["Route: ",y.code]}),s.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[y.latitude.toFixed(6),", ",y.longitude.toFixed(6)]})]})})},`${y.latitude}-${y.longitude}-${w}`)})]})};return t.length===0?s.jsx("div",{style:{height:r},className:"flex items-center justify-center bg-muted rounded-lg border border-border",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"No location data available"})}):s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"pointer-events-auto",children:s.jsx(m,{})}),n&&s.jsx("div",{className:"absolute top-2 right-2 z-[1001] pointer-events-auto",children:s.jsxs(ze,{open:a,onOpenChange:o,children:[s.jsx(Ji,{asChild:!0,children:s.jsx(O,{variant:"outline",size:"sm",className:"bg-white/95 hover:bg-white shadow-lg border-2 border-gray-400 backdrop-blur-sm pointer-events-auto","data-testid":"button-fullscreen-map",children:s.jsx(qb,{className:"w-4 h-4 text-black"})})}),s.jsxs(Me,{className:"max-w-[95vw] w-full p-6",style:{height:"min(90vh, calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 40px))",touchAction:"pan-y"},children:[s.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0",style:{paddingTop:"max(0rem, env(safe-area-inset-top))"},children:[s.jsxs(Fe,{className:"tracking-tight font-semibold text-[12px]",children:["Map View - ",t.length===1?t[0].label:`${t.length} Locations`]}),s.jsx(He,{className:"sr-only",children:"Interactive map showing delivery locations with route filters"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Qo,{children:[s.jsx(Yo,{asChild:!0,children:s.jsxs(O,{variant:"outline",size:"sm","data-testid":"button-filter-routes",children:[s.jsx(rn,{className:"w-4 h-4 mr-2"}),"Filter Routes (",i.length,"/",c.length,")"]})}),s.jsx(ia,{className:"w-80",align:"end",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-semibold text-sm",children:"Select Routes"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(O,{variant:"ghost",size:"sm",onClick:p,className:"h-7 text-xs",children:"All"}),s.jsx(O,{variant:"ghost",size:"sm",onClick:u,className:"h-7 text-xs",children:"Clear"})]})]}),s.jsx("div",{className:"max-h-[300px] overflow-y-auto space-y-2",children:c.map(f=>{const b=Wc(f);return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Rr,{id:`route-${f}`,checked:i.includes(f),onCheckedChange:()=>d(f)}),s.jsxs(ye,{htmlFor:`route-${f}`,className:"flex items-center gap-2 cursor-pointer flex-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:b==="black"?"#000":b}}),s.jsx("span",{className:"text-sm",children:f})]})]},f)})})]})})]}),s.jsx(Tj,{asChild:!0,children:s.jsx(O,{variant:"outline",size:"sm",className:"pagination-button text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300","data-testid":"button-close-map",children:s.jsx(kt,{className:"w-4 h-4"})})})]})]}),s.jsx("div",{className:"mt-4",style:{height:"min(calc(90vh - 100px), calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 140px))",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},children:s.jsx(m,{isFullscreen:!0})})]})]})})]})},(e,t)=>{if(e.locations.length!==t.locations.length||e.height!==t.height||e.showFullscreenButton!==t.showFullscreenButton)return!1;for(let r=0;r<e.locations.length;r++){const n=e.locations[r],a=t.locations[r];if(n.latitude!==a.latitude||n.longitude!==a.longitude||n.label!==a.label||n.code!==a.code||n.isCurrent!==a.isCurrent||n.markerColor!==a.markerColor)return!1}return!0});function Hc({value:e,onSave:t,isEditable:r=!0}){const[n,a]=h.useState(!1),[o,i]=h.useState(e);h.useEffect(()=>{i(e)},[e]);const l=u=>{i(u),t(u)},c=e||"No information available",d=c.length>50,p=d&&!n?c.substring(0,50)+"...":c;return r?s.jsx("div",{className:"space-y-2",children:s.jsx(Ae,{value:o,onChange:u=>l(u.target.value),style:{fontSize:"10px"},placeholder:"Enter information...","data-testid":"input-sliding-description"})}):s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[d&&s.jsx(O,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 flex-shrink-0 mt-0.5",onClick:()=>a(!n),"data-testid":"button-toggle-description",children:n?s.jsx(Cn,{className:"w-3 h-3"}):s.jsx(Kn,{className:"w-3 h-3"})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("div",{className:"flex-1 cursor-pointer transition-all duration-300 ease-in-out opacity-90",onClick:()=>a(!n),children:(()=>{const u=(n?c:p).split(`
`).map(m=>m.trim()).filter(m=>m.length>0);return u.length>1?s.jsx("dl",{className:"space-y-2",style:{fontSize:"10px"},children:u.map((m,f)=>s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("dt",{className:"w-20 flex-shrink-0 font-semibold text-blue-600 dark:text-blue-400",children:["Item ",f+1]}),s.jsx("dd",{className:"flex-1 text-gray-700 dark:text-gray-300 m-0",children:m})]},f))}):s.jsx("div",{className:"whitespace-pre-wrap break-words text-gray-700 dark:text-gray-300",style:{fontSize:"10px"},children:n?c:p})})()})})]}),s.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${n?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:d&&n&&s.jsx("div",{className:"pl-8 text-muted-foreground",style:{fontSize:"10px"},children:"Click to collapse"})})]})}function hN({value:e,onSave:t,isEditable:r=!0}){const n=x=>x.trim()?x.split(`
`).map(g=>g.trim()).filter(g=>g.length>0).map((g,v)=>{if(g.includes(" : ")){const[y,...w]=g.split(" : ");return{term:y.trim()||`Item ${v+1}`,definition:w.join(" : ").trim()}}return{term:`Item ${v+1}`,definition:g}}):[],[a,o]=h.useState(n(e)),[i,l]=h.useState(e);h.useEffect(()=>{if(e!==i){const x=a.map(y=>y.definition).join(`
`),g=n(e),v=g.map(y=>y.definition).join(`
`);x!==v&&(o(g),l(e))}},[e,i,a]);const c=x=>x.filter(g=>g.definition.trim()||g.term.trim()).map(g=>g.term.trim()&&g.definition.trim()?`${g.term.trim()} : ${g.definition.trim()}`:g.definition.trim()).join(`
`),d=()=>{const x=[...a,{term:`Item ${a.length+1}`,definition:""}];o(x);const g=c(x);t(g)},p=x=>{const g=a.filter((y,w)=>w!==x);o(g);const v=c(g);t(v)},u=(x,g)=>{const v=[...a];v[x].term=g,o(v)},m=x=>{const g=c(a);t(g)},f=(x,g)=>{const v=[...a];v[x].definition=g,o(v)},b=x=>{const g=c(a);t(g)};if(!r){const x=n(e);return s.jsx("div",{className:"space-y-2",children:x.length>0?s.jsx("dl",{className:"space-y-2",style:{fontSize:"10px"},children:x.map((g,v)=>s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("dt",{className:"w-20 flex-shrink-0 font-semibold text-blue-600 dark:text-blue-400",children:g.term}),s.jsx("dd",{className:"flex-1 text-gray-700 dark:text-gray-300 m-0",children:g.definition})]},v))}):s.jsx("p",{className:"text-muted-foreground",style:{fontSize:"10px"},children:"No information available"})})}return s.jsxs("div",{className:"space-y-3",children:[a.length>0?s.jsx("div",{className:"space-y-2",children:a.map((x,g)=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ae,{value:x.term,onChange:v=>u(g,v.target.value),onBlur:()=>m(),className:"w-24",style:{fontSize:"10px"},placeholder:"Term","data-testid":`input-item-term-${g}`}),s.jsx(Ae,{value:x.definition,onChange:v=>f(g,v.target.value),onBlur:()=>b(),className:"flex-1",style:{fontSize:"10px"},placeholder:"Definition","data-testid":`input-item-definition-${g}`}),s.jsx(O,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 bg-transparent border-transparent hover:bg-transparent hover:border-transparent text-red-600 hover:text-red-700",onClick:()=>p(g),"data-testid":`button-remove-item-${g}`,children:s.jsx(ls,{className:"w-3 h-3"})})]},g))}):s.jsx("p",{className:"text-muted-foreground",style:{fontSize:"10px"},children:'No items yet. Click "Add Item" to start.'}),s.jsxs(O,{variant:"outline",size:"sm",onClick:d,className:"bg-transparent border-transparent hover:bg-transparent hover:border-transparent text-blue-600 hover:text-blue-700",style:{fontSize:"10px"},"data-testid":"button-add-item",children:[s.jsx(Tr,{className:"w-3 h-3 mr-1"}),"Add Item"]})]})}class De{constructor(t,r,n,a,o){this._legacyCanvasSize=De.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),n&&typeof n=="object"?this._onDecode=r:(console.warn(n||a||o?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=r),r=typeof n=="object"?n:{},this._onDecodeError=r.onDecodeError||(typeof n=="function"?n:this._onDecodeError),this._calculateScanRegion=r.calculateScanRegion||(typeof a=="function"?a:this._calculateScanRegion),this._preferredCamera=r.preferredCamera||o||this._preferredCamera,this._legacyCanvasSize=typeof n=="number"?n:typeof a=="number"?a:this._legacyCanvasSize,this._maxScansPerSecond=r.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;let i=!1;if(t.hidden&&(t.hidden=!1,i=!0),document.body.contains(t)||(document.body.appendChild(t),i=!0),n=t.parentElement,r.highlightScanRegion||r.highlightCodeOutline){if(a=!!r.overlay,this.$overlay=r.overlay||document.createElement("div"),o=this.$overlay.style,o.position="absolute",o.display="none",o.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!a&&r.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}n.insertBefore(this.$overlay,this.$video.nextSibling)}r.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{let l=window.getComputedStyle(t);l.display==="none"&&(t.style.setProperty("display","block","important"),i=!0),l.visibility!=="visible"&&(t.style.setProperty("visibility","visible","important"),i=!0),i&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=De.createQrEngine()}static set WORKER_PATH(t){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await De.listCameras(!1)).length}catch{return!1}}static async listCameras(t=!1){if(!navigator.mediaDevices)return[];let r=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(a=>a.kind==="videoinput"),n;try{t&&(await r()).every(a=>!a.label)&&(n=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await r()).map((a,o)=>({id:a.deviceId,label:a.label||(o===0?"Default Camera":`Camera ${o+1}`)}))}finally{n&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),De._stopVideoStream(n))}}async hasFlash(){let t;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;t=this.$video.srcObject}else t=(await this._getCameraStream()).stream;return"torch"in t.getVideoTracks()[0].getSettings()}catch{return!1}finally{t&&t!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),De._stopVideoStream(t))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(t){throw this._flashOn=!1,t}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),De._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:t,facingMode:r}=await this._getCameraStream();!this._active||this._paused?De._stopVideoStream(t):(this._setVideoMirror(r),this.$video.srcObject=t,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(t){if(!this._paused)throw this._active=!1,t}}stop(){this.pause(),this._active=!1}async pause(t=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let r=()=>{this.$video.srcObject instanceof MediaStream&&(De._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return t?(r(),!0):(await new Promise(n=>setTimeout(n,300)),this._paused?(r(),!0):!1)}async setCamera(t){t!==this._preferredCamera&&(this._preferredCamera=t,await this._restartVideoStream())}static async scanImage(t,r,n,a,o=!1,i=!1){let l,c=!1;r&&("scanRegion"in r||"qrEngine"in r||"canvas"in r||"disallowCanvasResizing"in r||"alsoTryWithoutScanRegion"in r||"returnDetailedScanResult"in r)?(l=r.scanRegion,n=r.qrEngine,a=r.canvas,o=r.disallowCanvasResizing||!1,i=r.alsoTryWithoutScanRegion||!1,c=!0):console.warn(r||n||a||o||i?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),r=!!n;try{let d,p;[n,d]=await Promise.all([n||De.createQrEngine(),De._loadImage(t)]),[a,p]=De._drawToCanvas(d,l,a,o);let u;if(n instanceof Worker){let m=n;r||De._postWorkerMessageSync(m,"inversionMode","both"),u=await new Promise((f,b)=>{let x,g,v,y=-1;g=k=>{k.data.id===y&&(m.removeEventListener("message",g),m.removeEventListener("error",v),clearTimeout(x),k.data.data!==null?f({data:k.data.data,cornerPoints:De._convertPoints(k.data.cornerPoints,l)}):b(De.NO_QR_CODE_FOUND))},v=k=>{m.removeEventListener("message",g),m.removeEventListener("error",v),clearTimeout(x),b("Scanner error: "+(k?k.message||k:"Unknown Error"))},m.addEventListener("message",g),m.addEventListener("error",v),x=setTimeout(()=>v("timeout"),1e4);let w=p.getImageData(0,0,a.width,a.height);y=De._postWorkerMessageSync(m,"decode",w,[w.data.buffer])})}else u=await Promise.race([new Promise((m,f)=>window.setTimeout(()=>f("Scanner error: timeout"),1e4)),(async()=>{try{var[m]=await n.detect(a);if(!m)throw De.NO_QR_CODE_FOUND;return{data:m.rawValue,cornerPoints:De._convertPoints(m.cornerPoints,l)}}catch(f){if(m=f.message||f,/not implemented|service unavailable/.test(m))return De._disableBarcodeDetector=!0,De.scanImage(t,{scanRegion:l,canvas:a,disallowCanvasResizing:o,alsoTryWithoutScanRegion:i});throw`Scanner error: ${m}`}})()]);return c?u:u.data}catch(d){if(!l||!i)throw d;let p=await De.scanImage(t,{qrEngine:n,canvas:a,disallowCanvasResizing:o});return c?p:p.data}finally{r||De._postWorkerMessage(n,"close")}}setGrayscaleWeights(t,r,n,a=!0){De._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:r,blue:n,useIntegerApproximation:a})}setInversionMode(t){De._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}static async createQrEngine(t){if(t&&console.warn("Specifying a worker path is not required and not supported anymore."),t=()=>St(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[]).then(n=>n.createWorker()),!(!De._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return t();let r=navigator.userAgentData;return r&&r.brands.some(({brand:n})=>/Chromium/i.test(n))&&/mac ?OS/i.test(r.platform)&&await r.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:n,platformVersion:a})=>/arm/i.test(n||"arm")&&13<=parseInt(a||"13")).catch(()=>!0)?t():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(t){let r=Math.round(.6666666666666666*Math.min(t.videoWidth,t.videoHeight));return{x:Math.round((t.videoWidth-r)/2),y:Math.round((t.videoHeight-r)/2),width:r,height:r,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var t=this.$video,r=t.videoWidth,n=t.videoHeight,a=t.offsetWidth,o=t.offsetHeight,i=t.offsetLeft,l=t.offsetTop,c=window.getComputedStyle(t),d=c.objectFit,p=r/n,u=a/o;switch(d){case"none":var m=r,f=n;break;case"fill":m=a,f=o;break;default:(d==="cover"?p>u:p<u)?(f=o,m=f*p):(m=a,f=m/p),d==="scale-down"&&(m=Math.min(m,r),f=Math.min(f,n))}var[b,x]=c.objectPosition.split(" ").map((v,y)=>{const w=parseFloat(v);return v.endsWith("%")?(y?o-f:a-m)*w/100:w});c=this._scanRegion.width||r,u=this._scanRegion.height||n,d=this._scanRegion.x||0;var g=this._scanRegion.y||0;p=this.$overlay.style,p.width=`${c/r*m}px`,p.height=`${u/n*f}px`,p.top=`${l+x+g/n*f}px`,n=/scaleX\(-1\)/.test(t.style.transform),p.left=`${i+(n?a-b-m:b)+(n?r-d-c:d)/r*m}px`,p.transform=t.style.transform}})}static _convertPoints(t,r){if(!r)return t;let n=r.x||0,a=r.y||0,o=r.width&&r.downScaledWidth?r.width/r.downScaledWidth:1;r=r.height&&r.downScaledHeight?r.height/r.downScaledHeight:1;for(let i of t)i.x=i.x*o+n,i.y=i.y*r+a;return t}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var t=Date.now()-this._lastScanTimestamp,r=1e3/this._maxScansPerSecond;t<r&&await new Promise(a=>setTimeout(a,r-t)),this._lastScanTimestamp=Date.now();try{var n=await De.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(a){if(!this._active)return;this._onDecodeError(a)}!De._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=De.createQrEngine()),n?(this._onDecode?this._onDecode(n):this._legacyOnDecode&&this._legacyOnDecode(n.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",n.cornerPoints.map(({x:a,y:o})=>`${a},${o}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(t){t!==De.NO_QR_CODE_FOUND&&console.log(t)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let t=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",r=[{width:{min:1024}},{width:{min:768}},{}],n=r.map(a=>Object.assign({},a,{[t]:{exact:this._preferredCamera}}));for(let a of[...n,...r])try{let o=await navigator.mediaDevices.getUserMedia({video:a,audio:!1}),i=this._getFacingMode(o)||(a.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:o,facingMode:i}}catch{}throw"Camera not found."}async _restartVideoStream(){let t=this._paused;await this.pause(!0)&&!t&&this._active&&await this.start()}static _stopVideoStream(t){for(let r of t.getTracks())r.stop(),t.removeTrack(r)}_setVideoMirror(t){this.$video.style.transform="scaleX("+(t==="user"?-1:1)+")"}_getFacingMode(t){return(t=t.getVideoTracks()[0])?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}static _drawToCanvas(t,r,n,a=!1){n=n||document.createElement("canvas");let o=r&&r.x?r.x:0,i=r&&r.y?r.y:0,l=r&&r.width?r.width:t.videoWidth||t.width,c=r&&r.height?r.height:t.videoHeight||t.height;return a||(a=r&&r.downScaledWidth?r.downScaledWidth:l,r=r&&r.downScaledHeight?r.downScaledHeight:c,n.width!==a&&(n.width=a),n.height!==r&&(n.height=r)),r=n.getContext("2d",{alpha:!1}),r.imageSmoothingEnabled=!1,r.drawImage(t,o,i,l,c,0,0,n.width,n.height),[n,r]}static async _loadImage(t){if(t instanceof Image)return await De._awaitImageLoad(t),t;if(t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof SVGImageElement||"OffscreenCanvas"in window&&t instanceof OffscreenCanvas||"ImageBitmap"in window&&t instanceof ImageBitmap)return t;if(t instanceof File||t instanceof Blob||t instanceof URL||typeof t=="string"){let r=new Image;r.src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t.toString();try{return await De._awaitImageLoad(r),r}finally{(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(r.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(t){t.complete&&t.naturalWidth!==0||await new Promise((r,n)=>{let a=o=>{t.removeEventListener("load",a),t.removeEventListener("error",a),o instanceof ErrorEvent?n("Image load error"):r()};t.addEventListener("load",a),t.addEventListener("error",a)})}static async _postWorkerMessage(t,r,n,a){return De._postWorkerMessageSync(await t,r,n,a)}static _postWorkerMessageSync(t,r,n,a){if(!(t instanceof Worker))return-1;let o=De._workerMessageId++;return t.postMessage({id:o,type:r,data:n},a),o}}De.DEFAULT_CANVAS_SIZE=400;De.NO_QR_CODE_FOUND="No QR code found";De._disableBarcodeDetector=!1;De._workerMessageId=0;function Kc({info:e,rowId:t,code:r,route:n,location:a,latitude:o,longitude:i,qrCode:l,no:c,markerColor:d,onUpdateRow:p,editMode:u=!1,allRows:m=[],iconType:f="info"}){const[b,x]=h.useState(!1),[g,v]=h.useState(!1),[y,w]=h.useState(""),[k,C]=h.useState(!1),[N,S]=h.useState(!1),[I,T]=h.useState(!1),[_,V]=h.useState("google"),[z,le]=h.useState(!1),[U,ce]=h.useState(""),[K,F]=h.useState(!1),[ae,J]=h.useState(!1),[ve,be]=h.useState(!1),[A,Ie]=h.useState({info:"",qrCode:"",latitude:"",longitude:"",markerColor:""}),[G,ee]=h.useState({info:"",qrCode:"",latitude:"",longitude:"",markerColor:""});h.useEffect(()=>{if(b){const M={info:e||"",qrCode:l||"",latitude:o||"",longitude:i||"",markerColor:d||"#3388ff"};Ie(M),ee(M)}},[b,e,l,o,i,d]);const xe=()=>G.info!==A.info||G.qrCode!==A.qrCode||G.latitude!==A.latitude||G.longitude!==A.longitude||G.markerColor!==A.markerColor,je=M=>M?(parseInt(M.replace(/\D/g,""),10)||0).toString().padStart(4,"0"):"0000",ue=()=>{S(!0)},Se=()=>{const se=`https://fmvending.web.app/refill-service/M${je(r)}`;window.open(se,"_blank"),S(!1)},he=()=>{V("google"),T(!0)},R=()=>{if(o&&i&&!isNaN(parseFloat(o))&&!isNaN(parseFloat(i))){const M=`https://www.google.com/maps/dir/?api=1&destination=${o},${i}`;window.open(M,"_blank")}T(!1)},L=()=>{V("waze"),T(!0)},q=()=>{if(o&&i&&!isNaN(parseFloat(o))&&!isNaN(parseFloat(i))){const M=`https://waze.com/ul?ll=${o},${i}&navigate=yes`;window.open(M,"_blank")}T(!1)},B=async()=>{if(l){C(!0);try{let M=l;if(l.startsWith("http")){const pe=`/api/proxy-image?url=${encodeURIComponent(l)}`,we=await fetch(pe);if(!we.ok)throw new Error(`Failed to load image: ${we.statusText}`);M=await we.blob()}const se=await De.scanImage(M,{returnDetailedScanResult:!0});w(se.data),v(!0)}catch(M){console.error("QR scanning error:",M),alert("Could not read QR code from the image. Please check if the image contains a valid QR code.")}finally{C(!1)}}},Z=()=>{if(y){let M=y;y.match(/^https?:\/\//)||(y.includes(".")&&!y.includes(" ")?M=`https://${y}`:M=`https://www.google.com/search?q=${encodeURIComponent(y)}`),window.open(M,"_blank")}v(!1),w("")},me=()=>{v(!1),w("")},qe=M=>{let se=M.trim();!se.startsWith("http://")&&!se.startsWith("https://")&&(se="https://"+se),ce(se),le(!0)},Re=()=>{U&&window.open(U,"_blank"),le(!1),ce("")},Ge=()=>{xe()&&F(!0)},ot=async()=>{F(!1),J(!0);try{if(xe()&&p){const M={};G.info!==A.info&&(M.info=G.info),G.qrCode!==A.qrCode&&(M.qrCode=G.qrCode||null),G.latitude!==A.latitude&&(M.latitude=G.latitude?parseFloat(G.latitude):null),G.longitude!==A.longitude&&(M.longitude=G.longitude?parseFloat(G.longitude):null),G.markerColor!==A.markerColor&&(M.markerColor=G.markerColor),await p(M),Ie(G),be(!0),setTimeout(()=>{be(!1)},3e3)}}finally{J(!1)}};return s.jsxs(ze,{open:b,onOpenChange:x,children:[s.jsx(Ji,{asChild:!0,children:s.jsx(O,{variant:"ghost",size:"sm",className:"h-auto p-1 bg-transparent border-transparent hover:bg-transparent hover:border-transparent text-blue-400 hover:text-blue-500 dark:text-blue-300 dark:hover:text-blue-400","data-testid":`button-info-${t}`,children:u?s.jsx(Wu,{className:"w-4 h-4"}):s.jsx(Mb,{className:"w-4 h-4"})})}),s.jsxs(Me,{className:"max-w-lg overflow-hidden flex flex-col bg-white/50 dark:bg-black/20 backdrop-blur-3xl border-2 border-white/30 dark:border-white/10 shadow-[0_25px_80px_0_rgba(0,0,0,0.3)] rounded-3xl transition-smooth data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-90 data-[state=open]:zoom-in-95 duration-300 ease-out",style:{maxHeight:"min(90vh, calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 40px))",touchAction:"pan-y"},children:[s.jsxs("div",{className:"absolute inset-0 -z-10 rounded-3xl overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/70 via-white/50 to-white/60 dark:from-black/50 dark:via-black/30 dark:to-black/40",style:{backdropFilter:"blur(60px) saturate(180%)",WebkitBackdropFilter:"blur(60px) saturate(180%)"}}),s.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/60 dark:via-white/30 to-transparent"}),s.jsx("div",{className:"absolute inset-y-0 left-0 w-px bg-gradient-to-b from-transparent via-white/40 dark:via-white/20 to-transparent"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-500/5 via-transparent to-cyan-500/5 dark:from-blue-400/10 dark:via-transparent dark:to-cyan-400/10"}),s.jsx("div",{className:"absolute inset-0 shadow-[inset_0_2px_4px_0_rgba(0,0,0,0.05)] dark:shadow-[inset_0_2px_4px_0_rgba(255,255,255,0.05)]"})]}),s.jsxs(_e,{className:"pb-3 border-b border-blue-900 dark:border-cyan-400/50 flex-shrink-0",style:{paddingTop:"max(1.5rem, env(safe-area-inset-top))"},children:[s.jsx(Fe,{className:"font-semibold text-center text-slate-900 dark:text-slate-400",style:{fontSize:"10px"},children:a||"Location"}),s.jsx("div",{className:"text-center text-muted-foreground pt-2",style:{fontSize:"10px"},children:r||""})]}),s.jsxs("div",{className:"py-6 space-y-6 overflow-y-auto flex-1",style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},children:[o&&i&&!isNaN(parseFloat(o))&&!isNaN(parseFloat(i))&&s.jsxs("div",{className:"relative bg-white/40 dark:bg-black/20 backdrop-blur-xl rounded-2xl p-5 space-y-3 shadow-lg border border-white/50 dark:border-white/10 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 -z-10 bg-gradient-to-br from-white/60 via-white/30 to-transparent dark:from-white/5 dark:via-transparent dark:to-transparent"}),s.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-green-400/40 to-transparent"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-400 dark:bg-green-300 rounded-full animate-pulse"}),s.jsx("h4",{className:"font-semibold text-green-500 dark:text-green-300",style:{fontSize:"10px"},children:" Location Map"})]}),s.jsx(pN,{locations:(()=>{const M={latitude:parseFloat(o),longitude:parseFloat(i),label:a||"Location",code:n||r,isCurrent:!0,markerColor:G.markerColor||d},se=m.filter(pe=>pe.latitude&&pe.longitude&&!isNaN(parseFloat(String(pe.latitude)))&&!isNaN(parseFloat(String(pe.longitude)))).map(pe=>({latitude:parseFloat(String(pe.latitude)),longitude:parseFloat(String(pe.longitude)),label:pe.location||"Location",code:pe.route||pe.code,isCurrent:pe.id===t,markerColor:pe.markerColor}));return se.length>1?se:[M]})(),height:"160px",showFullscreenButton:!0}),s.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200/50 dark:border-white/10",children:s.jsx(Hc,{value:(()=>{const M=G.info||"";return M?M.includes("|||DESCRIPTION|||")?M.split("|||DESCRIPTION|||")[0]||"":M:""})(),onSave:M=>{const se=G.info||"";let pe=M;if(se.includes("|||DESCRIPTION|||")){const we=se.split("|||DESCRIPTION|||")[1]||"";we.trim()&&(pe=`${M}|||DESCRIPTION|||${we}`)}ee(we=>({...we,info:pe}))},isEditable:u})})]}),s.jsxs("div",{className:"relative bg-white/40 dark:bg-black/20 backdrop-blur-xl rounded-2xl p-5 space-y-3 shadow-lg border border-white/50 dark:border-white/10 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 -z-10 bg-gradient-to-br from-white/60 via-white/30 to-transparent dark:from-white/5 dark:via-transparent dark:to-transparent"}),s.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-purple-400/40 to-transparent"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 dark:bg-purple-400 rounded-full"}),s.jsx("h4",{className:"font-semibold text-purple-600 dark:text-purple-400",style:{fontSize:"10px"},children:" Description"})]}),s.jsx(hN,{value:(()=>{const M=G.info||"";if(!M)return"";if(M.includes("|||DESCRIPTION|||")){const se=M.split("|||DESCRIPTION|||")[1]||"";return se.includes("|||URL|||")?se.split("|||URL|||")[0]||"":se}return""})(),onSave:M=>{const se=G.info||"";let pe="",we="";if(se.includes("|||DESCRIPTION|||")){pe=se.split("|||DESCRIPTION|||")[0]||"";const Ke=se.split("|||DESCRIPTION|||")[1]||"";Ke.includes("|||URL|||")&&(we=Ke.split("|||URL|||")[1]||"")}else se.includes("|||URL|||")?(pe=se.split("|||URL|||")[0]||"",we=se.split("|||URL|||")[1]||""):pe=se;let lt=pe.trim();M.trim()&&(lt+=`|||DESCRIPTION|||${M.trim()}`),we.trim()&&(M.trim()?lt+=`|||URL|||${we.trim()}`:lt+=`|||DESCRIPTION||||||URL|||${we.trim()}`),ee(Ke=>({...Ke,info:lt}))},isEditable:u})]}),u&&s.jsxs("div",{className:"relative bg-white/40 dark:bg-black/20 backdrop-blur-xl rounded-2xl p-5 space-y-3 shadow-lg border border-white/50 dark:border-white/10 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 -z-10 bg-gradient-to-br from-white/60 via-white/30 to-transparent dark:from-white/5 dark:via-transparent dark:to-transparent"}),s.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-cyan-400/40 to-transparent"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-cyan-500 dark:bg-cyan-400 rounded-full"}),s.jsx("h4",{className:"font-semibold text-cyan-600 dark:text-cyan-400",style:{fontSize:"10px"},children:" Website URL"})]}),s.jsx(Hc,{value:(()=>{const M=G.info||"";return M&&M.includes("|||URL|||")&&M.split("|||URL|||").pop()||""})(),onSave:M=>{const se=G.info||"";let pe="",we="";if(se.includes("|||DESCRIPTION|||")){pe=se.split("|||DESCRIPTION|||")[0]||"";const Ke=se.split("|||DESCRIPTION|||")[1]||"";Ke.includes("|||URL|||")?we=Ke.split("|||URL|||")[0]||"":we=Ke}else pe=se;let lt=pe;(we.trim()||M.trim())&&(lt+=`|||DESCRIPTION|||${we}`,M.trim()&&(lt+=`|||URL|||${M}`)),ee(Ke=>({...Ke,info:lt}))},isEditable:u})]}),u&&s.jsxs("div",{className:"relative bg-white/40 dark:bg-black/20 backdrop-blur-xl rounded-2xl p-5 space-y-3 shadow-lg border border-white/50 dark:border-white/10 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 -z-10 bg-gradient-to-br from-white/60 via-white/30 to-transparent dark:from-white/5 dark:via-transparent dark:to-transparent"}),s.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-purple-400/40 to-transparent"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 dark:bg-purple-400 rounded-full"}),s.jsxs("h4",{className:"font-semibold text-purple-600 dark:text-purple-400",style:{fontSize:"10px"},children:[s.jsx(ec,{className:"w-4 h-4 inline mr-1"}),"QR Code URL"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{value:G.qrCode,onChange:M=>ee(se=>({...se,qrCode:M.target.value})),placeholder:"Enter QR code image URL...",style:{fontSize:"10px"},"data-testid":"input-qr-code"}),s.jsx("p",{className:"text-muted-foreground",style:{fontSize:"10px"},children:"URL to the QR code image"})]})]}),u&&s.jsxs("div",{className:"relative bg-white/40 dark:bg-black/20 backdrop-blur-xl rounded-2xl p-5 space-y-3 shadow-lg border border-white/50 dark:border-white/10 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 -z-10 bg-gradient-to-br from-white/60 via-white/30 to-transparent dark:from-white/5 dark:via-transparent dark:to-transparent"}),s.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-green-400/40 to-transparent"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full"}),s.jsx("h4",{className:"font-semibold text-green-600 dark:text-green-400",style:{fontSize:"10px"},children:" Coordinates"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"latitude",style:{fontSize:"10px"},children:"Latitude"}),s.jsx(Ae,{id:"latitude",type:"number",step:"any",value:G.latitude,onChange:M=>ee(se=>({...se,latitude:M.target.value})),placeholder:"e.g., 3.1390",style:{fontSize:"10px"},"data-testid":"input-latitude"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"longitude",style:{fontSize:"10px"},children:"Longitude"}),s.jsx(Ae,{id:"longitude",type:"number",step:"any",value:G.longitude,onChange:M=>ee(se=>({...se,longitude:M.target.value})),placeholder:"e.g., 101.6869",style:{fontSize:"10px"},"data-testid":"input-longitude"})]})]}),s.jsx("p",{className:"text-muted-foreground",style:{fontSize:"10px"},children:"GPS coordinates for map location"}),s.jsxs("div",{className:"space-y-2 pt-3",children:[s.jsx(ye,{htmlFor:"markerColor",style:{fontSize:"10px"},children:" Marker Color"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ae,{id:"markerColor",type:"color",value:G.markerColor,onChange:M=>ee(se=>({...se,markerColor:M.target.value})),className:"w-20 h-10 cursor-pointer","data-testid":"input-marker-color"}),s.jsx(Ae,{type:"text",value:G.markerColor,onChange:M=>ee(se=>({...se,markerColor:M.target.value})),placeholder:"#3b82f6",className:"flex-1",style:{fontSize:"10px"},pattern:"^#[0-9A-Fa-f]{6}$"})]}),s.jsx("p",{className:"text-muted-foreground",style:{fontSize:"10px"},children:"Custom color for map marker pin"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-blue-200 dark:border-blue-800/50",children:[s.jsxs(O,{variant:"ghost",className:"h-11 px-5 bg-white/60 dark:bg-black/40 border-2 border-red-300/60 dark:border-red-700/60 hover:bg-red-50 dark:hover:bg-red-900/20 hover:scale-105 active:scale-95 transition-all shadow-md backdrop-blur-sm text-red-600 hover:text-red-700",onClick:()=>{ee(A),x(!1)},style:{fontSize:"11px"},"data-testid":"button-cancel-info",children:[s.jsx(kt,{className:"w-4 h-4 mr-1.5"}),"Cancel"]}),s.jsx(O,{className:`h-11 px-5 ${xe()?"bg-white/60 dark:bg-black/40 border-2 border-green-300/60 dark:border-green-700/60 hover:bg-green-50 dark:hover:bg-green-900/20 text-green-600 hover:text-green-700":"bg-gray-200/60 dark:bg-gray-800/40 border-2 border-gray-300/60 dark:border-gray-700/60 text-gray-400 cursor-not-allowed"} hover:scale-105 active:scale-95 transition-all shadow-md backdrop-blur-sm`,onClick:Ge,disabled:ae||!xe(),style:{fontSize:"11px"},"data-testid":"button-save-info",children:ae?s.jsxs(s.Fragment,{children:[s.jsx(To,{className:"w-4 h-4 mr-1.5 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(sn,{className:"w-4 h-4 mr-1.5"}),"Save"]})})]})]})]}),s.jsx(Ye,{className:"pt-6 mt-2 border-t border-blue-900 dark:border-cyan-400/50 bg-blue-50/50 dark:bg-black/30 backdrop-blur-sm rounded-b-2xl -mx-6 -mb-6 px-6",style:{paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:s.jsx("div",{className:"flex flex-col gap-4 w-full",children:s.jsx("div",{className:"flex justify-between items-center w-full",children:s.jsxs("div",{className:"flex gap-3 flex-wrap",children:[a!=="QL Kitchen"&&s.jsx(O,{variant:"ghost",className:"h-11 w-11 p-0 bg-white/60 dark:bg-black/40 border-2 border-gray-300/60 dark:border-gray-700/60 hover:bg-gray-100 dark:hover:bg-gray-800 hover:scale-105 active:scale-95 transition-all shadow-md backdrop-blur-sm",onClick:ue,"data-testid":`button-edit-${t}`,children:s.jsx(Gn,{className:"w-5 h-5 text-green-600"})}),l&&s.jsx(O,{variant:"ghost",className:"h-11 w-11 p-0 bg-white/60 dark:bg-black/40 border-2 border-gray-300/60 dark:border-gray-700/60 hover:bg-gray-100 dark:hover:bg-gray-800 hover:scale-105 active:scale-95 transition-all shadow-md backdrop-blur-sm disabled:opacity-50",onClick:B,disabled:k,"data-testid":`button-qrcode-${t}`,children:s.jsx(ec,{className:"w-5 h-5 text-purple-600"})}),(()=>{const M=e&&e.includes("|||URL|||")&&e.split("|||URL|||").pop()||"";return M.trim()?s.jsx(O,{variant:"ghost",className:"h-11 w-11 p-0 bg-white/60 dark:bg-black/40 border-2 border-gray-300/60 dark:border-gray-700/60 hover:bg-gray-100 dark:hover:bg-gray-800 hover:scale-105 active:scale-95 transition-all shadow-md backdrop-blur-sm",onClick:()=>qe(M),"data-testid":`button-open-url-${t}`,children:s.jsx(or,{className:"w-5 h-5 text-cyan-600"})}):null})(),o&&i&&!isNaN(parseFloat(o))&&!isNaN(parseFloat(i))&&s.jsxs(s.Fragment,{children:[s.jsx(O,{variant:"ghost",className:"h-11 w-11 p-0 bg-white/60 dark:bg-black/40 border-2 border-gray-300/60 dark:border-gray-700/60 hover:bg-gray-100 dark:hover:bg-gray-800 hover:scale-105 active:scale-95 transition-all shadow-md backdrop-blur-sm",onClick:he,"data-testid":`button-direction-${t}`,children:s.jsx(po,{className:"w-5 h-5 text-red-500"})}),s.jsx(O,{variant:"ghost",className:"h-11 w-11 p-0 bg-white/60 dark:bg-black/40 border-2 border-gray-300/60 dark:border-gray-700/60 hover:bg-gray-100 dark:hover:bg-gray-800 hover:scale-105 active:scale-95 transition-all shadow-md backdrop-blur-sm",onClick:L,"data-testid":`button-waze-${t}`,children:s.jsx(ho,{className:"w-5 h-5 text-blue-500"})})]})]})})})})]}),s.jsx(ze,{open:g,onOpenChange:me,children:s.jsxs(Me,{className:"max-w-md animate-in zoom-in-95 duration-200 bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-blue-500/20 dark:border-blue-400/20",children:[s.jsxs(_e,{children:[s.jsxs(Fe,{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[s.jsx(Ha,{className:"w-5 h-5"}),"QR Code Detected"]}),s.jsx(He,{children:"A QR code was scanned and contains a link."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50/50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(or,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Detected content:"}),s.jsx("div",{className:"bg-background/50 dark:bg-black/50 p-2 rounded text-sm font-mono break-all",children:y})]})]})}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Do you want to navigate to this link? It will open in a new tab."})]}),s.jsxs(Ye,{className:"flex-col-reverse sm:flex-row gap-2",children:[s.jsx(O,{variant:"outline",onClick:me,"data-testid":"button-cancel-qr-navigation",children:"Cancel"}),s.jsxs(O,{onClick:Z,className:"bg-green-600 hover:bg-green-700","data-testid":"button-confirm-qr-navigation",children:[s.jsx(or,{className:"w-4 h-4 mr-2"}),"Open Link"]})]})]})}),s.jsx(ze,{open:N,onOpenChange:S,children:s.jsxs(Me,{className:"max-w-md animate-in zoom-in-95 duration-200 bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-blue-500/20 dark:border-blue-400/20",children:[s.jsxs(_e,{children:[s.jsxs(Fe,{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[s.jsx(Gn,{className:"w-5 h-5"}),"Open Checklist"]}),s.jsx(He,{children:"Access the refill service checklist for this location."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50/50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(or,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"External Link:"}),s.jsxs("div",{className:"bg-background/50 dark:bg-black/50 p-2 rounded text-sm font-mono break-all",children:["https://fmvending.web.app/refill-service/M",je(r)]})]})]})}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Do you want to open the refill service checklist? It will open in a new tab."})]}),s.jsxs(Ye,{className:"flex-col-reverse sm:flex-row gap-2",children:[s.jsx(O,{variant:"outline",onClick:()=>S(!1),"data-testid":"button-cancel-checklist",children:"Cancel"}),s.jsxs(O,{onClick:Se,className:"bg-green-600 hover:bg-green-700","data-testid":"button-confirm-checklist",children:[s.jsx(Gn,{className:"w-4 h-4 mr-2"}),"Open Checklist"]})]})]})}),s.jsx(ze,{open:I,onOpenChange:T,children:s.jsxs(Me,{className:"max-w-md animate-in zoom-in-95 duration-200 bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-blue-500/20 dark:border-blue-400/20",children:[s.jsxs(_e,{children:[s.jsxs(Fe,{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[_==="google"?s.jsx(po,{className:"w-5 h-5"}):s.jsx(ho,{className:"w-5 h-5"}),"Open Navigation"]}),s.jsxs(He,{children:["Navigate to this location using ",_==="google"?"Google Maps":"Waze","."]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50/50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(or,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Navigation to:"}),s.jsxs("div",{className:"bg-background/50 dark:bg-black/50 p-2 rounded text-sm",children:[a||"Location"," (",o,", ",i,")"]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Using ",_==="google"?"Google Maps":"Waze"]})]})]})}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Do you want to open navigation to this location? It will open in a new tab."})]}),s.jsxs(Ye,{className:"flex-col-reverse sm:flex-row gap-2",children:[s.jsx(O,{variant:"outline",onClick:()=>T(!1),"data-testid":"button-cancel-navigation",children:"Cancel"}),s.jsxs(O,{onClick:_==="google"?R:q,className:_==="google"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700","data-testid":"button-confirm-navigation",children:[_==="google"?s.jsx(po,{className:"w-4 h-4 mr-2"}):s.jsx(ho,{className:"w-4 h-4 mr-2"}),"Open ",_==="google"?"Google Maps":"Waze"]})]})]})}),s.jsx(ze,{open:z,onOpenChange:le,children:s.jsxs(Me,{className:"max-w-md animate-in zoom-in-95 duration-200 bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-blue-500/20 dark:border-blue-400/20",children:[s.jsxs(_e,{children:[s.jsxs(Fe,{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[s.jsx(or,{className:"w-5 h-5"}),"Open External Link"]}),s.jsx(He,{children:"This will open a website in a new tab."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50/50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(or,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Website URL:"}),s.jsx("div",{className:"bg-background/50 dark:bg-black/50 p-2 rounded text-sm font-mono break-all",children:U})]})]})}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Do you want to open this external link? It will open in a new tab and may use your data."})]}),s.jsxs(Ye,{className:"flex-col-reverse sm:flex-row gap-2",children:[s.jsx(O,{variant:"outline",onClick:()=>le(!1),"data-testid":"button-cancel-url",children:"Cancel"}),s.jsxs(O,{onClick:Re,className:"bg-cyan-600 hover:bg-cyan-700","data-testid":"button-confirm-url",children:[s.jsx(or,{className:"w-4 h-4 mr-2"}),"Open Link"]})]})]})}),s.jsx(ze,{open:K,onOpenChange:F,children:s.jsxs(Me,{className:"max-w-md animate-in zoom-in-95 duration-200 bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-green-500/20 dark:border-green-400/20",children:[s.jsxs(_e,{children:[s.jsxs(Fe,{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[s.jsx(sn,{className:"w-5 h-5"}),"Save Changes"]}),s.jsx(He,{children:"Are you sure you want to save these changes to the location information?"})]}),s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"bg-green-50/50 dark:bg-green-950/30 p-4 rounded-lg border border-green-200 dark:border-green-800",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ha,{className:"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-semibold text-green-900 dark:text-green-100 mb-2",children:"Changes to be saved:"}),s.jsxs("ul",{className:"text-sm space-y-1",children:[G.info!==A.info&&s.jsx("li",{className:"text-green-700 dark:text-green-300",children:" Location details updated"}),G.qrCode!==A.qrCode&&s.jsx("li",{className:"text-green-700 dark:text-green-300",children:" QR code URL updated"}),G.latitude!==A.latitude&&s.jsx("li",{className:"text-green-700 dark:text-green-300",children:" Latitude updated"}),G.longitude!==A.longitude&&s.jsx("li",{className:"text-green-700 dark:text-green-300",children:" Longitude updated"}),G.markerColor!==A.markerColor&&s.jsx("li",{className:"text-green-700 dark:text-green-300",children:" Marker color updated"})]})]})]})})}),s.jsxs(Ye,{className:"flex-col-reverse sm:flex-row gap-2",children:[s.jsx(O,{variant:"outline",onClick:()=>F(!1),"data-testid":"button-cancel-save",children:"Cancel"}),s.jsxs(O,{onClick:ot,className:"bg-green-600 hover:bg-green-700","data-testid":"button-confirm-save",children:[s.jsx(sn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})}),ve&&s.jsx("div",{className:"fixed top-4 right-4 z-[100] animate-in slide-in-from-top-2 duration-300",children:s.jsxs(Tp,{className:"bg-green-600 text-white border-green-700 shadow-lg",children:[s.jsx(Ha,{className:"h-4 w-4"}),s.jsxs(Op,{className:"ml-2",children:[s.jsx("strong",{children:"Success!"})," Information saved successfully."]})]})})]})}function rl({message:e="Loading...",type:t="pulse"}){const[r,n]=h.useState(0),[a,o]=h.useState(0),[i,l]=h.useState("Initializing"),c=[" Add images to your rows for visual reference"," Share your table with custom links"," Customize marker colors on the map"," Drag and drop rows to reorder"," View delivery routes with Google Maps"," Upload images from gallery or URL"," Toggle between delivery alternates"," Calculate distances automatically"," Save your table layout preferences"," Filter routes by delivery schedule"];return h.useEffect(()=>{const d=setInterval(()=>{n(Math.floor(Math.random()*c.length))},800),p=setInterval(()=>{o(m=>m>=100?100:m+2)},100),u=setInterval(()=>{o(m=>(m<20?l("Initializing"):m<40?l("Loading data"):m<60?l("Processing"):m<80?l("Almost there"):m<95?l("Finalizing"):l("Complete"),m))},100);return()=>{clearInterval(d),clearInterval(p),clearInterval(u)}},[]),s.jsx("div",{className:"table-loading-overlay","data-testid":"loading-overlay",children:s.jsxs("div",{className:"flex flex-col items-center gap-8 zoom-in",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-24 h-24 flex items-center justify-center",children:s.jsx("img",{src:"/assets/FamilyMart.png",alt:"FamilyMart Logo",className:"w-20 h-20 object-contain animate-pulse",style:{animationDuration:"2s"}})}),s.jsx("div",{className:"absolute inset-0 -m-2 rounded-3xl border-4 border-blue-400/20 animate-spin",style:{animationDuration:"3s"}}),s.jsx("div",{className:"absolute inset-0 -m-4 rounded-3xl bg-blue-500/10 animate-ping",style:{animationDuration:"2s"}})]}),s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-sm text-blue-200/90 font-medium transition-all duration-300",children:c[r]})}),s.jsxs("div",{className:"w-72 space-y-2",children:[s.jsx("div",{className:"h-1.5 bg-white/10 rounded-full overflow-hidden relative",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 via-blue-500 to-blue-600 rounded-full shadow-lg shadow-blue-500/50 transition-all duration-100 ease-linear",style:{width:`${a}%`}})}),s.jsxs("div",{className:"flex justify-between text-xs text-blue-200/70",children:[s.jsx("span",{children:i}),s.jsxs("span",{className:"font-mono font-bold",children:[a,"%"]})]})]})]})})}function rh({size:e="sm",type:t="spinner"}){return t==="triple"?s.jsxs("div",{className:"loading-triple-bounce","data-testid":"inline-loading",children:[s.jsx("div",{className:"bounce"}),s.jsx("div",{className:"bounce"}),s.jsx("div",{className:"bounce"})]}):t==="particles"?s.jsx("div",{className:"loading-particles","data-testid":"inline-loading"}):s.jsx("div",{className:`${e==="lg"?"loading-spinner-lg":"loading-spinner"}`,"data-testid":"inline-loading"})}function fN({content:e,children:t,showBelow:r=!1}){const[n,a]=h.useState(!1),[o,i]=h.useState(!1);h.useEffect(()=>{const p=()=>{i("ontouchstart"in window||navigator.maxTouchPoints>0)};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const l=()=>{o&&(a(!n),setTimeout(()=>a(!1),3e3))},c=()=>{o||a(!0)},d=()=>{o||a(!1)};return s.jsxs("div",{className:"relative inline-block",children:[s.jsx("div",{onClick:l,onMouseEnter:c,onMouseLeave:d,className:`${o?"cursor-pointer":"cursor-help"}`,children:t}),n&&s.jsxs("div",{className:`absolute left-1/2 transform -translate-x-1/2 z-50 ${r?"top-full mt-1":"bottom-full mb-1"}`,children:[s.jsx("div",{className:"px-2 py-1 text-xs bg-gray-900 text-white rounded shadow-lg whitespace-nowrap",children:e}),s.jsx("div",{className:`absolute left-1/2 transform -translate-x-1/2 border-4 border-transparent ${r?"bottom-full border-b-gray-900":"top-full border-t-gray-900"}`})]})]})}function sl({rows:e,columns:t,editMode:r,isSharedView:n=!1,hideShareButton:a=!1,disablePagination:o=!1,onUpdateRow:i,onDeleteRow:l,onReorderRows:c,onReorderColumns:d,onDeleteColumn:p,onSelectRowForImage:u,onShowCustomization:m,onOptimizeRoute:f,onShareTable:b,onSavedLinks:x,isAuthenticated:g=!1,isLoading:v=!1,isFiltered:y=!1,searchTerm:w="",onSearchTermChange:k,filterValue:C=[],onFilterValueChange:N,deliveryFilterValue:S=[],onDeliveryFilterValueChange:I,routeOptions:T=[],deliveryOptions:_=[],onClearAllFilters:V,filteredRowsCount:z=0,totalRowsCount:le=0}){const[U,ce]=h.useState(1),[K,F]=h.useState(16),[ae,J]=h.useState(!1),[ve,be]=h.useState(null),[A,Ie]=h.useState(null);jt();const G=r?t:t.filter(P=>P.dataKey!=="info");h.useEffect(()=>{U>1&&ce(1)},[e.length]);const ee=P=>{const E=new Date().getDay(),Q=[1,3,5,0],W=[2,4,6];return P.active===!1||P.deliveryAlt==="inactive"?"inactive":P.deliveryAlt==="alt1"&&!Q.includes(E)||P.deliveryAlt==="alt2"&&!W.includes(E)||n&&P.delivery==="Weekday"&&(E===5||E===6)?"off-schedule":"on-schedule"},xe=A?(()=>{const P=[...e].sort((Q,W)=>{if(n||r){const te=ee(Q),oe=ee(W),Qe={"on-schedule":0,"off-schedule":1,inactive:2};if(Qe[te]!==Qe[oe])return Qe[te]-Qe[oe]}else{const te=Q.active!==!1,oe=W.active!==!1;if(te!==oe)return te?-1:1}const ne=A.direction==="asc"?1:-1;switch(A.column){case"code":{const te=Q.code||"",oe=W.code||"",Qe=parseInt(te)||0,ie=parseInt(oe)||0;return(Qe-ie)*ne}case"route":{const te=Q.route||"",oe=W.route||"";return te.localeCompare(oe)*ne}case"location":{const te=Q.location||"",oe=W.location||"";return te.localeCompare(oe)*ne}case"delivery":{const te=Q.delivery||"",oe=W.delivery||"";return te.localeCompare(oe)*ne}case"kilometer":{const te=parseFloat(Q.kilometer)||0,oe=parseFloat(W.kilometer)||0;return(te-oe)*ne}case"order":{const te=Q.no||0,oe=W.no||0;return(te-oe)*ne}default:return 0}}),E=P.findIndex(Q=>Q.location==="QL Kitchen"&&Q.active!==!1);if(E>0){const Q=P.splice(E,1)[0];P.unshift(Q)}return P})():(()=>{if(n||r){const P=e.filter(W=>ee(W)==="on-schedule"),E=e.filter(W=>ee(W)==="off-schedule"),Q=e.filter(W=>ee(W)==="inactive");return[...P,...E,...Q]}else{const P=e.filter(Q=>Q.active!==!1),E=e.filter(Q=>Q.active===!1);return[...P,...E]}})(),je=xe.length,ue=o?1:Math.ceil(je/K),Se=o?0:(U-1)*K,he=o?je:Se+K,R=o?xe:xe.slice(Se,he),L=P=>{F(Number(P)),ce(1)},q=P=>{P!==U&&ce(Math.max(1,Math.min(P,ue)))},B=P=>{if(!P.destination)return;const{source:E,destination:Q,type:W}=P;if(W==="column"){const ne=Array.from(t),[te]=ne.splice(E.index,1);ne.splice(Q.index,0,te);const oe=ne.map(Qe=>Qe.id);d.mutate(oe)}else if(W==="row"){const ne=Array.from(e),[te]=ne.splice(E.index,1);ne.splice(Q.index,0,te);const oe=ne.map(Qe=>Qe.id);c.mutate(oe)}},Z=P=>{const E=typeof P=="string"?parseFloat(P):P;return new Intl.NumberFormat("en-MY",{style:"currency",currency:"MYR",currencyDisplay:"symbol"}).format(E||0).replace("MYR","RM")},me=(P,E,Q)=>{var W;switch(E.dataKey){case"id":return P.id.slice(0,8).toUpperCase();case"no":return P.location==="QL Kitchen"?"":Q!==void 0?((W=R[0])==null?void 0:W.location)==="QL Kitchen"?Q:Q+1:P.no||0;case"route":return P.route||"";case"code":return P.code||"";case"location":return P.location||"";case"delivery":return P.delivery||"";case"alt1":return P.alt1||"";case"alt2":return P.alt2||"";case"info":return P.info||"";case"tngSite":return P.tngSite||"";case"tngRoute":if(E.type==="currency"){const oe=parseFloat(P.tngRoute||"0")||0;return Z(oe)}return P.tngRoute||"";case"destination":if(E.type==="currency"){const oe=parseFloat(P.destination||"0")||0;return Z(oe)}return P.destination||"";case"images":return(P.images||[]).map(oe=>typeof oe=="string"?{url:oe,caption:""}:oe);case"kilometer":const te=P.kilometer;return te===""||te===void 0||te===null?"":typeof te=="number"?te===0?"0.00 km":`${te.toFixed(2)} km`:"";default:return P[E.dataKey]||""}},qe=(P,E)=>{if(P==="no")return e.reduce((Q,W)=>Q+(W.no||0),0);if(P==="kilometer"){const Q=e.filter(pt=>pt.location!=="QL Kitchen"&&pt.latitude&&pt.longitude&&Number.isFinite(parseFloat(pt.latitude))&&Number.isFinite(parseFloat(pt.longitude)));if(Q.length===0)return 0;const W=Q[Q.length-1],ne=W.kilometer;if(typeof ne!="number"||!Number.isFinite(ne))return 0;const oe=[...e].find(pt=>pt.location==="QL Kitchen");if(!oe||!oe.latitude||!oe.longitude)return ne;const Qe=parseFloat(oe.latitude),ie=parseFloat(oe.longitude);if(!Number.isFinite(Qe)||!Number.isFinite(ie))return ne;const rt=parseFloat(W.latitude||"0"),At=parseFloat(W.longitude||"0"),Mr=6371,mr=(Qe-rt)*(Math.PI/180),pr=(ie-At)*(Math.PI/180),rs=Math.sin(mr/2)*Math.sin(mr/2)+Math.cos(rt*(Math.PI/180))*Math.cos(Qe*(Math.PI/180))*Math.sin(pr/2)*Math.sin(pr/2),rr=2*Math.atan2(Math.sqrt(rs),Math.sqrt(1-rs)),ss=Mr*rr;return ne+ss}return E==="currency"&&P==="tngRoute"?e.reduce((Q,W)=>{const ne=parseFloat(W.tngRoute||"0")||0;return Q+ne},0):E==="currency"&&P==="destination"?e.reduce((Q,W)=>{const ne=parseFloat(W.destination||"0")||0;return Q+ne},0):E==="currency"&&P==="tollPrice"?e.reduce((Q,W)=>{const ne=parseFloat(W.tollPrice||"0")||0;return Q+ne},0):0},Re=P=>{const Q=[...e].sort((W,ne)=>{const te=W.code||"",oe=ne.code||"",Qe=parseInt(te)||0,ie=parseInt(oe)||0;return!isNaN(Qe)&&!isNaN(ie)?P==="asc"?Qe-ie:ie-Qe:P==="asc"?te.localeCompare(oe):oe.localeCompare(te)}).map(W=>W.id);c.mutate(Q)},Ge=P=>{const Q=[...e].sort((W,ne)=>{const te=W.no||0,oe=ne.no||0;return P==="asc"?te-oe:oe-te}).map(W=>W.id);c.mutate(Q)},ot=P=>{const Q=[...e].sort((W,ne)=>{const te=W.delivery||"",oe=ne.delivery||"";return P==="asc"?te.localeCompare(oe):oe.localeCompare(te)}).map(W=>W.id);c.mutate(Q)},M=P=>{const Q=[...e].sort((W,ne)=>{const te=W.location||"",oe=ne.location||"";return P==="asc"?te.localeCompare(oe):oe.localeCompare(te)}).map(W=>W.id);c.mutate(Q)},se=P=>{const Q=[...e].sort((W,ne)=>{const te=W.route||"",oe=ne.route||"";return P==="asc"?te.localeCompare(oe):oe.localeCompare(te)}).map(W=>W.id);c.mutate(Q)},pe=P=>{const Q=[...e].sort((W,ne)=>{const te=parseFloat(W.kilometer)||0,oe=parseFloat(ne.kilometer)||0;return P==="asc"?te-oe:oe-te}).map(W=>W.id);c.mutate(Q)},we=P=>{let E=null;if(!A||A.column!==P?E="asc":A.direction==="asc"?E="desc":E=null,E===null){Ie(null);return}switch(Ie({column:P,direction:E}),P){case"route":se(E);break;case"code":Re(E);break;case"delivery":ot(E);break;case"location":M(E);break;case"kilometer":pe(E);break;case"order":Ge(E);break}},lt=P=>{be(P),J(!0)},Ke=()=>{ve&&(l.mutate(ve),J(!1),be(null))},ts=()=>{J(!1),be(null)},ur=P=>{if(!N)return;const E=C.includes(P)?C.filter(Q=>Q!==P):[...C,P];N(E)},Ht=P=>{if(!I)return;const E=S.includes(P)?S.filter(Q=>Q!==P):[...S,P];I(E)};return s.jsxs("div",{className:"glass-table rounded-xl border-none shadow-2xl table-container my-10","data-testid":"data-table",children:[s.jsx("div",{className:"px-6 py-3 border-b border-border/20 bg-gradient-to-r from-blue-500/5 via-transparent to-blue-500/5 dark:from-blue-500/5 dark:via-transparent dark:to-blue-500/5 backdrop-blur-sm text-[10px] rounded-t-xl",style:{fontFamily:"system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif"},children:s.jsxs("div",{className:"flex flex-row gap-3 items-center justify-between",children:[!o&&s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("span",{className:"text-sm text-muted-foreground pagination-10px",children:"Show"}),s.jsxs(As,{value:K.toString(),onValueChange:L,children:[s.jsx(Jr,{className:"h-6 px-2 pagination-button text-xs font-semibold [&>svg]:hidden w-auto min-w-[3rem]",children:s.jsx(Is,{})}),s.jsxs(Zr,{className:"bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-700",children:[s.jsx(wt,{value:"16",className:"font-semibold",children:"16"}),s.jsx(wt,{value:"30",className:"font-semibold",children:"30"}),s.jsx(wt,{value:"50",className:"font-semibold",children:"50"}),s.jsx(wt,{value:"100",className:"font-semibold",children:"100"})]})]}),s.jsxs("span",{className:"text-sm text-muted-foreground pagination-10px",children:["of ",je," entries"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(O,{onClick:m,variant:"outline",size:"sm",className:"w-8 h-8 p-0 pagination-button","data-testid":"button-show",title:"Customize columns",children:s.jsx(cn,{className:"w-3 h-3 text-blue-600 dark:text-blue-400"})}),s.jsx(O,{onClick:f,variant:"outline",size:"sm",className:"w-8 h-8 p-0 pagination-button","data-testid":"button-optimize-route",title:"Optimize delivery route with AI",children:s.jsx(Qn,{className:"w-3 h-3 text-blue-600 dark:text-blue-400"})}),!a&&s.jsx(O,{onClick:b,variant:"outline",size:"sm",className:"w-8 h-8 p-0 pagination-button","data-testid":"button-share-table",title:"Share current table view",children:s.jsx(Ni,{className:"w-3 h-3 text-green-500 dark:text-green-400"})})]})]})}),s.jsxs("div",{className:"flex justify-between items-center px-6 py-3 border-b border-border/20 bg-background/30",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs(Qo,{children:[s.jsx(Yo,{asChild:!0,children:s.jsxs(O,{variant:"outline",className:"h-6 px-2 pagination-button text-xs justify-start","data-testid":"sort-trigger",children:[A&&s.jsxs(s.Fragment,{children:[A.direction==="asc"?s.jsx(zr,{className:"w-3 h-3 mr-1"}):s.jsx(Fr,{className:"w-3 h-3 mr-1"}),s.jsxs("span",{className:"hidden sm:inline",children:[A.column==="route"&&"Route",A.column==="code"&&"Code",A.column==="location"&&"Location",A.column==="delivery"&&"Delivery",A.column==="kilometer"&&"Km",A.column==="order"&&"No"]}),s.jsx("span",{className:"sm:hidden",children:"Sort"})]}),!A&&s.jsxs(s.Fragment,{children:[s.jsx(fr,{className:"w-3 h-3 mr-1 opacity-50"}),s.jsx("span",{children:"Sort"})]})]})}),s.jsx(ia,{className:"w-52 p-0",align:"start",children:s.jsxs("div",{className:"p-3 btn-glass",children:[s.jsxs("h4",{className:"font-medium text-sm mb-3 pb-2 border-b border-border/20 flex items-center gap-2",children:[s.jsx(fr,{className:"w-3.5 h-3.5 text-blue-500 dark:text-blue-400"}),"Sort By"]}),s.jsxs("div",{className:"space-y-1.5 text-sm",children:[s.jsxs(O,{variant:(A==null?void 0:A.column)==="route"?"default":"ghost",size:"sm",className:`w-full justify-between text-xs ${(A==null?void 0:A.column)==="route"?"bg-blue-500 hover:bg-blue-600 text-white":""}`,onClick:()=>we("route"),"data-testid":"button-sort-route",children:[s.jsx("span",{children:"Route"}),(A==null?void 0:A.column)==="route"&&(A.direction==="asc"?s.jsx(zr,{className:"w-3 h-3"}):s.jsx(Fr,{className:"w-3 h-3"})),(A==null?void 0:A.column)!=="route"&&s.jsx(fr,{className:"w-3 h-3 opacity-30"})]}),s.jsxs(O,{variant:(A==null?void 0:A.column)==="code"?"default":"ghost",size:"sm",className:`w-full justify-between text-xs ${(A==null?void 0:A.column)==="code"?"bg-blue-500 hover:bg-blue-600 text-white":""}`,onClick:()=>we("code"),"data-testid":"button-sort-code",children:[s.jsx("span",{children:"Code"}),(A==null?void 0:A.column)==="code"&&(A.direction==="asc"?s.jsx(zr,{className:"w-3 h-3"}):s.jsx(Fr,{className:"w-3 h-3"})),(A==null?void 0:A.column)!=="code"&&s.jsx(fr,{className:"w-3 h-3 opacity-30"})]}),s.jsxs(O,{variant:(A==null?void 0:A.column)==="location"?"default":"ghost",size:"sm",className:`w-full justify-between text-xs ${(A==null?void 0:A.column)==="location"?"bg-blue-500 hover:bg-blue-600 text-white":""}`,onClick:()=>we("location"),"data-testid":"button-sort-location",children:[s.jsx("span",{children:"Location"}),(A==null?void 0:A.column)==="location"&&(A.direction==="asc"?s.jsx(zr,{className:"w-3 h-3"}):s.jsx(Fr,{className:"w-3 h-3"})),(A==null?void 0:A.column)!=="location"&&s.jsx(fr,{className:"w-3 h-3 opacity-30"})]}),s.jsxs(O,{variant:(A==null?void 0:A.column)==="delivery"?"default":"ghost",size:"sm",className:`w-full justify-between text-xs ${(A==null?void 0:A.column)==="delivery"?"bg-blue-500 hover:bg-blue-600 text-white":""}`,onClick:()=>we("delivery"),"data-testid":"button-sort-delivery",children:[s.jsx("span",{children:"Delivery"}),(A==null?void 0:A.column)==="delivery"&&(A.direction==="asc"?s.jsx(zr,{className:"w-3 h-3"}):s.jsx(Fr,{className:"w-3 h-3"})),(A==null?void 0:A.column)!=="delivery"&&s.jsx(fr,{className:"w-3 h-3 opacity-30"})]}),s.jsxs(O,{variant:(A==null?void 0:A.column)==="kilometer"?"default":"ghost",size:"sm",className:`w-full justify-between text-xs ${(A==null?void 0:A.column)==="kilometer"?"bg-blue-500 hover:bg-blue-600 text-white":""}`,onClick:()=>we("kilometer"),"data-testid":"button-sort-kilometer",children:[s.jsx("span",{children:"Kilometer"}),(A==null?void 0:A.column)==="kilometer"&&(A.direction==="asc"?s.jsx(zr,{className:"w-3 h-3"}):s.jsx(Fr,{className:"w-3 h-3"})),(A==null?void 0:A.column)!=="kilometer"&&s.jsx(fr,{className:"w-3 h-3 opacity-30"})]}),y&&s.jsxs(O,{variant:(A==null?void 0:A.column)==="order"?"default":"ghost",size:"sm",className:`w-full justify-between text-xs ${(A==null?void 0:A.column)==="order"?"bg-blue-500 hover:bg-blue-600 text-white":""}`,onClick:()=>we("order"),"data-testid":"button-sort-order",children:[s.jsx("span",{children:"No"}),(A==null?void 0:A.column)==="order"&&(A.direction==="asc"?s.jsx(zr,{className:"w-3 h-3"}):s.jsx(Fr,{className:"w-3 h-3"})),(A==null?void 0:A.column)!=="order"&&s.jsx(fr,{className:"w-3 h-3 opacity-30"})]})]})]})})]}),s.jsx("div",{className:"w-auto",children:s.jsxs(Qo,{children:[s.jsx(Yo,{asChild:!0,children:s.jsxs(O,{variant:"outline",className:"h-6 px-2 pagination-button text-xs justify-start","data-testid":"combined-filter-trigger",children:[s.jsx("span",{className:"hidden sm:inline",children:n?S.length===0?" Hide Deliveries":` ${S.length} hidden`:C.length===0&&S.length===0?" Filters":` ${C.length}   ${S.length}`}),s.jsx("span",{className:"sm:hidden",children:n?S.length===0?"":`${S.length}`:C.length===0&&S.length===0?"":`${C.length} ${S.length}`})]})}),s.jsx(ia,{className:"w-64 p-0",align:"start",children:s.jsxs("div",{className:"space-y-4 p-4 text-sm btn-glass",children:[!n&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",children:[s.jsx(Gb,{className:"w-3 h-3 text-accent"}),"Routes (",C.length," selected)"]}),C.length>0&&s.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>N==null?void 0:N([]),className:"h-auto p-1 text-xs",children:[s.jsx(kt,{className:"w-3 h-3 mr-1"}),"Clear"]})]}),s.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto border rounded p-2 bg-background/50",children:T.filter(P=>P!=="WH").map(P=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Rr,{id:`route-${P}`,checked:C.includes(P),onCheckedChange:()=>ur(P)}),s.jsxs(ye,{htmlFor:`route-${P}`,className:"text-xs cursor-pointer",children:[" ",P]})]},P))})]}),s.jsx("div",{className:"border-t border-border/20"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",children:[s.jsx(rn,{className:"w-3 h-3 text-orange-500"}),"Hide Deliveries (",S.length," hidden)"]}),S.length>0&&s.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>I==null?void 0:I([]),className:"h-auto p-1 text-xs",children:[s.jsx(kt,{className:"w-3 h-3 mr-1"}),"Clear"]})]}),s.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto border rounded p-2 bg-background/50",children:_.map(P=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Rr,{id:`delivery-${P}`,checked:S.includes(P),onCheckedChange:()=>Ht(P)}),s.jsxs(ye,{htmlFor:`delivery-${P}`,className:"peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-xs cursor-pointer font-medium",children:[" ",P]})]},P))})]})]})})]})}),(w||C.length>0||S.length>0)&&s.jsxs(O,{onClick:V,variant:"outline",size:"sm",className:"h-6 px-2 pagination-button text-xs border-destructive/30 hover:bg-destructive/10 hover:border-destructive/50","data-testid":"clear-all-filters",children:[s.jsx("span",{className:"hidden sm:inline bg-gradient-to-r from-red-600 to-rose-600 dark:from-red-400 dark:to-rose-400 bg-clip-text text-transparent",children:"Clear"}),s.jsx("span",{className:"sm:hidden bg-gradient-to-r from-red-600 to-rose-600 dark:from-red-400 dark:to-rose-400 bg-clip-text text-transparent",children:"Clear"})]})]}),s.jsx("div",{className:"flex-1 max-w-[30%] lg:max-w-md ml-auto flex items-center gap-2",children:s.jsxs("div",{className:"relative group flex-1",children:[s.jsx(tc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-3 h-4 text-muted-foreground group-hover:text-primary transition-colors"}),s.jsx(Ae,{placeholder:"Search...",value:w,onChange:P=>k==null?void 0:k(P.target.value),className:"pl-7 pr-7 h-8 bg-transparent text-foreground placeholder:text-muted-foreground border-2 border-primary/20 hover:border-primary/30 hover:bg-primary/5 rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 focus-visible:ring-offset-2 focus-visible:border-primary/40 focus-visible:bg-primary/5 disabled:cursor-not-allowed disabled:opacity-50 transition-colors text-sm","data-testid":"search-input"}),w&&s.jsx("button",{onClick:()=>k==null?void 0:k(""),className:"absolute right-1 top-1/2 transform -translate-y-1/2 p-0.5 w-5 h-5 rounded-full hover:bg-muted/50 transition-colors flex items-center justify-center","data-testid":"clear-search","aria-label":"Clear search",children:s.jsx(kt,{className:"w-2.5 h-2.5 text-muted-foreground hover:text-foreground"})})]})})]}),(w||C.length>0||S.length>0)&&s.jsx("div",{className:"px-6 py-2 border-b border-border/20 bg-gradient-to-r from-blue-500/5 via-transparent to-blue-500/5 dark:from-blue-500/5 dark:via-transparent dark:to-blue-500/5",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[s.jsx("span",{className:"text-muted-foreground font-medium text-xs",children:"Active:"}),w&&s.jsxs("div",{className:"flex items-center gap-0.5 px-2 py-0.5 bg-primary/10 border border-primary/20 rounded-full text-primary text-xs",children:[s.jsx(tc,{className:"w-2.5 h-2.5"}),s.jsxs("span",{children:['"',w,'"']}),s.jsx("button",{onClick:()=>k==null?void 0:k(""),className:"ml-0.5 p-0.5 hover:text-primary/70 flex items-center justify-center rounded-full hover:bg-primary/10","aria-label":"Remove text filter",children:s.jsx(kt,{className:"w-2.5 h-2.5"})})]}),C.map(P=>s.jsxs("div",{className:"flex items-center gap-0.5 px-2 py-0.5 bg-transparent border border-transparent rounded-full text-gray-400 text-xs",children:[P.startsWith("SL ")?s.jsx("img",{src:"/selangor-flag.png",alt:"Selangor Flag",className:"inline-block w-4 h-2 object-cover mr-1.5"}):P.startsWith("KL ")?s.jsx("img",{src:"/kl-flag.png",alt:"KL Flag",className:"inline-block w-4 h-2 object-cover mr-1.5"}):s.jsx(rn,{className:"w-2.5 h-2.5"}),s.jsx("span",{children:P}),s.jsx("button",{onClick:()=>ur(P),className:"ml-0.5 p-0.5 hover:text-red-600 flex items-center justify-center rounded-full hover:bg-red-500/10","aria-label":`Remove route filter: ${P}`,children:s.jsx(kt,{className:"w-2.5 h-2.5 text-red-500"})})]},P)),S.map(P=>s.jsxs("div",{className:"flex items-center gap-0.5 px-2 py-0.5 bg-transparent border border-transparent rounded-full text-gray-400 text-xs",children:[s.jsx(rn,{className:"w-2.5 h-2.5"}),s.jsx("span",{children:P}),s.jsx("button",{onClick:()=>Ht(P),className:"ml-0.5 p-0.5 hover:text-red-600 flex items-center justify-center rounded-full hover:bg-red-500/10","aria-label":`Remove delivery filter: ${P}`,children:s.jsx(kt,{className:"w-2.5 h-2.5 text-red-500"})})]},P)),s.jsxs("div",{className:"ml-auto text-muted-foreground text-xs",children:[z," of ",le," results"]})]})}),s.jsx("div",{className:"overflow-x-auto w-full",children:s.jsxs(xp,{onDragEnd:B,children:[s.jsxs(Ep,{className:"min-w-full",children:[s.jsx(Rp,{className:"table-header-glass sticky top-0 z-20 bg-white dark:bg-slate-900 border-b-2 border-yellow-400/30",children:s.jsx(Ho,{droppableId:"columns",direction:"horizontal",type:"column",children:P=>s.jsxs(qn,{ref:P.innerRef,...P.droppableProps,children:[G.map((E,Q)=>s.jsx(qo,{draggableId:E.id,index:Q,children:W=>s.jsx(Ko,{ref:W.innerRef,...W.draggableProps,className:"px-4 py-3 text-center table-header-footer-12px font-semibold tracking-wide border-b border-border sticky top-0 bg-white dark:bg-slate-900 shadow-sm whitespace-nowrap",style:{textAlign:"center",textDecoration:"normal",fontSize:"10px",...E.dataKey==="location"&&{minWidth:"135px"}},colSpan:E.dataKey==="location"?3:1,"data-testid":`column-header-${E.dataKey}`,children:s.jsx(Sj,{column:E,dragHandleProps:W.dragHandleProps,onDelete:()=>p.mutate(E.id),isAuthenticated:g,editMode:r})})},E.id)),s.jsx(Ko,{className:"px-4 py-3 text-center table-header-footer-12px font-semibold tracking-wide border-b border-border sticky top-0 bg-white dark:bg-slate-900 shadow-sm whitespace-nowrap",style:{textAlign:"center",textDecoration:"normal",fontSize:"10px"},children:s.jsx("span",{className:"bg-gradient-to-r from-red-600 to-rose-600 dark:from-red-400 dark:to-rose-400 bg-clip-text text-transparent",children:"Actions"})}),P.placeholder]})})}),s.jsx(Ho,{droppableId:"rows",type:"row",children:P=>h.createElement(Dp,{ref:P.innerRef,...P.droppableProps,className:"pt-2 motion-layer zoom-in",key:`page-${U}`},v?Array.from({length:Math.min(K,5)}).map((E,Q)=>s.jsxs("tr",{className:"skeleton-row fade-in-stagger odd:bg-white dark:odd:bg-gray-900/50 even:bg-blue-50/50 dark:even:bg-blue-900/20 backdrop-blur-sm hover:bg-muted/60 table-cell-unique-transition",children:[s.jsx("td",{className:"p-3 w-16",children:s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsx("div",{className:"skeleton w-8 h-8 rounded-md bg-gradient-to-r from-gray-500/20 to-slate-500/20 animate-pulse"}),s.jsx("div",{className:"skeleton w-8 h-8 rounded-md bg-gradient-to-r from-blue-500/20 to-purple-500/20 animate-pulse",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"skeleton w-8 h-8 rounded-md bg-gradient-to-r from-green-500/20 to-blue-500/20 animate-pulse",style:{animationDelay:"0.2s"}}),s.jsx("div",{className:"skeleton w-8 h-8 rounded-md bg-gradient-to-r from-yellow-500/20 to-green-500/20 animate-pulse",style:{animationDelay:"0.3s"}}),s.jsx("div",{className:"skeleton w-8 h-8 rounded-md bg-gradient-to-r from-red-500/20 to-yellow-500/20 animate-pulse",style:{animationDelay:"0.4s"}}),s.jsx("div",{className:"skeleton w-8 h-8 rounded-md bg-gradient-to-r from-green-500/20 to-emerald-500/20 animate-pulse",style:{animationDelay:"0.5s"}})]})}),G.map(W=>s.jsx("td",{className:"p-3",colSpan:W.dataKey==="location"?3:1,children:W.dataKey==="images"?s.jsx("div",{className:"skeleton w-12 h-8 rounded mx-auto bg-gradient-to-r from-blue-400/20 to-purple-400/20 animate-pulse"}):W.dataKey==="delivery"?s.jsx("div",{className:"skeleton w-16 h-6 rounded-full mx-auto bg-gradient-to-r from-green-400/20 to-blue-400/20 animate-pulse"}):W.dataKey==="location"?s.jsx("div",{className:"skeleton w-32 h-4 mx-auto bg-gradient-to-r from-yellow-400/20 to-green-400/20 animate-pulse"}):s.jsx("div",{className:"skeleton w-20 h-4 mx-auto bg-gradient-to-r from-cyan-400/20 to-blue-400/20 animate-pulse"})},W.id))]},`skeleton-${Q}`)):R.map((E,Q)=>s.jsx(qo,{draggableId:E.id,index:Q,isDragDisabled:E.active===!1||!r,children:(W,ne)=>{var te,oe,Qe;return s.jsxs(qn,{ref:W.innerRef,...W.draggableProps,className:`table-row-glass group ${(()=>{if(n||r){const ie=ee(E);return ie==="inactive"?"bg-gray-100/60 dark:bg-gray-800/40 opacity-50":ie==="off-schedule"?E.location==="QL Kitchen"?"bg-gradient-to-r from-gray-100/80 to-slate-100/80 dark:from-gray-800/60 dark:to-slate-800/60 opacity-60":"odd:bg-white dark:odd:bg-gray-900/50 even:bg-blue-50/50 dark:even:bg-blue-900/20 opacity-60":E.location==="QL Kitchen"?"bg-gradient-to-r from-gray-100/80 to-slate-100/80 dark:from-gray-800/60 dark:to-slate-800/60":"odd:bg-white dark:odd:bg-gray-900/50 even:bg-blue-50/50 dark:even:bg-blue-900/20"}else return E.active===!1?"bg-gray-100/60 dark:bg-gray-800/40 opacity-50":E.location==="QL Kitchen"?"bg-gradient-to-r from-gray-100/80 to-slate-100/80 dark:from-gray-800/60 dark:to-slate-800/60":"odd:bg-white dark:odd:bg-gray-900/50 even:bg-blue-50/50 dark:even:bg-blue-900/20"})()} hover:bg-blue-100/60 dark:hover:bg-blue-800/30 table-cell-unique-transition ${ne.isDragging?"drag-elevate":""}`,"data-testid":`table-row-${E.id}`,children:[G.map(ie=>s.jsx(Zs,{className:"p-4 align-middle [&:has([role=checkbox])]:pr-0 px-3 py-3 table-cell-10px text-center text-[12px] bg-transparent text-foreground whitespace-nowrap font-normal table-zoom-in",style:{minWidth:"100px",...ie.dataKey==="location"&&{minWidth:"135px",fontSize:"10px"},...ie.dataKey==="delivery"&&{minWidth:"110px",fontSize:"10px",fontWeight:"normal"},...ie.dataKey==="id"&&{minWidth:"120px"},...ie.dataKey==="code"&&{minWidth:"80px"},...ie.dataKey==="route"&&{minWidth:"70px"},...ie.dataKey==="no"&&{minWidth:"50px"},...ie.dataKey==="kilometer"&&{minWidth:"80px"},...ie.dataKey==="tollPrice"&&{minWidth:"90px"},...ie.dataKey==="tngRoute"&&{minWidth:"90px"},...ie.dataKey==="images"&&{minWidth:"120px"},...ie.type==="currency"&&!ie.dataKey.match(/tollPrice|tngRoute/)&&{minWidth:"100px"}},colSpan:ie.dataKey==="location"?3:1,"data-testid":`cell-${E.id}-${ie.dataKey}`,children:s.jsx("div",{className:"w-[98%] mx-auto text-center",children:ie.dataKey==="images"?s.jsx(Aj,{images:E.images,rowId:E.id,onAddImage:()=>u(E.id),editMode:r,onAccessDenied:()=>u("access-denied")}):ie.dataKey==="info"?E.info&&E.info.trim()?s.jsx(Kc,{info:E.info,rowId:E.id,code:E.code,route:E.route,location:E.location,latitude:E.latitude?String(E.latitude):void 0,longitude:E.longitude?String(E.longitude):void 0,qrCode:E.qrCode||void 0,no:E.no,markerColor:E.markerColor||void 0,onUpdateRow:rt=>i.mutate({id:E.id,updates:rt}),editMode:!1,allRows:e,iconType:"info"}):s.jsx("span",{className:"text-muted-foreground",children:""}):ie.dataKey==="delivery"?r&&ie.isEditable==="true"?s.jsx(mo,{value:me(E,ie,Q),type:"select",options:_,dataKey:ie.dataKey,onSave:rt=>i.mutate({id:E.id,updates:{[ie.dataKey]:rt}})}):s.jsx("span",{className:"text-[9px] text-gray-500 dark:text-gray-400 font-medium",children:me(E,ie,Q)||""}):ie.dataKey==="id"?s.jsx("span",{className:"font-mono text-slate-600 dark:text-slate-300",style:{fontSize:"10px"},children:me(E,ie,Q)}):ie.dataKey==="no"&&r&&E.location!=="QL Kitchen"?s.jsx(mo,{value:String(E.no||0),type:"number",dataKey:ie.dataKey,onSave:rt=>i.mutate({id:E.id,updates:{no:parseInt(rt)||0}})}):r&&ie.isEditable==="true"?s.jsx(mo,{value:me(E,ie,Q),type:ie.type,options:ie.options||void 0,dataKey:ie.dataKey,onSave:rt=>i.mutate({id:E.id,updates:{[ie.dataKey]:rt}})}):s.jsx("span",{className:"text-[9px] text-gray-500 dark:text-gray-400 font-medium",children:ie.dataKey==="kilometer"?s.jsx(fN,{content:(()=>{const rt=E.segmentDistance;return rt&&typeof rt=="number"&&rt>0?`${rt.toFixed(2)} km`:"Starting point"})(),showBelow:Q===0&&Q!==R.length-1,children:s.jsx("span",{className:"cursor-help",children:me(E,ie,Q)})}):me(E,ie,Q)})})},ie.id)),s.jsx(Zs,{className:"px-4 py-2 text-sm text-center text-foreground",style:{textAlign:"center"},children:s.jsx("div",{className:"flex flex-col items-center gap-1",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{...W.dragHandleProps,className:`p-2 rounded ${ne.isDragging?"cursor-grabbing":r?"cursor-grab":"cursor-default"} text-gray-500 dark:text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 transition-all`,title:r?"Drag to reorder":"","data-testid":`drag-handle-${E.id}`,children:s.jsx(qu,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-center gap-3 opacity-60 group-hover:opacity-100 transition-opacity",children:[r&&s.jsxs(s.Fragment,{children:[s.jsx(O,{size:"sm",variant:"ghost",className:`bg-transparent border-transparent hover:bg-transparent hover:border-transparent text-blue-400 dark:text-blue-300 hover:text-blue-500 dark:hover:text-blue-400 ${i.isPending&&((te=i.variables)==null?void 0:te.id)===E.id?"opacity-50":""}`,onClick:()=>{u(r?E.id:"access-denied")},disabled:i.isPending&&((oe=i.variables)==null?void 0:oe.id)===E.id,"data-testid":`button-add-image-${E.id}`,title:"Add image",children:s.jsx(Db,{className:"w-4 h-4"})}),s.jsx(O,{size:"sm",variant:"ghost",className:`bg-transparent border-transparent hover:bg-transparent hover:border-transparent ${g?"text-blue-400 dark:text-blue-300 hover:text-blue-500 dark:hover:text-blue-400":"opacity-50 cursor-not-allowed"} ${l.isPending&&l.variables===E.id?"mutation-loading":""}`,onClick:()=>g&&lt(E.id),disabled:!g||l.isPending&&l.variables===E.id,"data-testid":`button-delete-row-${E.id}`,title:g?"Delete row":"Authentication required to delete rows",children:l.isPending&&l.variables===E.id?s.jsx(rh,{type:"particles"}):s.jsx(Oo,{className:"w-4 h-4"})})]}),s.jsx(Kc,{info:E.info||"",rowId:E.id,code:E.code,route:E.route,location:E.location,latitude:E.latitude?String(E.latitude):void 0,longitude:E.longitude?String(E.longitude):void 0,qrCode:E.qrCode||void 0,no:E.no,markerColor:E.markerColor||void 0,onUpdateRow:ie=>i.mutate({id:E.id,updates:ie}),editMode:r,allRows:e,iconType:r?"filetext":"info"}),r?s.jsxs(As,{value:E.deliveryAlt||"normal",onValueChange:ie=>{const rt=ie!=="inactive";i.mutate({id:E.id,updates:{deliveryAlt:ie,active:rt}})},disabled:i.isPending&&((Qe=i.variables)==null?void 0:Qe.id)===E.id,children:[s.jsx(Jr,{className:`h-8 w-16 text-xs border-transparent bg-transparent ${(()=>{if(n||r){const ie=ee(E);return ie==="inactive"?"text-red-500 dark:text-red-400":ie==="off-schedule"?"opacity-60 text-yellow-500 dark:text-yellow-400":"text-green-500 dark:text-green-400"}else return E.deliveryAlt==="inactive"?"text-red-500 dark:text-red-400":E.deliveryAlt==="alt1"||E.deliveryAlt==="alt2"?"text-yellow-500 dark:text-yellow-400":"text-green-500 dark:text-green-400"})()}`,"data-testid":`select-delivery-alt-${E.id}`,children:s.jsx(Is,{})}),s.jsxs(Zr,{children:[s.jsx(wt,{value:"normal",children:s.jsx("span",{className:"text-green-600 dark:text-green-400",children:""})}),s.jsx(wt,{value:"alt1",children:s.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:""})}),s.jsx(wt,{value:"alt2",children:s.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:""})}),s.jsx(wt,{value:"inactive",children:s.jsx("span",{className:"text-red-500 dark:text-red-400",children:""})})]})]}):s.jsx(O,{size:"sm",variant:"ghost",className:`border-transparent bg-transparent hover:bg-transparent cursor-not-allowed ${(()=>{if(n||r){const ie=ee(E);return ie==="inactive"?"text-red-500 dark:text-red-400 hover:text-red-600 dark:hover:text-red-300":ie==="off-schedule"?"opacity-40 text-yellow-500 dark:text-yellow-400 hover:text-yellow-600 dark:hover:text-yellow-500":"opacity-60 text-green-500 dark:text-green-400 hover:text-green-600 dark:hover:text-green-500"}else return E.deliveryAlt==="inactive"?"text-red-500 dark:text-red-400 hover:text-red-600 dark:hover:text-red-300":E.deliveryAlt==="alt1"||E.deliveryAlt==="alt2"?"opacity-60 text-yellow-500 dark:text-yellow-400 hover:text-yellow-600 dark:hover:text-yellow-500":"opacity-60 text-green-500 dark:text-green-400 hover:text-green-600 dark:hover:text-green-500"})()}`,disabled:!0,"data-testid":`button-toggle-active-${E.id}`,title:E.deliveryAlt==="alt1"?"Delivery Alt 1 (Mon, Wed, Fri, Sun)":E.deliveryAlt==="alt2"?"Delivery Alt 2 (Tue, Thu, Sat)":E.deliveryAlt==="inactive"?"Inactive":"Normal Delivery (Every Day)",children:s.jsx(Xb,{className:"w-4 h-4"})})]})]})})})]})}},E.id)),P.placeholder)}),s.jsx("tfoot",{children:s.jsxs(qn,{children:[G.map((P,E)=>s.jsx(Zs,{className:"px-3 py-3 text-center table-header-footer-12px font-semibold tracking-wide border-t border-border sticky bottom-0 bg-white dark:bg-slate-900 shadow-sm whitespace-nowrap",style:{textAlign:"center",fontSize:"10px"},colSpan:P.dataKey==="location"?3:1,children:E===0?s.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent",style:{fontSize:"11px"},children:"Totals"}):P.dataKey==="no"?s.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent",children:""}):P.dataKey==="kilometer"?s.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent",children:(()=>{const Q=qe("kilometer",P.type);return Q>0?`${Q.toFixed(2)} km`:""})()}):P.dataKey==="tngRoute"&&P.type==="currency"?s.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent",children:Z(qe("tngRoute",P.type))}):P.dataKey==="tollPrice"&&P.type==="currency"?s.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent",children:Z(qe("tollPrice",P.type))}):s.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent",children:""})},P.id)),s.jsx(Zs,{className:"px-3 py-3 text-center table-header-footer-12px font-semibold tracking-wide border-t border-border sticky bottom-0 bg-white dark:bg-slate-900 shadow-sm text-foreground whitespace-nowrap",style:{textAlign:"center",fontSize:"10px"},children:s.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent",children:""})})]})})]}),!o&&s.jsxs("div",{className:"flex flex-col items-center gap-2 px-4 py-2 border-t border-blue-200 dark:border-blue-500/20 transition-smooth-fast",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[U>3&&s.jsx(O,{variant:"outline",size:"xs",onClick:()=>q(1),className:"pagination-button h-6 w-6 p-0","data-testid":"button-first-page",children:s.jsx(Eb,{className:"h-2.5 w-2.5"})}),s.jsx("div",{className:"flex items-center gap-0.5",children:(()=>{if(ue<=5){const ne=[];for(let te=1;te<=ue;te++)ne.push(te);return ne.map(te=>{const oe=te===U;return s.jsx(O,{variant:"outline",size:"xs",onClick:()=>q(te),className:`pagination-button page-number h-6 min-w-6 px-1.5 text-[10px] ${oe?"active":""}`,"data-testid":`button-page-${te}`,children:te},te)})}let E=Math.max(1,U-3),Q=Math.min(ue,E+5-1);Q-E<4&&(E=Math.max(1,Q-5+1));const W=[];for(let ne=E;ne<=Q;ne++)W.push(ne);return W.map(ne=>{const te=ne===U;return s.jsx(O,{variant:"outline",size:"xs",onClick:()=>q(ne),className:`pagination-button page-number h-6 min-w-6 px-1.5 text-[10px] ${te?"active":""}`,"data-testid":`button-page-${ne}`,children:ne},ne)})})()}),ue-U>=3&&s.jsx(O,{variant:"outline",size:"xs",onClick:()=>q(ue),className:"pagination-button h-6 w-6 p-0","data-testid":"button-last-page",children:s.jsx(Rb,{className:"h-2.5 w-2.5"})})]}),s.jsxs("div",{className:"text-[10px] font-medium text-muted-foreground whitespace-nowrap",children:[U," of ",ue]})]})]})}),s.jsx(ze,{open:ae,onOpenChange:J,children:s.jsxs(Me,{className:"sm:max-w-[425px] transition-smooth-fast",children:[s.jsxs(_e,{children:[s.jsx(Fe,{children:"Confirm Deletion"}),s.jsx(He,{children:"Are you sure you want to delete this row? This action cannot be undone."})]}),s.jsxs(Ye,{children:[s.jsx(O,{variant:"outline",onClick:ts,"data-testid":"button-cancel-delete",children:"Cancel"}),s.jsx(O,{variant:"destructive",onClick:Ke,"data-testid":"button-confirm-delete",children:"Delete"})]})]})})]})}const Ia=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:X("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ia.displayName="Card";const gN=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:X("flex flex-col space-y-1.5 p-6",e),...t}));gN.displayName="CardHeader";const bN=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:X("text-2xl font-semibold leading-none tracking-tight",e),...t}));bN.displayName="CardTitle";const xN=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:X("text-sm text-muted-foreground",e),...t}));xN.displayName="CardDescription";const Ta=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:X("p-6 pt-0",e),...t}));Ta.displayName="CardContent";const vN=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:X("flex items-center p-6 pt-0",e),...t}));vN.displayName="CardFooter";const la=h.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:X("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));la.displayName="Textarea";var nl="Radio",[yN,sh]=er(nl),[wN,kN]=yN(nl),nh=h.forwardRef((e,t)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:o,disabled:i,value:l="on",onCheck:c,form:d,...p}=e,[u,m]=h.useState(null),f=ut(t,g=>m(g)),b=h.useRef(!1),x=u?d||!!u.closest("form"):!0;return s.jsxs(wN,{scope:r,checked:a,disabled:i,children:[s.jsx(Xe.button,{type:"button",role:"radio","aria-checked":a,"data-state":ih(a),"data-disabled":i?"":void 0,disabled:i,value:l,...p,ref:f,onClick:Pe(e.onClick,g=>{a||c==null||c(),x&&(b.current=g.isPropagationStopped(),b.current||g.stopPropagation())})}),x&&s.jsx(jN,{control:u,bubbles:!b.current,name:n,value:l,checked:a,required:o,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});nh.displayName=nl;var ah="RadioIndicator",oh=h.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:n,...a}=e,o=kN(ah,r);return s.jsx(Wt,{present:n||o.checked,children:s.jsx(Xe.span,{"data-state":ih(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t})})});oh.displayName=ah;var jN=e=>{const{control:t,checked:r,bubbles:n=!0,...a}=e,o=h.useRef(null),i=ii(r),l=li(t);return h.useEffect(()=>{const c=o.current,d=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(d,"checked").set;if(i!==r&&u){const m=new Event("click",{bubbles:n});u.call(c,r),c.dispatchEvent(m)}},[i,r,n]),s.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ih(e){return e?"checked":"unchecked"}var NN=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],al="RadioGroup",[CN,RC]=er(al,[fa,sh]),lh=fa(),ch=sh(),[SN,EN]=CN(al),dh=h.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:o,required:i=!1,disabled:l=!1,orientation:c,dir:d,loop:p=!0,onValueChange:u,...m}=e,f=lh(r),b=ci(d),[x,g]=Ms({prop:o,defaultProp:a,onChange:u});return s.jsx(SN,{scope:r,name:n,required:i,disabled:l,value:x,onValueChange:g,children:s.jsx(Pd,{asChild:!0,...f,orientation:c,dir:b,loop:p,children:s.jsx(Xe.div,{role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:b,...m,ref:t})})})});dh.displayName=al;var uh="RadioGroupItem",mh=h.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:n,...a}=e,o=EN(uh,r),i=o.disabled||n,l=lh(r),c=ch(r),d=h.useRef(null),p=ut(t,d),u=o.value===a.value,m=h.useRef(!1);return h.useEffect(()=>{const f=x=>{NN.includes(x.key)&&(m.current=!0)},b=()=>m.current=!1;return document.addEventListener("keydown",f),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",b)}},[]),s.jsx(Ad,{asChild:!0,...l,focusable:!i,active:u,children:s.jsx(nh,{disabled:i,required:o.required,checked:u,...c,...a,name:o.name,ref:p,onCheck:()=>o.onValueChange(a.value),onKeyDown:Pe(f=>{f.key==="Enter"&&f.preventDefault()}),onFocus:Pe(a.onFocus,()=>{var f;m.current&&((f=d.current)==null||f.click())})})})});mh.displayName=uh;var RN="RadioGroupIndicator",ph=h.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...n}=e,a=ch(r);return s.jsx(oh,{...a,...n,ref:t})});ph.displayName=RN;var hh=dh,fh=mh,DN=ph;const us=h.forwardRef(({className:e,...t},r)=>s.jsx(hh,{className:X("grid gap-2",e),...t,ref:r}));us.displayName=hh.displayName;const Lt=h.forwardRef(({className:e,...t},r)=>s.jsx(fh,{ref:r,className:X("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(DN,{className:"flex items-center justify-center",children:s.jsx(Bu,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Lt.displayName=fh.displayName;var ol="Tabs",[PN,DC]=er(ol,[fa]),gh=fa(),[AN,il]=PN(ol),bh=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=e,p=ci(l),[u,m]=Ms({prop:n,onChange:a,defaultProp:o});return s.jsx(AN,{scope:r,baseId:Dd(),value:u,onValueChange:m,orientation:i,dir:p,activationMode:c,children:s.jsx(Xe.div,{dir:p,"data-orientation":i,...d,ref:t})})});bh.displayName=ol;var xh="TabsList",vh=h.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,o=il(xh,r),i=gh(r);return s.jsx(Pd,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:n,children:s.jsx(Xe.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});vh.displayName=xh;var yh="TabsTrigger",wh=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...o}=e,i=il(yh,r),l=gh(r),c=Nh(i.baseId,n),d=Ch(i.baseId,n),p=n===i.value;return s.jsx(Ad,{asChild:!0,...l,focusable:!a,active:p,children:s.jsx(Xe.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":d,"data-state":p?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...o,ref:t,onMouseDown:Pe(e.onMouseDown,u=>{!a&&u.button===0&&u.ctrlKey===!1?i.onValueChange(n):u.preventDefault()}),onKeyDown:Pe(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&i.onValueChange(n)}),onFocus:Pe(e.onFocus,()=>{const u=i.activationMode!=="manual";!p&&!a&&u&&i.onValueChange(n)})})})});wh.displayName=yh;var kh="TabsContent",jh=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:o,...i}=e,l=il(kh,r),c=Nh(l.baseId,n),d=Ch(l.baseId,n),p=n===l.value,u=h.useRef(p);return h.useEffect(()=>{const m=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(Wt,{present:a||p,children:({present:m})=>s.jsx(Xe.div,{"data-state":p?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:m&&o})})});jh.displayName=kh;function Nh(e,t){return`${e}-trigger-${t}`}function Ch(e,t){return`${e}-content-${t}`}var IN=bh,Sh=vh,Eh=wh,Rh=jh;const TN=IN,Dh=h.forwardRef(({className:e,...t},r)=>s.jsx(Sh,{ref:r,className:X("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Dh.displayName=Sh.displayName;const Xo=h.forwardRef(({className:e,...t},r)=>s.jsx(Eh,{ref:r,className:X("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Xo.displayName=Eh.displayName;const Jo=h.forwardRef(({className:e,...t},r)=>s.jsx(Rh,{ref:r,className:X("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Jo.displayName=Rh.displayName;function Ph({open:e,onOpenChange:t,onSave:r,onSaveMultiple:n}){const[a,o]=h.useState("single"),[i,l]=h.useState("image"),[c,d]=h.useState("url"),[p,u]=h.useState(""),[m,f]=h.useState(""),[b,x]=h.useState(""),[g,v]=h.useState([]),[y,w]=h.useState(""),[k,C]=h.useState(!1),N=h.useRef(null),{toast:S}=jt(),I=F=>F.includes("youtube.com")||F.includes("youtu.be")?"youtube":F.includes("vimeo.com")?"vimeo":F.includes(".mp4")||F.includes(".webm")||F.includes(".ogg")?"direct":"unknown",T=F=>new Promise((ae,J)=>{const ve=new FileReader;ve.onload=()=>ae(ve.result),ve.onerror=J,ve.readAsDataURL(F)}),_=async F=>{const ae=F.target.files;if(!(!ae||ae.length===0)){C(!0);try{if(a==="single"){const J=ae[0],ve=await T(J),be=ve.includes("data:")?ve.replace(/^data:([^;]+)/,`data:${J.type}`):ve;u(be),J.type.startsWith("video/")?l("video"):l("image"),S({title:"File Loaded",description:`${J.name} (${(J.size/1024/1024).toFixed(2)} MB)`})}else{const J=[];for(const ve of Array.from(ae)){const be=await T(ve),A=ve.type.startsWith("video/")?"video":"image",Ie=be.includes("data:")?be.replace(/^data:([^;]+)/,`data:${ve.type}`):be;J.push({url:Ie,caption:ve.name,type:A,mimeType:ve.type})}v([...g,...J]),S({title:"Files Loaded",description:`${ae.length} file(s) added to album`})}}catch{S({title:"Error",description:"Failed to load file(s)",variant:"destructive"})}finally{C(!1),N.current&&(N.current.value="")}}},V=()=>{if(a==="single"){if(!p.trim())return;const F=J=>{if(J.startsWith("data:")){const ve=J.match(/^data:([^;]+)/);return ve?ve[1]:void 0}},ae={url:p.trim(),caption:m.trim(),type:i,...i==="video"&&b.trim()&&{thumbnail:b.trim()},...F(p)&&{mimeType:F(p)}};r(ae)}else{if(g.length===0)return;n==null||n(g)}ce()},z=()=>{if(!p.trim())return;const F={url:p.trim(),caption:m.trim(),type:i,...i==="video"&&b.trim()&&{thumbnail:b.trim()}};v([...g,F]),u(""),f(""),x("")},le=F=>{v(g.filter((ae,J)=>J!==F))},U=()=>{const ae=y.split(`
`).filter(J=>J.trim()).map(J=>({url:J.trim(),caption:"",type:i}));v([...g,...ae]),w("")},ce=()=>{u(""),f(""),x(""),l("image"),v([]),w(""),o("single"),d("url"),C(!1),t(!1)},K=()=>{ce()};return s.jsx(ze,{open:e,onOpenChange:t,children:s.jsxs(Me,{className:"max-w-3m max-h-[90vh] flex flex-col bg-white/95 dark:bg-black/95 backdrop-blur-xl border border-gray-200 dark:border-white/10 shadow-2xl rounded-xl",children:[s.jsxs(_e,{className:"flex-shrink-0 text-center",children:[s.jsxs(Fe,{className:"flex items-center justify-center gap-2 text-center text-sm font-semibold",children:[a==="single"?s.jsx(rc,{className:"w-5 h-5"}):s.jsx(Qa,{className:"w-5 h-5"}),a==="single"?"Add Media":"Add Album"]}),s.jsx(He,{className:"text-center text-muted-foreground text-sm mt-2",children:a==="single"?"Upload an image or video to the gallery":"Create an album with multiple media items"})]}),s.jsx("div",{className:"mt-6 space-y-6 overflow-y-auto flex-1 pr-2 px-2",children:s.jsxs("div",{className:"bg-gray-50 dark:bg-black/50 backdrop-blur-sm border border-gray-200 dark:border-white/15 rounded-lg p-4",children:[s.jsx(ye,{className:"text-sm font-medium text-foreground/90 mb-3 block",children:" Upload Mode"}),s.jsxs(TN,{value:a,onValueChange:F=>o(F),className:"w-full",children:[s.jsxs(Dh,{className:"grid w-full grid-cols-2 bg-gray-100 dark:bg-white/5",children:[s.jsxs(Xo,{value:"single",className:"flex items-center gap-2",children:[s.jsx(Lb,{className:"w-4 h-4"}),"Single"]}),s.jsxs(Xo,{value:"album",className:"flex items-center gap-2",children:[s.jsx(Qa,{className:"w-4 h-4"}),"Album"]})]}),s.jsx(Jo,{value:"single",className:"mt-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(ye,{className:"text-sm font-medium text-foreground/90",children:" Upload Method"}),s.jsxs(us,{value:c,onValueChange:F=>{d(F),u("")},className:"flex gap-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Lt,{value:"url",id:"method-url"}),s.jsx(ye,{htmlFor:"method-url",className:"flex items-center gap-2 cursor-pointer",children:" URL"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Lt,{value:"file",id:"method-file"}),s.jsxs(ye,{htmlFor:"method-file",className:"flex items-center gap-2 cursor-pointer",children:[s.jsx(Ka,{className:"w-4 h-4 text-green-400"}),"Upload from Gallery"]})]})]})]}),c==="url"&&s.jsxs("div",{className:"space-y-3",children:[s.jsx(ye,{className:"text-sm font-medium text-foreground/90",children:" Media Type"}),s.jsxs(us,{value:i,onValueChange:F=>l(F),className:"flex gap-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Lt,{value:"image",id:"image"}),s.jsxs(ye,{htmlFor:"image",className:"flex items-center gap-2 cursor-pointer",children:[s.jsx(is,{className:"w-4 h-4 text-blue-400"}),"Image"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Lt,{value:"video",id:"video"}),s.jsxs(ye,{htmlFor:"video",className:"flex items-center gap-2 cursor-pointer",children:[s.jsx(Lo,{className:"w-4 h-4 text-purple-400"}),"Video"]})]})]})]}),c==="file"?s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{className:"text-sm font-medium text-foreground/90",children:" Select File"}),s.jsx("input",{ref:N,type:"file",accept:"image/*,video/*",onChange:_,className:"hidden"}),s.jsxs(O,{type:"button",onClick:()=>{var F;return(F=N.current)==null?void 0:F.click()},disabled:k,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white",children:[s.jsx(Ka,{className:"w-4 h-4 mr-2"}),k?"Processing...":"Choose from Gallery"]}),p&&s.jsx("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-500/30 rounded-lg",children:s.jsx("p",{className:"text-xs text-green-700 dark:text-green-300",children:' File loaded successfully! Add caption below and click "Add" to save.'})})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ye,{htmlFor:"url",className:"text-sm font-medium text-foreground/90",children:[" ",i==="video"?"Video URL":"Image URL"]}),s.jsx(Ae,{id:"url",type:"url",placeholder:i==="video"?"YouTube, Vimeo, or direct video URL...":"https://example.com/image.jpg",value:p,onChange:F=>u(F.target.value),className:"bg-white dark:bg-black/60 border-gray-300 dark:border-white/20 backdrop-blur-sm text-sm"}),i==="video"&&p&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:[" Detected: ",I(p)," video"]})]}),i==="video"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"thumbnail",className:"text-sm font-medium text-foreground/90",children:" Thumbnail URL (optional)"}),s.jsx(Ae,{id:"thumbnail",type:"url",placeholder:"https://example.com/thumbnail.jpg",value:b,onChange:F=>x(F.target.value),className:"bg-white dark:bg-black/60 border-gray-300 dark:border-white/20 backdrop-blur-sm text-sm"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"caption",className:"text-sm font-medium text-foreground/90",children:" Caption (optional)"}),s.jsx(la,{id:"caption",placeholder:"Enter a caption or description...",value:m,onChange:F=>f(F.target.value),rows:2,className:"bg-white dark:bg-black/60 border-gray-300 dark:border-white/20 backdrop-blur-sm text-sm"})]})]})}),s.jsx(Jo,{value:"album",className:"mt-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-green-50 dark:bg-black/20 backdrop-blur-sm border border-green-200 dark:border-white/10 rounded-lg p-3",children:[s.jsx(ye,{className:"text-sm font-medium text-foreground/90 mb-2 block",children:" Upload from Gallery"}),s.jsx("input",{type:"file",accept:"image/*,video/*",multiple:!0,onChange:_,className:"hidden",id:"album-file-input"}),s.jsxs(O,{type:"button",onClick:()=>{var F;return(F=document.getElementById("album-file-input"))==null?void 0:F.click()},disabled:k,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white",children:[s.jsx(Ka,{className:"w-4 h-4 mr-2"}),k?"Processing...":"Select Multiple Files"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ye,{className:"text-sm font-medium text-foreground/90",children:" Media Type for URL Input"}),s.jsxs(us,{value:i,onValueChange:F=>l(F),className:"flex gap-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Lt,{value:"image",id:"album-image"}),s.jsxs(ye,{htmlFor:"album-image",className:"flex items-center gap-2 cursor-pointer",children:[s.jsx(is,{className:"w-4 h-4 text-blue-400"}),"Images"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Lt,{value:"video",id:"album-video"}),s.jsxs(ye,{htmlFor:"album-video",className:"flex items-center gap-2 cursor-pointer",children:[s.jsx(Lo,{className:"w-4 h-4 text-purple-400"}),"Videos"]})]})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-black/20 backdrop-blur-sm border border-blue-200 dark:border-white/10 rounded-lg p-3",children:[s.jsx(ye,{className:"text-sm font-medium text-foreground/90 mb-2 block",children:"Add URL Item to Album"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{type:"url",placeholder:i==="video"?"Video URL...":"Image URL...",value:p,onChange:F=>u(F.target.value),className:"bg-white dark:bg-black/60 border-gray-300 dark:border-white/20 backdrop-blur-sm text-sm"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ae,{placeholder:"Caption (optional)",value:m,onChange:F=>f(F.target.value),className:"flex-1 bg-white dark:bg-black/40 border-gray-300 dark:border-white/15 backdrop-blur-sm"}),s.jsx(O,{type:"button",onClick:z,disabled:!p.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white",children:s.jsx(Tr,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"bg-purple-50 dark:bg-black/20 backdrop-blur-sm border border-purple-200 dark:border-white/10 rounded-lg p-3",children:[s.jsx(ye,{className:"text-sm font-medium text-foreground/90 mb-2 block",children:"Bulk Add URLs"}),s.jsx(la,{placeholder:"Paste multiple URLs (one per line)...",value:y,onChange:F=>w(F.target.value),rows:3,className:"bg-white dark:bg-black/60 border-gray-300 dark:border-white/20 backdrop-blur-sm text-sm"}),s.jsxs(O,{type:"button",onClick:U,disabled:!y.trim(),className:"mt-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white",size:"sm",children:[s.jsx(Qa,{className:"w-4 h-4 mr-2"}),"Add All"]})]}),g.length>0&&s.jsxs("div",{className:"bg-purple-50 dark:bg-black/20 backdrop-blur-sm border border-purple-200 dark:border-white/10 rounded-lg p-3",children:[s.jsxs(ye,{className:"text-sm font-medium text-foreground/90 mb-3 block",children:[" Album Preview (",g.length," items)"]}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:g.map((F,ae)=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-white/5 rounded border border-purple-200 dark:border-white/10",children:[F.type==="video"?s.jsx(ji,{className:"w-4 h-4 text-purple-400 flex-shrink-0"}):s.jsx(is,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}),s.jsx("span",{className:"text-xs text-foreground/70 truncate flex-1",children:F.caption||F.url}),s.jsx(O,{type:"button",variant:"ghost",size:"sm",onClick:()=>le(ae),className:"h-6 w-6 p-0 hover:bg-red-500/20",children:s.jsx(kt,{className:"w-3 h-3"})})]},ae))})]})]})})]})]})}),s.jsxs(Ye,{className:"space-x-3 flex-shrink-0 mt-6 border-t border-gray-200 dark:border-white/15 pt-4 bg-gray-50 dark:bg-black/50 backdrop-blur-sm rounded-b-xl -mx-6 -mb-6 px-6 py-4",children:[s.jsxs(O,{variant:"outline",onClick:K,className:"border-red-600 text-red-600 hover:bg-red-50 dark:border-red-500 dark:text-red-500 dark:hover:bg-red-950/30 backdrop-blur-sm",children:[s.jsx(kt,{className:"w-4 h-4 mr-2"}),"Cancel"]}),s.jsxs(O,{onClick:V,disabled:a==="single"?!p.trim():g.length===0,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white border-0 shadow-lg shadow-blue-500/30",children:[s.jsx(rc,{className:"w-4 h-4 mr-2"}),a==="single"?`Add ${i==="video"?"Video":"Image"}`:`Add Album (${g.length} items)`]})]})]})})}function ON({rowId:e,location:t,onClose:r,onAddImage:n}){const[a,o]=h.useState(!1),{toast:i}=jt(),l=async d=>{try{await n.mutateAsync({rowId:e,imageUrl:d.url,caption:d.caption}),i({title:"Media Added",description:"Media has been added successfully."}),o(!1),r()}catch{i({title:"Error",description:"Failed to add media.",variant:"destructive"})}},c=async d=>{try{for(const p of d)await n.mutateAsync({rowId:e,imageUrl:p.url,caption:p.caption});i({title:"Album Added",description:`${d.length} media items have been added successfully.`}),o(!1),r()}catch{i({title:"Error",description:"Failed to add some media items.",variant:"destructive"})}};return s.jsxs(s.Fragment,{children:[s.jsx(Ia,{className:"bg-card/90 backdrop-blur-xl border-2 border-border shadow-2xl rounded-xl mb-6","data-testid":"add-image-section",children:s.jsxs(Ta,{className:"p-6",children:[s.jsxs("h3",{className:"font-semibold mb-6 flex items-center text-foreground text-center justify-center text-sm",children:[s.jsx(is,{className:"w-4 h-4 mr-2 text-primary"})," Add Media to ",t||"Row"]}),s.jsxs("div",{className:"flex flex-col gap-6 items-center text-center",children:[s.jsxs("div",{className:"bg-muted/50 backdrop-blur-sm border border-border rounded-lg p-6",children:[s.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:" Add images or videos to this location"}),s.jsxs(O,{onClick:()=>o(!0),className:"bg-green-500 hover:bg-green-600 text-white","data-testid":"button-open-media-upload",children:[s.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Add Media"]})]}),s.jsx("div",{className:"flex gap-3",children:s.jsx(O,{variant:"outline",onClick:r,"data-testid":"button-cancel",children:"Cancel"})})]})]})}),s.jsx(Ph,{open:a,onOpenChange:o,onSave:l,onSaveMultiple:c})]})}function LN({rowId:e,images:t,location:r,onClose:n,onAddImage:a,onUpdateImage:o,onDeleteImage:i}){const[l,c]=h.useState("add"),[d,p]=h.useState(0),[u,m]=h.useState(""),[f,b]=h.useState(""),[x,g]=h.useState(!1),[v,y]=h.useState("single"),[w,k]=h.useState(!1),{toast:C}=jt(),N=K=>/\.(jpg|jpeg|png|gif|webp)(\?.*)?$/i.test(K)||K.includes("unsplash.com")||K.includes("images.unsplash.com"),S=async K=>{try{await a.mutateAsync({rowId:e,imageUrl:K.url,caption:K.caption}),C({title:"Media Added",description:"Media has been added successfully."}),k(!1)}catch{C({title:"Error",description:"Failed to add media.",variant:"destructive"})}},I=async K=>{try{for(const F of K)await a.mutateAsync({rowId:e,imageUrl:F.url,caption:F.caption});C({title:"Album Added",description:`${K.length} media items have been added successfully.`}),k(!1)}catch{C({title:"Error",description:"Failed to add some media items.",variant:"destructive"})}},T=K=>{var F,ae,J;if(K==="add"){k(!0);return}c(K),K==="edit"&&t.length>0?(b(((F=t[d])==null?void 0:F.caption)||""),m("")):K==="replace"&&t.length>0?(m(((ae=t[d])==null?void 0:ae.url)||""),b(((J=t[d])==null?void 0:J.caption)||"")):(m(""),b(""))},_=K=>{var ae,J,ve;const F=parseInt(K);p(F),l==="edit"?(b(((ae=t[F])==null?void 0:ae.caption)||""),m("")):l==="replace"&&(m(((J=t[F])==null?void 0:J.url)||""),b(((ve=t[F])==null?void 0:ve.caption)||""))},V=async()=>{if(l==="add"){if(!u.trim()){C({title:"Error",description:"Please enter an image URL.",variant:"destructive"});return}if(!N(u)){C({title:"Error",description:"Please enter a valid image URL.",variant:"destructive"});return}try{await a.mutateAsync({rowId:e,imageUrl:u,caption:f.trim()}),C({title:"Image Added",description:"Image has been added successfully."}),m(""),b("")}catch{C({title:"Error",description:"Failed to add image.",variant:"destructive"})}}else if(l==="edit")try{await o.mutateAsync({rowId:e,imageIndex:d,caption:f.trim()}),C({title:"Caption Updated",description:"Image caption has been updated successfully."})}catch{C({title:"Error",description:"Failed to update caption.",variant:"destructive"})}else if(l==="replace"){if(!u.trim()){C({title:"Error",description:"Please enter an image URL.",variant:"destructive"});return}if(!N(u)){C({title:"Error",description:"Please enter a valid image URL.",variant:"destructive"});return}try{await o.mutateAsync({rowId:e,imageIndex:d,imageUrl:u,caption:f.trim()}),C({title:"Image Replaced",description:"Image has been replaced successfully."})}catch{C({title:"Error",description:"Failed to replace image.",variant:"destructive"})}}},z=K=>{y(K),g(!0)},le=async()=>{try{v==="all"?(await i.mutateAsync({rowId:e}),C({title:"All Images Deleted",description:"All images have been deleted successfully."}),n()):(await i.mutateAsync({rowId:e,imageIndex:d}),C({title:"Image Deleted",description:"Image has been deleted successfully."}),t.length<=1&&n()),g(!1)}catch{C({title:"Error",description:"Failed to delete image(s).",variant:"destructive"})}},U=a.isPending||o.isPending||i.isPending,ce=(()=>{var K,F;if(l==="add")return u.trim().length>0;if(l==="edit"){const ae=((K=t[d])==null?void 0:K.caption)||"";return f!==ae}else if(l==="replace"){const ae=((F=t[d])==null?void 0:F.url)||"";return u!==ae}return!1})();return s.jsxs(s.Fragment,{children:[s.jsx(ze,{open:!0,onOpenChange:K=>!K&&n(),children:s.jsxs(Me,{className:"w-[90vw] max-w-[600px] max-h-[90vh] overflow-y-auto animate-in zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:zoom-out-90 duration-300 transition-all bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-3xl",children:[s.jsx("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/60 via-white/40 to-white/50 dark:from-black/40 dark:via-black/20 dark:to-black/30 backdrop-blur-3xl border-0 shadow-inner"}),s.jsx(_e,{className:"relative z-10",children:s.jsxs(Fe,{className:"text-xs font-semibold flex items-center justify-center gap-2",children:[s.jsx(is,{className:"w-4 h-4 text-blue-400"})," Manage Media for ",r||"Row"]})}),s.jsxs("div",{className:"relative z-10 flex flex-col gap-4 py-4",children:[s.jsxs("div",{className:"bg-white/40 dark:bg-slate-800/40 backdrop-blur-sm border border-blue-400/20 dark:border-blue-500/20 rounded-lg p-3",children:[s.jsx("label",{className:"text-xs font-medium text-foreground/90 mb-2 block",children:" Action:"}),s.jsxs(As,{value:l,onValueChange:T,children:[s.jsx(Jr,{className:"bg-white/60 dark:bg-slate-700/60 backdrop-blur-sm border-blue-400/30 dark:border-blue-500/30 text-xs",children:s.jsx(Is,{})}),s.jsxs(Zr,{children:[s.jsx(wt,{value:"add",children:" Add New Media"}),t.length>0&&s.jsx(wt,{value:"edit",children:" Edit Caption"}),t.length>0&&s.jsx(wt,{value:"replace",children:" Replace Media"})]})]})]}),(l==="edit"||l==="replace")&&t.length>1&&s.jsxs("div",{className:"bg-white/40 dark:bg-slate-800/40 backdrop-blur-sm border border-blue-400/20 dark:border-blue-500/20 rounded-lg p-3",children:[s.jsx("label",{className:"text-xs font-medium text-foreground/90 mb-2 block",children:" Select Media:"}),s.jsxs(As,{value:d.toString(),onValueChange:_,children:[s.jsx(Jr,{className:"bg-white/60 dark:bg-slate-700/60 backdrop-blur-sm border-blue-400/30 dark:border-blue-500/30 text-xs",children:s.jsx(Is,{})}),s.jsx(Zr,{children:t.map((K,F)=>s.jsxs(wt,{value:F.toString(),children:[K.type==="video"?"":""," Item ",F+1," ",K.caption?`- ${K.caption}`:""]},F))})]})]}),(l==="edit"||l==="replace")&&t[d]&&s.jsxs("div",{className:"bg-white/40 dark:bg-slate-800/40 backdrop-blur-sm border border-blue-400/20 dark:border-blue-500/20 rounded-lg p-3",children:[s.jsxs("label",{className:"text-xs font-medium text-foreground/90 mb-2 block",children:[" Current ",t[d].type==="video"?"Video":"Image",":"]}),t[d].type==="video"?s.jsxs("div",{className:"relative",children:[s.jsx("video",{src:t[d].url,className:"w-32 h-24 object-cover border border-white/20 rounded-lg",controls:!1,poster:t[d].thumbnail}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 rounded-lg",children:s.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:s.jsx("div",{className:"w-0 h-0 border-l-[6px] border-l-white border-y-[4px] border-y-transparent ml-1"})})})]}):s.jsx("img",{src:t[d].url,alt:t[d].caption||"Current image",className:"w-32 h-24 object-cover border border-white/20 rounded-lg"})]}),(l==="add"||l==="replace")&&s.jsxs("div",{className:"bg-white/40 dark:bg-slate-800/40 backdrop-blur-sm border border-blue-400/20 dark:border-blue-500/20 rounded-lg p-3",children:[s.jsxs("label",{className:"text-xs font-medium text-foreground/90 mb-2 block",children:[" ",l==="add"?"Media URL:":"New Media URL:"]}),s.jsx(Ae,{type:"url",placeholder:"Image, video, YouTube, or Vimeo URL...",value:u,onChange:K=>m(K.target.value),className:"bg-white/60 dark:bg-slate-700/60 backdrop-blur-sm border-blue-400/30 dark:border-blue-500/30 w-full text-xs","data-testid":"input-image-url"}),u&&!N(u)&&s.jsx("p",{className:"text-amber-400 text-xs mt-2",children:" This looks like a video URL. For best compatibility, use direct image formats: jpg, png, gif, webp"})]}),s.jsxs("div",{className:"bg-white/40 dark:bg-slate-800/40 backdrop-blur-sm border border-blue-400/20 dark:border-blue-500/20 rounded-lg p-3",children:[s.jsx("label",{className:"text-xs font-medium text-foreground/90 mb-2 block",children:" Caption:"}),s.jsx(Ae,{type:"text",placeholder:"Add caption (optional)...",value:f,onChange:K=>b(K.target.value),className:"bg-white/60 dark:bg-slate-700/60 backdrop-blur-sm border-blue-400/30 dark:border-blue-500/30 w-full text-xs","data-testid":"input-image-caption"})]}),t.length>0&&s.jsxs("div",{className:"bg-red-900/20 backdrop-blur-sm border border-red-500/30 rounded-lg p-3",children:[s.jsx("label",{className:"text-xs font-medium text-red-400 mb-2 block",children:" Delete Options:"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(O,{variant:"destructive",onClick:()=>z("single"),disabled:U,className:"flex-1 bg-transparent hover:bg-red-600/20 backdrop-blur-sm border-transparent text-red-400 hover:text-red-300 text-xs","data-testid":"button-delete-single",children:[s.jsx(Oo,{className:"w-3 h-3 mr-1"}),"Delete This Item"]}),s.jsxs(O,{variant:"destructive",onClick:()=>z("all"),disabled:U,className:"flex-1 bg-transparent hover:bg-red-600/20 backdrop-blur-sm border-transparent text-red-400 hover:text-red-300 text-xs","data-testid":"button-delete-all",children:[s.jsx(Oo,{className:"w-3 h-3 mr-1"}),"Delete All Items"]})]})]})]}),s.jsxs(Ye,{className:"relative z-10 flex gap-2",children:[s.jsxs(O,{variant:"outline",onClick:n,className:"bg-transparent border-transparent text-red-500 hover:bg-red-500/10 backdrop-blur-sm text-xs","data-testid":"button-cancel",disabled:U,children:[s.jsx(kt,{className:"w-3 h-3 mr-1"}),"Cancel"]}),s.jsx(O,{onClick:V,disabled:U,className:`flex-1 bg-transparent backdrop-blur-sm border-transparent text-xs transition-all ${ce?"text-green-400 hover:text-green-300 hover:bg-green-600/20":"text-gray-400 dark:text-gray-500 hover:bg-gray-500/10"}`,"data-testid":"button-submit",children:U?s.jsx(rh,{type:"triple"}):s.jsxs(s.Fragment,{children:[l==="add"&&s.jsx(Tr,{className:"w-3 h-3 mr-1"}),l==="edit"&&s.jsx(ka,{className:"w-3 h-3 mr-1"}),l==="replace"&&s.jsx(Ku,{className:"w-3 h-3 mr-1"}),l==="add"?"Add Media":l==="edit"?"Update Caption":"Replace Media"]})})]})]})}),s.jsx(ze,{open:x,onOpenChange:g,children:s.jsxs(Me,{className:"sm:max-w-[425px] bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-3xl",children:[s.jsx("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/60 via-white/40 to-white/50 dark:from-black/40 dark:via-black/20 dark:to-black/30 backdrop-blur-3xl border-0 shadow-inner"}),s.jsxs(_e,{className:"relative z-10",children:[s.jsx(Fe,{className:"text-xs font-semibold",children:"Confirm Deletion"}),s.jsx(He,{className:"text-xs",children:v==="all"?"Are you sure you want to delete ALL images? This action cannot be undone.":"Are you sure you want to delete this image? This action cannot be undone."})]}),s.jsxs(Ye,{className:"relative z-10",children:[s.jsx(O,{variant:"outline",onClick:()=>g(!1),"data-testid":"button-cancel-delete",disabled:U,className:"bg-transparent border-transparent hover:bg-gray-500/10 backdrop-blur-sm text-xs",children:"Cancel"}),s.jsx(O,{variant:"destructive",onClick:le,"data-testid":"button-confirm-delete",disabled:U,className:"bg-transparent hover:bg-red-600/20 backdrop-blur-sm border-transparent text-red-400 hover:text-red-300 text-xs",children:"Delete"})]})]})}),s.jsx(Ph,{open:w,onOpenChange:k,onSave:S,onSaveMultiple:I})]})}var ll="Switch",[MN,PC]=er(ll),[_N,FN]=MN(ll),Ah=h.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:p,...u}=e,[m,f]=h.useState(null),b=ut(t,w=>f(w)),x=h.useRef(!1),g=m?p||!!m.closest("form"):!0,[v=!1,y]=Ms({prop:a,defaultProp:o,onChange:d});return s.jsxs(_N,{scope:r,checked:v,disabled:l,children:[s.jsx(Xe.button,{type:"button",role:"switch","aria-checked":v,"aria-required":i,"data-state":Oh(v),"data-disabled":l?"":void 0,disabled:l,value:c,...u,ref:b,onClick:Pe(e.onClick,w=>{y(k=>!k),g&&(x.current=w.isPropagationStopped(),x.current||w.stopPropagation())})}),g&&s.jsx(zN,{control:m,bubbles:!x.current,name:n,value:c,checked:v,required:i,disabled:l,form:p,style:{transform:"translateX(-100%)"}})]})});Ah.displayName=ll;var Ih="SwitchThumb",Th=h.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=FN(Ih,r);return s.jsx(Xe.span,{"data-state":Oh(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});Th.displayName=Ih;var zN=e=>{const{control:t,checked:r,bubbles:n=!0,...a}=e,o=h.useRef(null),i=ii(r),l=li(t);return h.useEffect(()=>{const c=o.current,d=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(d,"checked").set;if(i!==r&&u){const m=new Event("click",{bubbles:n});u.call(c,r),c.dispatchEvent(m)}},[i,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Oh(e){return e?"checked":"unchecked"}var Lh=Ah,$N=Th;const Oa=h.forwardRef(({className:e,...t},r)=>s.jsx(Lh,{className:X("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:s.jsx($N,{className:X("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Oa.displayName=Lh.displayName;function Mh({open:e,onOpenChange:t,columns:r,visibleColumns:n,onApplyChanges:a,editMode:o=!1}){const[i,l]=h.useState([]),[c,d]=h.useState([]),p=["ID","No","Route","Code","Location","Delivery","Destination"];h.useEffect(()=>{if(r.length>0){const v=o?["longitude","latitude","tollPrice"]:["longitude","latitude","info","tollPrice"],y=r.filter(w=>!v.includes(w.dataKey)).sort((w,k)=>w.sortOrder-k.sortOrder).map(w=>({id:w.id,name:w.name,dataKey:w.dataKey,visible:n.includes(w.id),isCore:p.includes(w.name)}));l(y),d(y)}},[r,n,o]);const u=v=>{l(y=>y.map(w=>w.id===v?{...w,visible:!w.visible}:w))},m=v=>{if(!v.destination)return;const y=Array.from(i),[w]=y.splice(v.source.index,1);y.splice(v.destination.index,0,w),l(y)},f=()=>{const v=i.filter(w=>w.visible).map(w=>w.id),y=i.map(w=>w.id);a(v,y),t(!1)},b=()=>{const v=o?["longitude","latitude","tollPrice"]:["longitude","latitude","info","tollPrice"],y=r.filter(w=>!v.includes(w.dataKey)).sort((w,k)=>w.sortOrder-k.sortOrder).map(w=>({id:w.id,name:w.name,dataKey:w.dataKey,visible:!0,isCore:p.includes(w.name)}));l(y)},x=i.filter(v=>v.visible).length,g=()=>{if(i.length!==c.length)return!0;if(c.length===0)return!1;for(const w of i){const k=c.find(C=>C.id===w.id);if(!k||k.visible!==w.visible)return!0}const v=c.map(w=>w.id),y=i.map(w=>w.id);if(v.length!==y.length)return!0;for(let w=0;w<v.length;w++)if(v[w]!==y[w])return!0;return!1};return s.jsx(ze,{open:e,onOpenChange:t,children:s.jsxs(Me,{className:"max-w-md bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-3xl transition-smooth",children:[s.jsx("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/60 via-white/40 to-white/50 dark:from-black/40 dark:via-black/20 dark:to-black/30 backdrop-blur-3xl border-0 shadow-inner"}),s.jsxs(_e,{children:[s.jsxs(Fe,{className:"text-lg font-semibold flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[s.jsx(Ab,{className:"w-6 h-6"}),"Customize Columns",s.jsxs("span",{className:"text-sm text-muted-foreground font-normal",children:["(",x," of ",i.length," visible)"]})]}),s.jsx(He,{className:"text-base",children:"Toggle column visibility and drag to reorder them in your table."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(xp,{onDragEnd:m,children:s.jsx(Ho,{droppableId:"column-customization",children:v=>s.jsxs("div",{...v.droppableProps,ref:v.innerRef,className:"space-y-2 max-h-80 overflow-y-auto",children:[i.map((y,w)=>s.jsx(qo,{draggableId:y.id,index:w,children:(k,C)=>s.jsxs("div",{ref:k.innerRef,...k.draggableProps,className:`flex items-center justify-between p-3 rounded-lg border bg-muted/30 hover:bg-muted/50 transition-colors ${C.isDragging?"shadow-lg border-blue-500 dark:border-blue-400":"border-border"} ${y.visible?"":"opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{...k.dragHandleProps,className:"cursor-grab active:cursor-grabbing text-muted-foreground hover:text-foreground",children:s.jsx(qu,{className:"w-4 h-4"})}),s.jsx(ye,{htmlFor:`column-${y.id}`,className:"text-sm font-medium cursor-pointer",children:y.name})]}),s.jsx(Oa,{id:`column-${y.id}`,checked:y.visible,onCheckedChange:()=>u(y.id),disabled:y.isCore&&y.visible&&x<=1,"data-testid":`switch-column-${y.dataKey}`})]})},y.id)),v.placeholder]})})}),s.jsxs("div",{className:"text-sm bg-blue-50/50 dark:bg-blue-950/30 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:[s.jsx("strong",{className:"text-blue-900 dark:text-blue-100",children:"Tip:"})," At least one column must remain visible. Core columns are recommended to stay visible for the best experience."]})]}),s.jsx(Ye,{className:"flex justify-center",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(O,{variant:"outline",onClick:b,size:"sm",className:"w-8 h-8 p-0","data-testid":"button-reset-columns",title:"Reset columns",children:s.jsx(Ku,{className:"w-4 h-4"})}),s.jsx(O,{variant:"outline",onClick:()=>t(!1),size:"sm",className:"w-8 h-8 p-0","data-testid":"button-cancel-customize",title:"Cancel",children:s.jsx(kt,{className:"w-4 h-4"})}),s.jsx(O,{onClick:f,size:"sm",className:`w-8 h-8 p-0 transition-all duration-200 ${g()?"bg-transparent border border-border/50 text-green-500 hover:text-green-400 hover:bg-green-500/10":"bg-transparent border border-border/50 text-muted-foreground hover:text-foreground hover:bg-background/50"}`,"data-testid":"button-apply-customize",title:"Apply changes",children:s.jsx(Sb,{className:"w-4 h-4"})})]})})]})})}function _h({open:e,onOpenChange:t,onSuccess:r,title:n,description:a}){const[o,i]=h.useState(""),[l,c]=h.useState(!1),{toast:d}=jt(),p="Acun97",u=f=>{f.preventDefault(),o===p?(r(),t(!1),i(""),d({title:"Access Granted",description:"You now have access to restricted features."})):(d({title:"Access Denied",description:"Incorrect password. Please try again.",variant:"destructive"}),i(""))},m=()=>{i(""),t(!1)};return s.jsx(ze,{open:e,onOpenChange:t,children:s.jsxs(Me,{className:"w-[80vw] max-w-[80vw] animate-in zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:zoom-out-90 duration-300 transition-all bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-3xl",children:[s.jsx("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/60 via-white/40 to-white/50 dark:from-black/40 dark:via-black/20 dark:to-black/30 backdrop-blur-3xl border-0 shadow-inner"}),s.jsxs(_e,{className:"relative z-10",children:[s.jsxs(Fe,{className:"flex items-center gap-2",children:[s.jsx(Ub,{className:"w-5 h-5 text-primary"}),n]}),s.jsx(He,{className:"text-sm text-muted-foreground",children:a})]}),s.jsx("div",{className:"space-y-4 relative z-10",children:s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ae,{type:l?"text":"password",placeholder:"Enter password...",value:o,onChange:f=>i(f.target.value),className:"pr-10 bg-white/10 dark:bg-black/10 backdrop-blur-sm border-transparent","data-testid":"password-input",autoFocus:!0}),s.jsx(O,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>c(!l),"data-testid":"toggle-password-visibility",children:l?s.jsx(Ob,{className:"h-4 w-4"}):s.jsx(cn,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(O,{type:"button",variant:"outline",onClick:m,className:"bg-transparent backdrop-blur-sm border-transparent text-red-500 hover:bg-red-500/10","data-testid":"cancel-password",children:"Cancel"}),s.jsx(O,{type:"submit",disabled:!o.trim(),className:"transition-all duration-200 backdrop-blur-sm border-transparent bg-transparent text-green-500 hover:bg-green-500/10 disabled:text-muted-foreground disabled:hover:bg-transparent","data-testid":"submit-password",children:"Unlock"})]})]})})]})})}function BN({onCreateColumn:e,disabled:t}){const[r,n]=h.useState(!1),[a,o]=h.useState(""),[i,l]=h.useState(""),[c,d]=h.useState("text"),[p,u]=h.useState(""),[m,f]=h.useState(!1),{toast:b}=jt(),x=[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"currency",label:"Currency (MYR)"},{value:"select",label:"Select Options"},{value:"images",label:"Images"}],g=async w=>{if(w.preventDefault(),!a.trim()){b({title:"Error",description:"Column name is required.",variant:"destructive"});return}if(!i.trim()){b({title:"Error",description:"Data key is required.",variant:"destructive"});return}f(!0);try{const k={name:a.trim(),dataKey:i.trim(),type:c};c==="select"&&p.trim()&&(k.options=p.split(`
`).map(C=>C.trim()).filter(C=>C.length>0)),await e(k),o(""),l(""),d("text"),u(""),n(!1),b({title:"Success",description:"Column created successfully!"})}catch(k){console.error("Error creating column:",k),b({title:"Error",description:"Failed to create column. Please try again.",variant:"destructive"})}finally{f(!1)}},v=w=>w.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_{2,}/g,"_").replace(/^_|_$/g,""),y=w=>{o(w),w&&!i&&l(v(w))};return s.jsxs(ze,{open:r,onOpenChange:n,children:[s.jsx(Ji,{asChild:!0,children:s.jsx(O,{variant:"outline",size:"sm",className:"btn-glass w-8 h-8 p-0 pagination-button md:w-20 md:h-9 md:px-3",disabled:t,"data-testid":"button-add-column",title:"Add new field",children:s.jsx(Zl,{className:"w-4 h-4"})})}),s.jsxs(Me,{className:"max-w-md",children:[s.jsx(_e,{children:s.jsxs(Fe,{className:"flex items-center gap-2",children:[s.jsx(Zl,{className:"w-5 h-5"}),"Add New Field"]})}),s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"column-name",children:"Field Name"}),s.jsx(Ae,{id:"column-name",placeholder:"Enter column name...",value:a,onChange:w=>y(w.target.value),"data-testid":"input-column-name",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"data-key",children:"Data Key"}),s.jsx(Ae,{id:"data-key",placeholder:"data_key",value:i,onChange:w=>l(w.target.value),"data-testid":"input-data-key",required:!0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique identifier for this column (auto-generated from name)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"column-type",children:"Column Type"}),s.jsxs(As,{value:c,onValueChange:d,children:[s.jsx(Jr,{"data-testid":"select-column-type",children:s.jsx(Is,{placeholder:"Select column type"})}),s.jsx(Zr,{children:x.map(w=>s.jsx(wt,{value:w.value,children:w.label},w.value))})]})]}),c==="select"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"options",children:"Select Options"}),s.jsx(la,{id:"options",placeholder:`Enter options (one per line)
Option 1
Option 2
Option 3`,value:p,onChange:w=>u(w.target.value),"data-testid":"textarea-options",rows:4}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter each option on a new line"})]}),c==="currency"&&s.jsx("div",{className:"p-3 bg-muted rounded-md",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:" Currency columns will display values in Malaysian Ringgit (MYR) format"})}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(O,{type:"button",variant:"outline",onClick:()=>n(!1),disabled:m,"data-testid":"button-cancel-column",children:"Cancel"}),s.jsx(O,{type:"submit",disabled:m,"data-testid":"button-create-column",children:m?"Creating...":"Create Column"})]})]})]})]})}function UN({open:e,onOpenChange:t}){const[r,n]=h.useState("/share/ko58de"),[a,o]=h.useState("/custom/8kqk7x"),{toast:i}=jt();h.useEffect(()=>{if(e){const c=localStorage.getItem("quickLink_share")||"/share/ko58de",d=localStorage.getItem("quickLink_custom")||"/custom/8kqk7x";n(c),o(d)}},[e]);const l=()=>{const c=r.trim(),d=a.trim();if(!c||!d){i({title:"Validation error",description:"URLs cannot be empty.",variant:"destructive"});return}localStorage.setItem("quickLink_share",c),localStorage.setItem("quickLink_custom",d),i({title:"Quick links saved",description:"Your custom URLs have been updated."}),window.dispatchEvent(new CustomEvent("quickLinksUpdated")),t(!1)};return s.jsx(ze,{open:e,onOpenChange:t,children:s.jsxs(Me,{className:"sm:max-w-[500px] animate-in zoom-in-95 duration-300 data-[state=closed]:animate-out data-[state=closed]:zoom-out-90 bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-3xl",children:[s.jsxs("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/70 via-white/50 to-white/60 dark:from-black/50 dark:via-black/30 dark:to-black/40 border-0 shadow-[inset_0_1px_1px_rgba(255,255,255,0.3),inset_0_-1px_1px_rgba(0,0,0,0.1)]",style:{backdropFilter:"blur(40px) saturate(180%)",WebkitBackdropFilter:"blur(40px) saturate(180%)"},children:[s.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/40 dark:via-white/20 to-transparent"}),s.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-tr from-blue-500/5 via-transparent to-purple-500/5 dark:from-blue-400/10 dark:via-transparent dark:to-purple-400/10"})]}),s.jsxs(_e,{children:[s.jsx(Fe,{children:"Edit Quick Links"}),s.jsx(He,{children:"Customize the URLs for your quick access links in the menu."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"shareUrl",className:"text-sm font-medium",children:"Share Link Page URL"}),s.jsx(Ae,{id:"shareUrl",value:r,onChange:c=>n(c.target.value),placeholder:"/share/ko58de",className:"h-9"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Example: /share/abc123 or https://example.com/share/xyz"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"customUrl",className:"text-sm font-medium",children:"Custom Page URL"}),s.jsx(Ae,{id:"customUrl",value:a,onChange:c=>o(c.target.value),placeholder:"/custom/8kqk7x",className:"h-9"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Example: /custom/def456 or https://example.com/custom/abc"})]})]}),s.jsxs(Ye,{children:[s.jsx(O,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(O,{onClick:l,children:"Save Changes"})]})]})})}const ca=T0,da=O0,GN=Od,VN=L0,Fh=h.forwardRef(({className:e,inset:t,children:r,...n},a)=>s.jsxs(Id,{ref:a,className:X("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n,children:[r,s.jsx(Kn,{className:"ml-auto"})]}));Fh.displayName=Id.displayName;const zh=h.forwardRef(({className:e,...t},r)=>s.jsx(Td,{ref:r,className:X("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));zh.displayName=Td.displayName;const bn=h.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(Od,{children:s.jsx(Ld,{ref:n,sideOffset:t,className:X("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...r})}));bn.displayName=Ld.displayName;const et=h.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(Md,{ref:n,className:X("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r}));et.displayName=Md.displayName;const qN=h.forwardRef(({className:e,children:t,checked:r,...n},a)=>s.jsxs(_d,{ref:a,className:X("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Fd,{children:s.jsx(Ir,{className:"h-4 w-4"})})}),t]}));qN.displayName=_d.displayName;const WN=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(zd,{ref:n,className:X("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Fd,{children:s.jsx(Bu,{className:"h-2 w-2 fill-current"})})}),t]}));WN.displayName=zd.displayName;const HN=h.forwardRef(({className:e,inset:t,...r},n)=>s.jsx($d,{ref:n,className:X("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));HN.displayName=$d.displayName;const Ut=h.forwardRef(({className:e,...t},r)=>s.jsx(Bd,{ref:r,className:X("-mx-1 my-1 h-px bg-muted",e),...t}));Ut.displayName=Bd.displayName;function KN({editMode:e,onEditModeRequest:t,onShowCustomization:r,onAddRow:n,onSaveData:a,onGenerateTng:o,onAddColumn:i,onOptimizeRoute:l,onCalculateTolls:c,onSaveLayout:d,onBulkColorEdit:p,onSavedLinks:u,onShowTutorial:m,isAuthenticated:f,theme:b,onToggleTheme:x}){const[g,v]=h.useState(new Date),[,y]=mi(),[w,k]=h.useState(!1),[C,N]=h.useState("/share/ko58de"),[S,I]=h.useState("/custom/8kqk7x"),[T,_]=h.useState(!1);h.useEffect(()=>{const z=setInterval(()=>{v(new Date)},1e3);return()=>clearInterval(z)},[]),h.useEffect(()=>{const z=localStorage.getItem("quickLink_share")||"/share/ko58de",le=localStorage.getItem("quickLink_custom")||"/custom/8kqk7x";N(z),I(le);const U=()=>{const ce=localStorage.getItem("quickLink_share")||"/share/ko58de",K=localStorage.getItem("quickLink_custom")||"/custom/8kqk7x";N(ce),I(K)};return window.addEventListener("quickLinksUpdated",U),()=>{window.removeEventListener("quickLinksUpdated",U)}},[]);const V=z=>{try{z.startsWith("http://")||z.startsWith("https://")?window.open(z,"_blank"):y(z)}catch(le){console.error("Navigation error:",le)}};return s.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 w-full border-b-2 border-blue-500/50 dark:border-blue-400/50 bg-gradient-to-r from-blue-500/10 via-blue-600/10 to-blue-700/10 dark:from-blue-500/20 dark:via-blue-600/20 dark:to-blue-700/20 backdrop-blur supports-[backdrop-filter]:bg-background/60 shadow-lg shadow-blue-500/20",children:[s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex h-14 items-center justify-between text-[12px]",children:[s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("div",{className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[s.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-none overflow-hidden",children:s.jsx("img",{src:"/assets/Logofm.png",alt:"Logo",className:"h-full w-full object-cover"})}),s.jsxs("div",{className:"flex flex-col gap-0 leading-tight",children:[s.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 leading-none",style:{fontSize:"12px"},children:e?"Edit Mode":"Route Management"}),s.jsx("span",{className:"text-slate-500 dark:text-slate-400 leading-none my-0.5",style:{fontSize:"9px"},children:"All in one data informations"})]})]})}),s.jsxs(ca,{children:[s.jsx(da,{asChild:!0,children:s.jsxs(O,{variant:"outline",size:"sm",className:"btn-glass w-8 h-8 md:w-auto md:h-9 p-0 md:px-3 pagination-button group transition-all duration-300 ease-out hover:shadow-lg hover:shadow-blue-500/20 data-[state=open]:shadow-lg data-[state=open]:shadow-blue-500/30","data-testid":"button-main-menu",title:"Menu",children:[s.jsx(zb,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 transition-all duration-300"}),s.jsx("span",{className:"hidden md:inline ml-2 text-xs transition-all duration-300",children:"Menu"})]})}),s.jsxs(bn,{align:"end",className:"w-56 bg-white/70 dark:bg-black/70 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-2xl",children:[s.jsxs(VN,{children:[s.jsxs(Fh,{"data-testid":"menu-edit-page",children:[s.jsx(Yu,{className:"w-4 h-4 mr-2 text-indigo-500 dark:text-indigo-400"}),s.jsx("span",{style:{fontSize:"10px"},children:"Route List"})]}),s.jsx(GN,{children:s.jsxs(zh,{children:[e&&s.jsxs(s.Fragment,{children:[s.jsxs(et,{onClick:()=>V(C),className:"cursor-pointer","data-testid":"submenu-share-example",children:[s.jsx(Bb,{className:"w-4 h-4 mr-2 text-blue-500 dark:text-blue-400"}),s.jsx("span",{style:{fontSize:"10px"},children:"Share Link Page"})]}),s.jsxs(et,{onClick:()=>V(S),className:"cursor-pointer","data-testid":"submenu-custom-example",children:[s.jsx(Qu,{className:"w-4 h-4 mr-2 text-green-500 dark:text-green-400"}),s.jsx("span",{style:{fontSize:"10px"},children:"Custom Page"})]}),s.jsx(Ut,{className:"bg-gray-200/50 dark:bg-gray-700/50"}),s.jsxs(et,{onClick:()=>k(!0),className:"cursor-pointer","data-testid":"submenu-edit-quick-links",children:[s.jsx(Hu,{className:"w-4 h-4 mr-2 text-orange-500 dark:text-orange-400"}),s.jsx("span",{style:{fontSize:"10px"},children:"Edit Quick Links"})]}),s.jsx(Ut,{className:"bg-gray-200/50 dark:bg-gray-700/50"})]}),s.jsxs(et,{onClick:()=>y("/custom-tables"),className:"cursor-pointer","data-testid":"submenu-custom-list",children:[s.jsx(Gn,{className:"w-4 h-4 mr-2 text-purple-500 dark:text-purple-400"}),s.jsx("span",{style:{fontSize:"10px"},children:"Backup Trip"})]}),s.jsxs(et,{onClick:u,className:"cursor-pointer","data-testid":"submenu-saved-links",children:[s.jsx(zu,{className:"w-4 h-4 mr-2 text-amber-500 dark:text-amber-400"}),s.jsx("span",{style:{fontSize:"10px"},children:"Daily Trip"})]})]})})]}),s.jsxs(et,{onClick:()=>y("/help"),className:"cursor-pointer","data-testid":"menu-help-guide",children:[s.jsx(Fu,{className:"w-4 h-4 mr-2 text-green-600 dark:text-green-400"}),s.jsx("span",{style:{fontSize:"10px"},children:"User Guide"})]}),e&&d&&s.jsxs(et,{onClick:()=>_(!0),className:"cursor-pointer","data-testid":"menu-save-layout",children:[s.jsx(sn,{className:"w-4 h-4 mr-2 text-blue-600 dark:text-blue-400"}),s.jsx("span",{style:{fontSize:"10px"},children:"Save Layout"})]}),e&&p&&s.jsxs(et,{onClick:p,className:"cursor-pointer","data-testid":"menu-bulk-color-edit",children:[s.jsx(Kb,{className:"w-4 h-4 mr-2 text-purple-600 dark:text-purple-400"}),s.jsx("span",{style:{fontSize:"10px"},children:"Bulk Edit Color"})]}),e?s.jsxs(s.Fragment,{children:[s.jsxs(et,{onClick:n,className:"cursor-pointer","data-testid":"menu-add-row",children:[s.jsx(Jb,{className:"w-4 h-4 mr-2"}),s.jsx("span",{style:{fontSize:"10px"},children:"Add Row"})]}),i&&s.jsxs(et,{onClick:()=>{const z=document.querySelector('[data-testid="button-add-column"]');z&&z.click()},className:"cursor-pointer","data-testid":"menu-add-column",children:[s.jsx(Tr,{className:"w-4 h-4 mr-2"}),s.jsx("span",{style:{fontSize:"10px"},children:"Add Column"})]}),s.jsx(Ut,{className:"bg-gray-200/50 dark:bg-gray-700/50"}),s.jsxs(et,{onClick:t,className:"cursor-pointer text-red-600 dark:text-red-400 focus:text-red-600 dark:focus:text-red-400","data-testid":"menu-exit-edit",children:[s.jsx(Ib,{className:"w-4 h-4 mr-2"}),s.jsx("span",{style:{fontSize:"10px"},children:"Exit Edit Mode"})]})]}):s.jsxs(et,{onClick:t,className:"cursor-pointer","data-testid":"menu-enter-edit",children:[s.jsx(Zb,{className:"w-4 h-4 mr-2 text-red-900 dark:text-red-400"}),s.jsx("span",{style:{fontSize:"10px"},children:"Edit Mode"})]}),s.jsx(Ut,{className:"bg-gray-200/50 dark:bg-gray-700/50"}),s.jsx(et,{onClick:x,className:"cursor-pointer","data-testid":"menu-toggle-theme",children:b==="dark"?s.jsxs(s.Fragment,{children:[s.jsx(ex,{className:"w-4 h-4 mr-2 text-yellow-500"}),s.jsx("span",{style:{fontSize:"10px"},children:"Light Mode"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Wb,{className:"w-4 h-4 mr-2 text-blue-500"}),s.jsx("span",{style:{fontSize:"10px"},children:"Dark Mode"})]})}),s.jsx(Ut,{className:"bg-gray-200/50 dark:bg-gray-700/50"})]})]}),e&&i&&s.jsx("div",{className:"hidden",children:s.jsx(BN,{onCreateColumn:i,disabled:!f})})]})}),s.jsx(UN,{open:w,onOpenChange:k}),s.jsx(ze,{open:T,onOpenChange:_,children:s.jsxs(Me,{className:"sm:max-w-md animate-in zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 duration-300 bg-gradient-to-br from-green-50 to-white dark:from-green-950/40 dark:to-gray-900 border-green-200 dark:border-green-500/30 shadow-2xl",children:[s.jsxs(_e,{className:"space-y-3",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 dark:bg-green-900/50 rounded-full flex items-center justify-center animate-in zoom-in-50 duration-500 delay-100",children:s.jsx(sn,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),s.jsx(Fe,{className:"text-center text-green-900 dark:text-green-100",style:{fontSize:"14px"},children:"Save Layout"}),s.jsx(He,{className:"text-center text-gray-600 dark:text-gray-400",style:{fontSize:"11px"},children:"Are you sure you want to save the current layout configuration?"})]}),s.jsxs(Ye,{className:"flex-row justify-center gap-3 sm:justify-center mt-4",children:[s.jsx(O,{variant:"outline",onClick:()=>_(!1),className:"min-w-[100px] border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800",style:{fontSize:"11px"},"data-testid":"button-cancel-save-layout",children:"Cancel"}),s.jsx(O,{onClick:()=>{d&&d(),_(!1)},className:"min-w-[100px] bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white shadow-lg",style:{fontSize:"11px"},"data-testid":"button-confirm-save-layout",children:"Save Layout"})]})]})})]})}function $h({open:e,onOpenChange:t,rows:r,selectedRowIds:n,previewMode:a=!1,onApplyTempOrder:o}){const[i,l]=h.useState("nearest_neighbor"),[c,d]=h.useState(!1),[p,u]=h.useState(null),{toast:m}=jt(),f=zs(),b=Le({mutationFn:async()=>{const N={...n&&n.length>0?{rowIds:n}:{},algorithm:i,prioritizeDelivery:c,vehicleSpecs:{type:"lorry refrigerator 1 ton",fuelType:"diesel",tollClass:1}};return await(await We("POST","/api/optimize-route",N)).json()},onSuccess:N=>{if(!N||!Array.isArray(N.optimizedOrder)||N.optimizedOrder.length===0){m({title:"Invalid Response",description:"The optimization response was invalid. Please try again.",variant:"destructive"});return}u(N)},onError:N=>{m({title:"Optimization Failed",description:N.message||"Failed to optimize route. Please try again.",variant:"destructive"})}}),x=Le({mutationFn:async()=>{if(!p)return;const N=new Set(p.optimizedOrder),S=r.filter(_=>!N.has(_.id)).sort((_,V)=>_.sortOrder-V.sortOrder).map(_=>_.id),I=[...p.optimizedOrder,...S];return await(await We("POST","/api/table-rows/reorder",{rowIds:I})).json()},onSuccess:()=>{f.invalidateQueries({queryKey:["/api/table-rows"]}),m({title:"Route Applied",description:"The optimized route has been applied successfully!"}),y()},onError:N=>{m({title:"Failed to Apply Route",description:N.message||"Failed to apply the optimized route. Please try again.",variant:"destructive"})}}),g=()=>{u(null),b.mutate()},v=()=>{if(a&&o&&p){const N=new Set(p.optimizedOrder),S=r.filter(T=>!N.has(T.id)).sort((T,_)=>T.sortOrder-_.sortOrder).map(T=>T.id),I=[...p.optimizedOrder,...S];o(I),m({title:"Preview Route Applied",description:"Optimized route applied temporarily. Changes won't be saved."}),y()}else x.mutate()},y=()=>{u(null),t(!1)},w=N=>{switch(N){case"nearest_neighbor":return"Fast and efficient. Best for most routes. Finds nearby stops first.";case"genetic":return"AI-powered evolution. Best for complex routes with many stops.";case"simulated_annealing":return"Balanced approach. Good for medium-sized routes with obstacles.";default:return""}},C=(n&&n.length>0?r.filter(N=>n.includes(N.id)&&N.sortOrder!==-1):r.filter(N=>N.sortOrder!==-1)).filter(N=>N.latitude&&N.longitude&&parseFloat(N.latitude)!==0&&parseFloat(N.longitude)!==0);return s.jsx(ze,{open:e,onOpenChange:t,children:s.jsxs(Me,{className:"max-w-2m max-h-[90vh] overflow-hidden flex flex-col bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-blue-500/20 dark:border-blue-400/20 transition-smooth","data-testid":"modal-route-optimization",children:[s.jsxs(_e,{className:"flex-shrink-0",children:[s.jsxs(Fe,{className:"text-1m font-semibold flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[s.jsx(Qn,{className:"w-6 h-6"}),"AI Route Optimization"]}),s.jsx(He,{className:"text-base",children:"Optimize your delivery route to save time, fuel, and distance using advanced AI algorithms."})]}),s.jsx("div",{className:"overflow-y-auto flex-1 -mx-6 px-6",children:p?s.jsxs("div",{className:"space-y-6 mt-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-950/30 dark:to-blue-950/30 p-6 rounded-lg border-2 border-green-500/30 dark:border-green-400/30",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(Io,{className:"w-6 h-6 text-green-600 dark:text-green-400"}),s.jsx("h3",{className:"text-xl font-bold text-green-900 dark:text-green-100",children:"Optimization Complete!"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white/60 dark:bg-black/40 p-4 rounded-lg","data-testid":"stat-distance-saved",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(tx,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Distance"})]}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["-",p.distanceSaved.toFixed(1)," km"]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p.optimizationFactors.distanceReduction.toFixed(1),"% reduction"]})]}),s.jsxs("div",{className:"bg-white/60 dark:bg-black/40 p-4 rounded-lg","data-testid":"stat-time-saved",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Pb,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Time"})]}),s.jsxs("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[p.timeSaved.toFixed(0)," min"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"saved per trip"})]}),s.jsxs("div",{className:"bg-white/60 dark:bg-black/40 p-4 rounded-lg","data-testid":"stat-fuel-saved",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Tb,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Fuel"})]}),s.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[p.fuelSaved.toFixed(2)," L"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"less consumption"})]}),s.jsxs("div",{className:"bg-white/60 dark:bg-black/40 p-4 rounded-lg","data-testid":"stat-optimized-distance",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Qn,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"New Total"})]}),s.jsxs("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[p.optimizedDistance.toFixed(1)," km"]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["from ",p.originalDistance.toFixed(1)," km"]})]})]})]}),s.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg border",children:[s.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[s.jsx(Ya,{className:"w-4 h-4"}),"Algorithm Used"]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.algorithm==="nearest_neighbor"&&"Nearest Neighbor with 2-Opt optimization",p.algorithm==="genetic"&&"Genetic Algorithm with population-based evolution",p.algorithm==="simulated_annealing"&&"Simulated Annealing with probabilistic search"]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(O,{onClick:v,disabled:x.isPending,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",size:"lg","data-testid":"button-apply-optimization",children:x.isPending?s.jsxs(s.Fragment,{children:[s.jsx(To,{className:"w-4 h-4 mr-2 animate-spin"}),"Applying..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Io,{className:"w-4 h-4 mr-2"}),"Apply Optimized Route"]})}),s.jsx(O,{variant:"outline",onClick:y,disabled:x.isPending,"data-testid":"button-close",children:"Close"})]})]}):s.jsxs("div",{className:"space-y-6 mt-4",children:[s.jsx("div",{className:"bg-blue-50/50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ya,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-1",children:[C.length," stops ready to optimize"]}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:n&&n.length>0?`Optimizing ${C.length} selected locations with valid coordinates`:`Optimizing all ${C.length} locations with valid coordinates`})]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ye,{className:"text-base font-semibold mb-3 block",children:"Choose Algorithm"}),s.jsxs(us,{value:i,onValueChange:N=>l(N),className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg border hover:bg-accent transition-colors","data-testid":"radio-algorithm-nearest-neighbor",children:[s.jsx(Lt,{value:"nearest_neighbor",id:"nearest_neighbor"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(ye,{htmlFor:"nearest_neighbor",className:"font-medium cursor-pointer",children:"Nearest Neighbor (Recommended)"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:w("nearest_neighbor")})]})]}),s.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg border hover:bg-accent transition-colors","data-testid":"radio-algorithm-genetic",children:[s.jsx(Lt,{value:"genetic",id:"genetic"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(ye,{htmlFor:"genetic",className:"font-medium cursor-pointer",children:"Genetic Algorithm (Advanced)"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:w("genetic")})]})]}),s.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg border hover:bg-accent transition-colors","data-testid":"radio-algorithm-simulated-annealing",children:[s.jsx(Lt,{value:"simulated_annealing",id:"simulated_annealing"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(ye,{htmlFor:"simulated_annealing",className:"font-medium cursor-pointer",children:"Simulated Annealing"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:w("simulated_annealing")})]})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg border",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(ye,{htmlFor:"prioritize-delivery",className:"font-medium cursor-pointer",children:"Prioritize Delivery Grouping"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Group locations with the same delivery type together"})]}),s.jsx(Oa,{id:"prioritize-delivery",checked:c,onCheckedChange:d,"data-testid":"switch-prioritize-delivery"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(O,{onClick:g,disabled:b.isPending||C.length<2,variant:"outline",className:"flex-1",size:"lg","data-testid":"button-optimize",children:b.isPending?s.jsxs(s.Fragment,{children:[s.jsx(To,{className:"w-4 h-4 mr-2 animate-spin"}),"Optimizing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ya,{className:"w-4 h-4 mr-2"}),"Optimize Route"]})}),s.jsx(O,{variant:"outline",onClick:y,disabled:b.isPending,className:"border-red-600 text-red-600 hover:bg-red-50 dark:border-red-500 dark:text-red-500 dark:hover:bg-red-950/30","data-testid":"button-cancel",children:"Cancel"})]})]})})]})})}function QN({open:e,onOpenChange:t,tableState:r}){const[n,a]=h.useState(""),[o,i]=h.useState(""),[l,c]=h.useState(!1),[d,p]=h.useState(!1),[u,m]=h.useState(!1),[f,b]=h.useState(!1),[x,g]=h.useState(""),{toast:v}=jt(),y=zs(),w=async()=>{p(!0);try{const S=Math.random().toString(36).substring(2,8);if(!(await We("POST","/api/share-table",{shareId:S,tableState:r,remark:""})).ok)throw new Error("Failed to create share link");const T=`${window.location.origin}/share/${S}`;a(T),i(S),v({title:"Share link created",description:"Your table view has been saved and can now be shared."})}catch(S){console.error("Error generating share link:",S),v({title:"Error",description:"Failed to create share link. Please try again.",variant:"destructive"})}finally{p(!1)}},k=async()=>{b(!0);try{if(!(await We("PUT",`/api/share-table/${o}/remark`,{remark:x.trim()})).ok)throw new Error("Failed to update share link remark");if(!(await We("POST","/api/saved-share-links",{shareId:o,url:n,remark:x.trim()})).ok)throw new Error("Failed to save share link");m(!0),y.invalidateQueries({queryKey:["/api/saved-share-links"]}),v({title:"Link saved!",description:"Share link has been added to your saved links."})}catch(S){console.error("Error saving share link:",S),v({title:"Error",description:"Failed to save share link. Please try again.",variant:"destructive"})}finally{b(!1)}},C=async()=>{try{await navigator.clipboard.writeText(n),c(!0),v({title:"Copied!",description:"Share link copied to clipboard."}),setTimeout(()=>c(!1),2e3)}catch(S){console.error("Error copying to clipboard:",S),v({title:"Error",description:"Failed to copy to clipboard.",variant:"destructive"})}},N=S=>{S||(a(""),i(""),c(!1),m(!1),g("")),t(S)};return s.jsx(ze,{open:e,onOpenChange:N,children:s.jsxs(Me,{className:"w-[90vw] max-w-md sm:max-w-lg animate-in zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:zoom-out-90 duration-300 transition-all bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-3xl",style:{maxHeight:"min(80vh, calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 40px))",touchAction:"pan-y"},children:[s.jsx("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/60 via-white/40 to-white/50 dark:from-black/40 dark:via-black/20 dark:to-black/30 border-0 shadow-inner",style:{backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)"}}),s.jsxs(_e,{className:"relative z-10",style:{paddingTop:"max(1.5rem, env(safe-area-inset-top))"},children:[s.jsx(Fe,{className:"text-sm font-semibold",children:"Share Table View"}),s.jsx(He,{className:"text-sm",children:"Create a shareable link for the current table state including filters, sorting, and visible columns."})]}),s.jsx("div",{className:"space-y-4 py-4 relative z-10",style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},children:n?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ae,{value:n,readOnly:!0,className:"flex-1 bg-white/10 dark:bg-black/10 backdrop-blur-sm border-transparent text-sm","data-testid":"input-share-url"}),s.jsx(O,{onClick:C,size:"sm",variant:"outline",className:"shrink-0 bg-transparent border-transparent hover:bg-blue-500/10 backdrop-blur-sm","data-testid":"button-copy-share-link",title:"Copy to clipboard",children:l?s.jsx(Ir,{className:"h-4 w-4 text-green-500"}):s.jsx(Uu,{className:"h-4 w-4"})}),s.jsx(O,{onClick:k,size:"sm",variant:u?"default":"outline",className:"shrink-0 bg-transparent border-transparent hover:bg-blue-500/10 backdrop-blur-sm",disabled:f||u,"data-testid":"button-save-share-link",title:u?"Link saved":"Save link",children:u?s.jsx(Ir,{className:"h-4 w-4 text-green-500"}):s.jsx(zu,{className:"h-4 w-4"})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium mb-1 block text-gray-700 dark:text-gray-300",children:"Remark (optional)"}),s.jsx(Ae,{value:x,onChange:S=>g(S.target.value),placeholder:"e.g., Weekend delivery route, KL 3 only...",className:"bg-white/10 dark:bg-black/10 backdrop-blur-sm border-transparent text-sm","data-testid":"input-share-remark"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Anyone with this link can view your table with the current filters and settings."})]}):s.jsx(O,{onClick:w,disabled:d,className:"w-full bg-transparent text-blue-500 hover:bg-blue-500/10 border-transparent backdrop-blur-sm text-sm","data-testid":"button-generate-share-link",children:d?"Generating...":"Generate Share Link"})}),s.jsx(Ye,{className:"relative z-10 sm:justify-center",style:{paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:s.jsx(O,{variant:"outline",onClick:()=>N(!1),className:"bg-transparent border-transparent text-red-500 hover:bg-red-500/10 backdrop-blur-sm text-sm w-full sm:w-auto","data-testid":"button-cancel-share",children:"Cancel"})})]})})}var Bh="AlertDialog",[YN,AC]=er(Bh,[Ud]),dr=Ud(),Uh=e=>{const{__scopeAlertDialog:t,...r}=e,n=dr(t);return s.jsx(Sd,{...n,...r,modal:!0})};Uh.displayName=Bh;var XN="AlertDialogTrigger",JN=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=dr(r);return s.jsx(Ed,{...a,...n,ref:t})});JN.displayName=XN;var ZN="AlertDialogPortal",Gh=e=>{const{__scopeAlertDialog:t,...r}=e,n=dr(t);return s.jsx(Rd,{...n,...r})};Gh.displayName=ZN;var e2="AlertDialogOverlay",Vh=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=dr(r);return s.jsx(ri,{...a,...n,ref:t})});Vh.displayName=e2;var ms="AlertDialogContent",[t2,r2]=YN(ms),s2=xd("AlertDialogContent"),qh=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,o=dr(r),i=h.useRef(null),l=ut(t,i),c=h.useRef(null);return s.jsx(M0,{contentName:ms,titleName:Wh,docsSlug:"alert-dialog",children:s.jsx(t2,{scope:r,cancelRef:c,children:s.jsxs(si,{role:"alertdialog",...o,...a,ref:l,onOpenAutoFocus:Pe(a.onOpenAutoFocus,d=>{var p;d.preventDefault(),(p=c.current)==null||p.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(s2,{children:n}),s.jsx(a2,{contentRef:i})]})})})});qh.displayName=ms;var Wh="AlertDialogTitle",Hh=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=dr(r);return s.jsx(ni,{...a,...n,ref:t})});Hh.displayName=Wh;var Kh="AlertDialogDescription",Qh=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=dr(r);return s.jsx(ai,{...a,...n,ref:t})});Qh.displayName=Kh;var n2="AlertDialogAction",Yh=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=dr(r);return s.jsx(oi,{...a,...n,ref:t})});Yh.displayName=n2;var Xh="AlertDialogCancel",Jh=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=r2(Xh,r),o=dr(r),i=ut(t,a);return s.jsx(oi,{...o,...n,ref:i})});Jh.displayName=Xh;var a2=({contentRef:e})=>{const t=`\`${ms}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ms}\` by passing a \`${Kh}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ms}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return h.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},o2=Uh,i2=Gh,Zh=Vh,ef=qh,tf=Yh,rf=Jh,sf=Hh,nf=Qh;const af=o2,l2=i2,of=h.forwardRef(({className:e,...t},r)=>s.jsx(Zh,{className:X("fixed inset-0 z-50 bg-black/60 dark:bg-black/85 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));of.displayName=Zh.displayName;const cl=h.forwardRef(({className:e,...t},r)=>s.jsxs(l2,{children:[s.jsx(of,{}),s.jsx(ef,{ref:r,className:X("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-[2rem]",e),...t})]}));cl.displayName=ef.displayName;const dl=({className:e,...t})=>s.jsx("div",{className:X("flex flex-col space-y-2 text-center sm:text-left",e),...t});dl.displayName="AlertDialogHeader";const ul=({className:e,...t})=>s.jsx("div",{className:X("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ul.displayName="AlertDialogFooter";const ml=h.forwardRef(({className:e,...t},r)=>s.jsx(sf,{ref:r,className:X("text-lg font-semibold",e),...t}));ml.displayName=sf.displayName;const pl=h.forwardRef(({className:e,...t},r)=>s.jsx(nf,{ref:r,className:X("text-sm text-muted-foreground",e),...t}));pl.displayName=nf.displayName;const hl=h.forwardRef(({className:e,...t},r)=>s.jsx(tf,{ref:r,className:X(Xi(),e),...t}));hl.displayName=tf.displayName;const fl=h.forwardRef(({className:e,...t},r)=>s.jsx(rf,{ref:r,className:X(Xi({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));fl.displayName=rf.displayName;function c2({open:e,onOpenChange:t,editMode:r=!1}){const[n,a]=h.useState(!1),[o,i]=h.useState(!1),[l,c]=h.useState(null),[d,p]=h.useState(""),{toast:u}=jt(),{data:m=[],isLoading:f}=qt({queryKey:["/api/saved-share-links"],enabled:e}),b=Le({mutationFn:async N=>{const S=await We("DELETE",`/api/saved-share-links/${N}`);if(!S.ok)throw new Error("Failed to delete saved link");return S.json()},onSuccess:()=>{lr.invalidateQueries({queryKey:["/api/saved-share-links"]}),a(!1),c(null),u({title:"Link deleted",description:"The saved link has been removed."})},onError:()=>{u({title:"Error",description:"Failed to delete saved link. Please try again.",variant:"destructive"})}}),x=Le({mutationFn:async({id:N,remark:S})=>{const I=await We("PATCH",`/api/saved-share-links/${N}/remark`,{remark:S});if(!I.ok)throw new Error("Failed to update remark");return I.json()},onSuccess:()=>{lr.invalidateQueries({queryKey:["/api/saved-share-links"]}),i(!1),c(null),p(""),u({title:"Remark updated",description:"The link remark has been updated."})},onError:()=>{u({title:"Error",description:"Failed to update remark. Please try again.",variant:"destructive"})}}),g=N=>{c(N),a(!0)},v=N=>{c(N),p(N.remark),i(!0)},y=()=>{l&&b.mutate(l.id)},w=()=>{l&&x.mutate({id:l.id,remark:d})},k=async N=>{try{await navigator.clipboard.writeText(N),u({title:"Copied!",description:"Link copied to clipboard."})}catch{u({title:"Error",description:"Failed to copy to clipboard.",variant:"destructive"})}},C=N=>(typeof N=="string"?new Date(N):N).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return s.jsxs(s.Fragment,{children:[s.jsx(ze,{open:e,onOpenChange:t,children:s.jsxs(Me,{className:"sm:max-w-[600px] animate-in zoom-in-95 duration-300 data-[state=closed]:animate-out data-[state=closed]:zoom-out-90 bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-[2rem]",children:[s.jsxs("div",{className:"absolute inset-0 -z-10 rounded-[2rem] bg-gradient-to-br from-white/70 via-white/50 to-white/60 dark:from-black/50 dark:via-black/30 dark:to-black/40 border-0 shadow-[inset_0_1px_1px_rgba(255,255,255,0.3),inset_0_-1px_1px_rgba(0,0,0,0.1)]",style:{backdropFilter:"blur(40px) saturate(180%)",WebkitBackdropFilter:"blur(40px) saturate(180%)"},children:[s.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/40 dark:via-white/20 to-transparent"}),s.jsx("div",{className:"absolute inset-0 rounded-[2rem] bg-gradient-to-tr from-blue-500/5 via-transparent to-purple-500/5 dark:from-blue-400/10 dark:via-transparent dark:to-purple-400/10"})]}),s.jsxs(_e,{children:[s.jsx(Fe,{children:"Saved Share Links"}),s.jsx(He,{children:"Manage your saved share links. Add remarks to organize them better."})]}),s.jsx("div",{className:"max-h-[400px] overflow-y-auto pr-2",children:f?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading saved links..."})}):m.length===0?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"No saved links yet"})}):s.jsx("div",{className:"space-y-3",children:m.map(N=>s.jsxs("div",{className:"p-4 rounded-2xl border border-transparent bg-white/20 dark:bg-black/20 backdrop-blur-xl hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300 hover:scale-[1.02] animate-in zoom-in-95","data-testid":`saved-link-${N.id}`,children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:N.remark||"Untitled Link"}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Created: ",C(N.createdAt)]})]}),s.jsxs(ca,{children:[s.jsx(da,{asChild:!0,children:s.jsx(O,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 shrink-0 transition-all duration-300 hover:scale-110 active:scale-95","data-testid":`button-actions-${N.id}`,title:"Actions",children:s.jsx(Vu,{className:"h-4 w-4"})})}),s.jsxs(bn,{align:"end",className:"w-44",children:[s.jsxs(et,{onClick:()=>k(N.url),className:"cursor-pointer transition-all duration-200 hover:scale-[1.02]","data-testid":`menu-copy-${N.id}`,children:[s.jsx(Uu,{className:"h-4 w-4 mr-2"}),"Copy Link"]}),s.jsxs(et,{onClick:()=>window.open(N.url,"_blank"),className:"cursor-pointer transition-all duration-200 hover:scale-[1.02]","data-testid":`menu-open-${N.id}`,children:[s.jsx(or,{className:"h-4 w-4 mr-2"}),"Open Link"]}),s.jsxs(et,{onClick:()=>v(N),className:"cursor-pointer transition-all duration-200 hover:scale-[1.02]","data-testid":`menu-edit-${N.id}`,children:[s.jsx(ka,{className:"h-4 w-4 mr-2"}),"Edit Remark"]}),s.jsxs(et,{onClick:()=>g(N),className:"cursor-pointer text-destructive focus:text-destructive transition-all duration-200 hover:scale-[1.02]","data-testid":`menu-delete-${N.id}`,children:[s.jsx(ls,{className:"h-4 w-4 mr-2"}),"Delete Link"]})]})]})]}),r&&s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(Ae,{value:N.url,readOnly:!0,className:"flex-1 h-8 text-xs","data-testid":`input-url-${N.id}`})})]},N.id))})})]})}),s.jsx(af,{open:n,onOpenChange:a,children:s.jsxs(cl,{className:"bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-[2rem]",children:[s.jsxs("div",{className:"absolute inset-0 -z-10 rounded-[2rem] bg-gradient-to-br from-white/70 via-white/50 to-white/60 dark:from-black/50 dark:via-black/30 dark:to-black/40 border-0 shadow-[inset_0_1px_1px_rgba(255,255,255,0.3),inset_0_-1px_1px_rgba(0,0,0,0.1)]",style:{backdropFilter:"blur(40px) saturate(180%)",WebkitBackdropFilter:"blur(40px) saturate(180%)"},children:[s.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/40 dark:via-white/20 to-transparent"}),s.jsx("div",{className:"absolute inset-0 rounded-[2rem] bg-gradient-to-tr from-red-500/5 via-transparent to-orange-500/5 dark:from-red-400/10 dark:via-transparent dark:to-orange-400/10"})]}),s.jsxs(dl,{children:[s.jsx(ml,{children:"Delete Saved Link"}),s.jsx(pl,{children:"Are you sure you want to delete this saved link? This action cannot be undone."})]}),s.jsxs(ul,{children:[s.jsx(fl,{children:"Cancel"}),s.jsx(hl,{onClick:y,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:b.isPending,children:b.isPending?"Deleting...":"Delete"})]})]})}),s.jsx(ze,{open:o,onOpenChange:i,children:s.jsxs(Me,{className:"sm:max-w-[425px] bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-[2rem]",children:[s.jsxs("div",{className:"absolute inset-0 -z-10 rounded-[2rem] bg-gradient-to-br from-white/70 via-white/50 to-white/60 dark:from-black/50 dark:via-black/30 dark:to-black/40 border-0 shadow-[inset_0_1px_1px_rgba(255,255,255,0.3),inset_0_-1px_1px_rgba(0,0,0,0.1)]",style:{backdropFilter:"blur(40px) saturate(180%)",WebkitBackdropFilter:"blur(40px) saturate(180%)"},children:[s.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/40 dark:via-white/20 to-transparent"}),s.jsx("div",{className:"absolute inset-0 rounded-[2rem] bg-gradient-to-tr from-green-500/5 via-transparent to-blue-500/5 dark:from-green-400/10 dark:via-transparent dark:to-blue-400/10"})]}),s.jsxs(_e,{children:[s.jsx(Fe,{children:"Edit Link Remark"}),s.jsx(He,{children:"Add a note to help you remember what this link is for."})]}),s.jsxs("div",{className:"py-4",children:[s.jsx(ye,{htmlFor:"remark",children:"Remark"}),s.jsx(Ae,{id:"remark",value:d,onChange:N=>p(N.target.value),placeholder:"e.g., Weekly sales report - Jan 2024",className:"mt-2","data-testid":"input-remark"})]}),s.jsxs(Ye,{children:[s.jsx(O,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),s.jsx(O,{onClick:w,disabled:x.isPending,"data-testid":"button-save-remark",children:x.isPending?"Saving...":"Save"})]})]})})]})}const d2=[{id:"welcome",title:" Welcome to Route Manager",description:"This interactive guide will show you how to manage your delivery routes efficiently. Navigate using Next/Previous buttons, or skip anytime. You can restart this tutorial from the help button in the corner.",position:"center",mode:"both"},{id:"theme",title:" Theme Toggle",description:"Switch between light and dark modes for comfortable viewing. The dark mode features a premium deep black design with optimized contrast.",targetSelector:'[data-testid="button-toggle-theme"]',position:"bottom",mode:"both"},{id:"view-search",title:" Smart Search & Filtering",description:"Search across all locations and use filters to find specific routes, deliveries, or destinations instantly. Combine filters for precise results.",targetSelector:'[data-testid="search-input"]',position:"top",mode:"view"},{id:"view-customize",title:" Customize Table View",description:"Click to show/hide columns and drag to reorder them. Your custom layout is automatically saved when you exit edit mode and persists across sessions.",targetSelector:'[data-testid="button-show"]',position:"top",mode:"view"},{id:"view-share",title:" Share Table State",description:"Generate a shareable URL that includes your current filters, search terms, and column settings. Perfect for team collaboration.",targetSelector:'[data-testid="button-share-table"]',position:"bottom",mode:"view"},{id:"view-links",title:" Saved Links",description:"Access your previously saved share links from the navigation bar. View, manage, and quickly access all your saved table states.",targetSelector:'[data-testid="button-saved-links"]',position:"bottom",mode:"view"},{id:"view-map",title:" View Map",description:"Click on any row's map button to see the location on an interactive map with route visualization and fullscreen support.",targetSelector:".table-container",position:"top",mode:"view"},{id:"view-edit-mode",title:" Switch to Edit Mode",description:"Enter edit mode to add locations, calculate toll prices, modify data, and manage your routes. All changes can be saved.",targetSelector:'[data-testid="button-edit-mode"]',position:"bottom",mode:"view"},{id:"edit-add-row",title:" Add New Location",description:"Add new route stops by clicking here. Fill in location details, coordinates, delivery info, and upload images if needed.",targetSelector:'[data-testid="button-add-row"]',position:"bottom",mode:"edit"},{id:"edit-add-column",title:" Add Custom Column",description:"Create custom columns to track additional data points specific to your operations and workflow needs.",targetSelector:'[data-testid="button-add-column"]',position:"bottom",mode:"edit"},{id:"edit-tolls",title:" Auto-Calculate Tolls",description:"Use Google Maps Routes API to automatically calculate toll prices and distances for lorry vehicles. Supports class 1 toll pricing with traffic-aware routing.",targetSelector:'[data-testid="button-calculate-tolls"]',position:"bottom",mode:"edit"},{id:"edit-optimize",title:" Route Optimization",description:"Use AI algorithms to optimize your delivery route for minimum distance, time, and fuel consumption. Choose from multiple optimization strategies.",targetSelector:'[data-testid="button-optimize-route"]',position:"bottom",mode:"edit"},{id:"edit-save",title:" Save All Changes",description:"Save your modifications to persist all edits. Changes include new rows, updated data, column modifications, and reordering.",targetSelector:'[data-testid="button-save-data"]',position:"bottom",mode:"edit"},{id:"edit-exit",title:" Return to View Mode",description:"Exit edit mode to return to the read-only view. Your column layout preferences are automatically saved when you exit. Remember to save data changes before exiting to avoid data loss.",targetSelector:'[data-testid="button-edit-mode"]',position:"bottom",mode:"edit"},{id:"complete",title:" Tutorial Complete!",description:"You're now ready to manage routes like a pro! Access this guide anytime via the help button. Happy routing!",position:"center",mode:"both"}];function u2({editMode:e=!1,onClose:t}){const[r,n]=h.useState(!0),[a,o]=h.useState(0);h.useState(!0);const i=d2.filter(y=>y.mode==="both"||y.mode===(e?"edit":"view"));h.useEffect(()=>{n(!0),o(0)},[]),h.useEffect(()=>{r&&a>0&&o(0)},[e]);const l=()=>{a<i.length-1?o(a+1):d()},c=()=>{a>0&&o(a-1)},d=()=>{localStorage.setItem("tutorial_completed","true"),n(!1),o(0),t==null||t()},p=()=>{localStorage.setItem("tutorial_completed","true"),n(!1),o(0),t==null||t()},u=i[a];if(h.useEffect(()=>{if(!r||!u.targetSelector)return;const y=document.querySelector(u.targetSelector);if(y)y.scrollIntoView({behavior:"smooth",block:"center"});else{const w=setTimeout(()=>{a<i.length-1&&o(a+1)},1e3);return()=>clearTimeout(w)}},[a,r,u.targetSelector]),!r)return null;if(u.position==="center")return s.jsx(ze,{open:!0,onOpenChange:()=>{},children:s.jsxs(Me,{className:"max-w-lg bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-blue-500/30 dark:border-blue-400/30","aria-describedby":"tutorial-description",children:[s.jsxs(_e,{children:[s.jsx(Fe,{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:u.title}),s.jsx(He,{id:"tutorial-description",className:"text-base pt-3 leading-relaxed",children:u.description})]}),s.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-border/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"text-sm font-medium text-muted-foreground",children:["Step ",a+1," of ",i.length]}),s.jsx("div",{className:"flex gap-1",children:Array.from({length:i.length}).map((y,w)=>s.jsx("div",{className:`h-1.5 rounded-full transition-all ${w===a?"w-6 bg-gradient-to-r from-blue-600 to-purple-600":"w-1.5 bg-muted"}`},w))})]}),s.jsxs("div",{className:"flex gap-2",children:[a>0&&s.jsxs(O,{variant:"outline",size:"sm",onClick:c,"data-testid":"button-tutorial-previous",className:"gap-1",children:[s.jsx(Jl,{className:"w-4 h-4"}),"Previous"]}),s.jsx(O,{variant:"outline",size:"sm",onClick:p,"data-testid":"button-tutorial-skip",className:"text-muted-foreground hover:text-foreground",children:"Skip"}),s.jsx(O,{size:"sm",onClick:l,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white gap-1","data-testid":"button-tutorial-next",children:a===i.length-1?s.jsxs(s.Fragment,{children:["Finish",s.jsx(Io,{className:"w-4 h-4"})]}):s.jsxs(s.Fragment,{children:["Next",s.jsx(Kn,{className:"w-4 h-4"})]})})]})]})]})});const m=u.targetSelector?document.querySelector(u.targetSelector):null,f=m==null?void 0:m.getBoundingClientRect();if(!f)return null;const b={position:"fixed",zIndex:60},x=window.innerHeight-f.bottom,g=f.top,v=320;switch(u.position){case"bottom":x<250&&g>250?b.bottom=`${window.innerHeight-f.top+12}px`:b.top=`${f.bottom+12}px`;let y=f.left+f.width/2-v/2;y+v>window.innerWidth-20&&(y=window.innerWidth-v-20),y<20&&(y=20),b.left=`${y}px`,b.transform="none";break;case"top":b.bottom=`${window.innerHeight-f.top+12}px`;let k=f.left+f.width/2-v/2;k+v>window.innerWidth-20&&(k=window.innerWidth-v-20),k<20&&(k=20),b.left=`${k}px`,b.transform="none";break;case"left":b.top=`${f.top+f.height/2}px`,b.right=`${window.innerWidth-f.left+12}px`,b.transform="translateY(-50%)";break;case"right":b.top=`${f.top+f.height/2}px`,b.left=`${f.right+12}px`,b.transform="translateY(-50%)";break}return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed z-[9999] pointer-events-none rounded-lg ring-4 ring-blue-500/60 dark:ring-blue-400/60 animate-pulse",style:{top:f.top-6,left:f.left-6,width:f.width+12,height:f.height+12,boxShadow:"0 0 20px rgba(59, 130, 246, 0.5)"}}),s.jsxs("div",{style:b,className:"fixed z-[10000] bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-blue-500/30 dark:border-blue-400/30 rounded-xl p-4 shadow-2xl w-[320px] backdrop-blur-xl animate-in fade-in zoom-in-95 duration-300",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("h3",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent pr-2",children:u.title}),s.jsx(O,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 hover:bg-destructive/10 hover:text-destructive",onClick:p,"data-testid":"button-tutorial-close",children:s.jsx(kt,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed mb-4",children:u.description}),s.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-border/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"text-xs font-medium text-muted-foreground",children:[a+1,"/",i.length]}),s.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(i.length,8)}).map((y,w)=>s.jsx("div",{className:`h-1 rounded-full transition-all ${w===a?"w-4 bg-gradient-to-r from-blue-600 to-purple-600":"w-1 bg-muted"}`},w))})]}),s.jsxs("div",{className:"flex gap-2",children:[a>0&&s.jsx(O,{variant:"outline",size:"sm",onClick:c,"data-testid":"button-tutorial-previous",className:"h-8 px-3",children:s.jsx(Jl,{className:"w-4 h-4"})}),s.jsxs(O,{size:"sm",onClick:l,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white h-8 px-3 gap-1","data-testid":"button-tutorial-next",children:[a===i.length-1?"Finish":"Next",a!==i.length-1&&s.jsx(Kn,{className:"w-4 h-4"})]})]})]})]})]})}function Pn({editMode:e=!1}){new Date().getFullYear();const[t,r]=h.useState(!1),[n,a]=h.useState(!1),[o,i]=h.useState(!1),[l,c]=h.useState(!1),[d,p]=h.useState("App v1.0.0"),[u,m]=h.useState(""),{toast:f}=jt(),{data:b}=qt({queryKey:["/api/global-settings","footerCompanyName"],queryFn:async()=>{const k=await fetch("/api/global-settings/footerCompanyName");if(!k.ok&&k.status!==404)throw new Error("Failed to fetch company name");return k.json()}}),{data:x}=qt({queryKey:["/api/global-settings","footerCompanyUrl"],queryFn:async()=>{const k=await fetch("/api/global-settings/footerCompanyUrl");if(!k.ok&&k.status!==404)throw new Error("Failed to fetch company URL");return k.json()}}),g=Le({mutationFn:async k=>await(await We("POST","/api/global-settings",{key:"footerCompanyName",value:k})).json()}),v=Le({mutationFn:async k=>await(await We("POST","/api/global-settings",{key:"footerCompanyUrl",value:k})).json()});h.useEffect(()=>{b!=null&&b.value&&p(b.value)},[b]),h.useEffect(()=>{x!=null&&x.value&&m(x.value)},[x]),h.useEffect(()=>{const k=setTimeout(()=>r(!0),100),C=setTimeout(()=>a(!0),300);return()=>{clearTimeout(k),clearTimeout(C)}},[]);const y=async()=>{try{await g.mutateAsync(d),await v.mutateAsync(u),lr.invalidateQueries({queryKey:["/api/global-settings","footerCompanyName"]}),lr.invalidateQueries({queryKey:["/api/global-settings","footerCompanyUrl"]}),i(!1),f({title:"Success",description:"Footer updated successfully!"})}catch(k){f({title:"Error",description:k instanceof Error?k.message:"Failed to update footer",variant:"destructive"})}},w=()=>{u&&(window.open(u,"_blank","noopener,noreferrer"),c(!1))};return s.jsxs(s.Fragment,{children:[s.jsx("footer",{className:`fixed bottom-0 left-0 right-0 z-40 w-full border-t-2 border-blue-500/50 dark:border-blue-400/50 bg-gradient-to-r from-blue-500/10 via-blue-600/10 to-blue-700/10 dark:from-blue-500/20 dark:via-blue-600/20 dark:to-blue-700/20 backdrop-blur supports-[backdrop-filter]:bg-background/60 shadow-lg shadow-blue-500/20 transition-all duration-500 ease-out ${t?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsx("div",{className:`flex items-center justify-center transition-all duration-700 ease-out text-[11px] py-3 ${n?"scale-100 opacity-100":"scale-95 opacity-0"}`,children:s.jsx("div",{className:"animated-gradient-text font-semibold",children:" 2025 All Rights Reserved  Educational Purpose Only"})})})}),s.jsx(ze,{open:l,onOpenChange:c,children:s.jsxs(Me,{className:"sm:max-w-md",children:[s.jsx(_e,{children:s.jsxs(Fe,{className:"flex items-center gap-2",children:[s.jsx(Mn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Visit Website"]})}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"You are about to visit:"}),s.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Mn,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 break-all",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Website URL:"}),s.jsx("div",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:u})]})]})}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"This will open in a new browser tab."})]}),s.jsxs(Ye,{className:"sm:justify-between",children:[s.jsx(O,{variant:"outline",onClick:()=>c(!1),"data-testid":"button-cancel-navigate",children:"Cancel"}),s.jsxs(O,{onClick:w,className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-confirm-navigate",children:[s.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Visit Website"]})]})]})}),s.jsx(ze,{open:o,onOpenChange:i,children:s.jsxs(Me,{children:[s.jsx(_e,{children:s.jsx(Fe,{children:"Edit Footer"})}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"company-name",children:"Company Name"}),s.jsx(Ae,{id:"company-name",value:d,onChange:k=>p(k.target.value),placeholder:"Enter company name","data-testid":"input-company-name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"company-url",className:u?"text-blue-600 dark:text-blue-400":"",children:"Company Website URL (optional)"}),s.jsx(Ae,{id:"company-url",value:u,onChange:k=>m(k.target.value),placeholder:"https://example.com",className:u?"border-blue-500 dark:border-blue-400 focus:ring-blue-500":"","data-testid":"input-company-url"})]}),s.jsxs("div",{className:"mt-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[s.jsx("h4",{className:"text-sm font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Preview Changes"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[s.jsx(Ir,{className:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rx,{className:"w-3.5 h-3.5 text-slate-500"}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Company Name:"})]}),s.jsx("div",{className:"ml-5 font-semibold text-slate-800 dark:text-slate-200",children:d||s.jsx("span",{className:"text-slate-400 italic",children:"Not set"})})]})]}),s.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[s.jsx(Ir,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${u?"text-blue-600 dark:text-blue-400":"text-slate-400"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mn,{className:`w-3.5 h-3.5 ${u?"text-blue-600 dark:text-blue-400":"text-slate-500"}`}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Website URL:"})]}),s.jsx("div",{className:"ml-5",children:u?s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-blue-600 dark:text-blue-400 break-all",children:u}),s.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:" Company name will be clickable"})]}):s.jsx("span",{className:"text-slate-400 italic",children:"Not set - name will not be a link"})})]})]})]})]})]}),s.jsxs(Ye,{children:[s.jsx(O,{variant:"outline",onClick:()=>i(!1),"data-testid":"button-cancel-footer",children:"Cancel"}),s.jsx(O,{onClick:y,disabled:g.isPending||v.isPending,"data-testid":"button-save-footer",children:g.isPending||v.isPending?"Saving...":"Save"})]})]})})]})}function m2(e){return Object.prototype.toString.call(e)==="[object Object]"}function Qc(e){return m2(e)||Array.isArray(e)}function p2(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function gl(e,t){const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;const a=JSON.stringify(Object.keys(e.breakpoints||{})),o=JSON.stringify(Object.keys(t.breakpoints||{}));return a!==o?!1:r.every(i=>{const l=e[i],c=t[i];return typeof l=="function"?`${l}`==`${c}`:!Qc(l)||!Qc(c)?l===c:gl(l,c)})}function Yc(e){return e.concat().sort((t,r)=>t.name>r.name?1:-1).map(t=>t.options)}function h2(e,t){if(e.length!==t.length)return!1;const r=Yc(e),n=Yc(t);return r.every((a,o)=>{const i=n[o];return gl(a,i)})}function bl(e){return typeof e=="number"}function Zo(e){return typeof e=="string"}function La(e){return typeof e=="boolean"}function Xc(e){return Object.prototype.toString.call(e)==="[object Object]"}function tt(e){return Math.abs(e)}function xl(e){return Math.sign(e)}function on(e,t){return tt(e-t)}function f2(e,t){if(e===0||t===0||tt(e)<=tt(t))return 0;const r=on(tt(e),tt(t));return tt(r/e)}function g2(e){return Math.round(e*100)/100}function xn(e){return vn(e).map(Number)}function Vt(e){return e[An(e)]}function An(e){return Math.max(0,e.length-1)}function vl(e,t){return t===An(e)}function Jc(e,t=0){return Array.from(Array(e),(r,n)=>t+n)}function vn(e){return Object.keys(e)}function lf(e,t){return[e,t].reduce((r,n)=>(vn(n).forEach(a=>{const o=r[a],i=n[a],l=Xc(o)&&Xc(i);r[a]=l?lf(o,i):i}),r),{})}function ei(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function b2(e,t){const r={start:n,center:a,end:o};function n(){return 0}function a(c){return o(c)/2}function o(c){return t-c}function i(c,d){return Zo(e)?r[e](c):e(t,c,d)}return{measure:i}}function yn(){let e=[];function t(a,o,i,l={passive:!0}){let c;if("addEventListener"in a)a.addEventListener(o,i,l),c=()=>a.removeEventListener(o,i,l);else{const d=a;d.addListener(i),c=()=>d.removeListener(i)}return e.push(c),n}function r(){e=e.filter(a=>a())}const n={add:t,clear:r};return n}function x2(e,t,r,n){const a=yn(),o=1e3/60;let i=null,l=0,c=0;function d(){a.add(e,"visibilitychange",()=>{e.hidden&&b()})}function p(){f(),a.clear()}function u(g){if(!c)return;i||(i=g,r(),r());const v=g-i;for(i=g,l+=v;l>=o;)r(),l-=o;const y=l/o;n(y),c&&(c=t.requestAnimationFrame(u))}function m(){c||(c=t.requestAnimationFrame(u))}function f(){t.cancelAnimationFrame(c),i=null,l=0,c=0}function b(){i=null,l=0}return{init:d,destroy:p,start:m,stop:f,update:r,render:n}}function v2(e,t){const r=t==="rtl",n=e==="y",a=n?"y":"x",o=n?"x":"y",i=!n&&r?-1:1,l=p(),c=u();function d(b){const{height:x,width:g}=b;return n?x:g}function p(){return n?"top":r?"right":"left"}function u(){return n?"bottom":r?"left":"right"}function m(b){return b*i}return{scroll:a,cross:o,startEdge:l,endEdge:c,measureSize:d,direction:m}}function es(e=0,t=0){const r=tt(e-t);function n(d){return d<e}function a(d){return d>t}function o(d){return n(d)||a(d)}function i(d){return o(d)?n(d)?e:t:d}function l(d){return r?d-r*Math.ceil((d-t)/r):d}return{length:r,max:t,min:e,constrain:i,reachedAny:o,reachedMax:a,reachedMin:n,removeOffset:l}}function cf(e,t,r){const{constrain:n}=es(0,e),a=e+1;let o=i(t);function i(m){return r?tt((a+m)%a):n(m)}function l(){return o}function c(m){return o=i(m),u}function d(m){return p().set(l()+m)}function p(){return cf(e,l(),r)}const u={get:l,set:c,add:d,clone:p};return u}function y2(e,t,r,n,a,o,i,l,c,d,p,u,m,f,b,x,g,v,y){const{cross:w,direction:k}=e,C=["INPUT","SELECT","TEXTAREA"],N={passive:!1},S=yn(),I=yn(),T=es(50,225).constrain(f.measure(20)),_={mouse:300,touch:400},V={mouse:500,touch:600},z=b?43:25;let le=!1,U=0,ce=0,K=!1,F=!1,ae=!1,J=!1;function ve(L){if(!y)return;function q(Z){(La(y)||y(L,Z))&&xe(Z)}const B=t;S.add(B,"dragstart",Z=>Z.preventDefault(),N).add(B,"touchmove",()=>{},N).add(B,"touchend",()=>{}).add(B,"touchstart",q).add(B,"mousedown",q).add(B,"touchcancel",ue).add(B,"contextmenu",ue).add(B,"click",Se,!0)}function be(){S.clear(),I.clear()}function A(){const L=J?r:t;I.add(L,"touchmove",je,N).add(L,"touchend",ue).add(L,"mousemove",je,N).add(L,"mouseup",ue)}function Ie(L){const q=L.nodeName||"";return C.includes(q)}function G(){return(b?V:_)[J?"mouse":"touch"]}function ee(L,q){const B=u.add(xl(L)*-1),Z=p.byDistance(L,!b).distance;return b||tt(L)<T?Z:g&&q?Z*.5:p.byIndex(B.get(),0).distance}function xe(L){const q=ei(L,n);J=q,ae=b&&q&&!L.buttons&&le,le=on(a.get(),i.get())>=2,!(q&&L.button!==0)&&(Ie(L.target)||(K=!0,o.pointerDown(L),d.useFriction(0).useDuration(0),a.set(i),A(),U=o.readPoint(L),ce=o.readPoint(L,w),m.emit("pointerDown")))}function je(L){if(!ei(L,n)&&L.touches.length>=2)return ue(L);const B=o.readPoint(L),Z=o.readPoint(L,w),me=on(B,U),qe=on(Z,ce);if(!F&&!J&&(!L.cancelable||(F=me>qe,!F)))return ue(L);const Re=o.pointerMove(L);me>x&&(ae=!0),d.useFriction(.3).useDuration(.75),l.start(),a.add(k(Re)),L.preventDefault()}function ue(L){const B=p.byDistance(0,!1).index!==u.get(),Z=o.pointerUp(L)*G(),me=ee(k(Z),B),qe=f2(Z,me),Re=z-10*qe,Ge=v+qe/50;F=!1,K=!1,I.clear(),d.useDuration(Re).useFriction(Ge),c.distance(me,!b),J=!1,m.emit("pointerUp")}function Se(L){ae&&(L.stopPropagation(),L.preventDefault(),ae=!1)}function he(){return K}return{init:ve,destroy:be,pointerDown:he}}function w2(e,t){let n,a;function o(u){return u.timeStamp}function i(u,m){const b=`client${(m||e.scroll)==="x"?"X":"Y"}`;return(ei(u,t)?u:u.touches[0])[b]}function l(u){return n=u,a=u,i(u)}function c(u){const m=i(u)-i(a),f=o(u)-o(n)>170;return a=u,f&&(n=u),m}function d(u){if(!n||!a)return 0;const m=i(a)-i(n),f=o(u)-o(n),b=o(u)-o(a)>170,x=m/f;return f&&!b&&tt(x)>.1?x:0}return{pointerDown:l,pointerMove:c,pointerUp:d,readPoint:i}}function k2(){function e(r){const{offsetTop:n,offsetLeft:a,offsetWidth:o,offsetHeight:i}=r;return{top:n,right:a+o,bottom:n+i,left:a,width:o,height:i}}return{measure:e}}function j2(e){function t(n){return e*(n/100)}return{measure:t}}function N2(e,t,r,n,a,o,i){const l=[e].concat(n);let c,d,p=[],u=!1;function m(g){return a.measureSize(i.measure(g))}function f(g){if(!o)return;d=m(e),p=n.map(m);function v(y){for(const w of y){if(u)return;const k=w.target===e,C=n.indexOf(w.target),N=k?d:p[C],S=m(k?e:n[C]);if(tt(S-N)>=.5){g.reInit(),t.emit("resize");break}}}c=new ResizeObserver(y=>{(La(o)||o(g,y))&&v(y)}),r.requestAnimationFrame(()=>{l.forEach(y=>c.observe(y))})}function b(){u=!0,c&&c.disconnect()}return{init:f,destroy:b}}function C2(e,t,r,n,a,o){let i=0,l=0,c=a,d=o,p=e.get(),u=0;function m(){const N=n.get()-e.get(),S=!c;let I=0;return S?(i=0,r.set(n),e.set(n),I=N):(r.set(e),i+=N/c,i*=d,p+=i,e.add(i),I=p-u),l=xl(I),u=p,C}function f(){const N=n.get()-t.get();return tt(N)<.001}function b(){return c}function x(){return l}function g(){return i}function v(){return w(a)}function y(){return k(o)}function w(N){return c=N,C}function k(N){return d=N,C}const C={direction:x,duration:b,velocity:g,seek:m,settled:f,useBaseFriction:y,useBaseDuration:v,useFriction:k,useDuration:w};return C}function S2(e,t,r,n,a){const o=a.measure(10),i=a.measure(50),l=es(.1,.99);let c=!1;function d(){return!(c||!e.reachedAny(r.get())||!e.reachedAny(t.get()))}function p(f){if(!d())return;const b=e.reachedMin(t.get())?"min":"max",x=tt(e[b]-t.get()),g=r.get()-t.get(),v=l.constrain(x/i);r.subtract(g*v),!f&&tt(g)<o&&(r.set(e.constrain(r.get())),n.useDuration(25).useBaseFriction())}function u(f){c=!f}return{shouldConstrain:d,constrain:p,toggleActive:u}}function E2(e,t,r,n,a){const o=es(-t+e,0),i=u(),l=p(),c=m();function d(b,x){return on(b,x)<=1}function p(){const b=i[0],x=Vt(i),g=i.lastIndexOf(b),v=i.indexOf(x)+1;return es(g,v)}function u(){return r.map((b,x)=>{const{min:g,max:v}=o,y=o.constrain(b),w=!x,k=vl(r,x);return w?v:k||d(g,y)?g:d(v,y)?v:y}).map(b=>parseFloat(b.toFixed(3)))}function m(){if(t<=e+a)return[o.max];if(n==="keepSnaps")return i;const{min:b,max:x}=l;return i.slice(b,x)}return{snapsContained:c,scrollContainLimit:l}}function R2(e,t,r){const n=t[0],a=r?n-e:Vt(t);return{limit:es(a,n)}}function D2(e,t,r,n){const o=t.min+.1,i=t.max+.1,{reachedMin:l,reachedMax:c}=es(o,i);function d(m){return m===1?c(r.get()):m===-1?l(r.get()):!1}function p(m){if(!d(m))return;const f=e*(m*-1);n.forEach(b=>b.add(f))}return{loop:p}}function P2(e){const{max:t,length:r}=e;function n(o){const i=o-t;return r?i/-r:0}return{get:n}}function A2(e,t,r,n,a){const{startEdge:o,endEdge:i}=e,{groupSlides:l}=a,c=u().map(t.measure),d=m(),p=f();function u(){return l(n).map(x=>Vt(x)[i]-x[0][o]).map(tt)}function m(){return n.map(x=>r[o]-x[o]).map(x=>-tt(x))}function f(){return l(d).map(x=>x[0]).map((x,g)=>x+c[g])}return{snaps:d,snapsAligned:p}}function I2(e,t,r,n,a,o){const{groupSlides:i}=a,{min:l,max:c}=n,d=p();function p(){const m=i(o),f=!e||t==="keepSnaps";return r.length===1?[o]:f?m:m.slice(l,c).map((b,x,g)=>{const v=!x,y=vl(g,x);if(v){const w=Vt(g[0])+1;return Jc(w)}if(y){const w=An(o)-Vt(g)[0]+1;return Jc(w,Vt(g)[0])}return b})}return{slideRegistry:d}}function T2(e,t,r,n,a){const{reachedAny:o,removeOffset:i,constrain:l}=n;function c(b){return b.concat().sort((x,g)=>tt(x)-tt(g))[0]}function d(b){const x=e?i(b):l(b),g=t.map((y,w)=>({diff:p(y-x,0),index:w})).sort((y,w)=>tt(y.diff)-tt(w.diff)),{index:v}=g[0];return{index:v,distance:x}}function p(b,x){const g=[b,b+r,b-r];if(!e)return b;if(!x)return c(g);const v=g.filter(y=>xl(y)===x);return v.length?c(v):Vt(g)-r}function u(b,x){const g=t[b]-a.get(),v=p(g,x);return{index:b,distance:v}}function m(b,x){const g=a.get()+b,{index:v,distance:y}=d(g),w=!e&&o(g);if(!x||w)return{index:v,distance:b};const k=t[v]-y,C=b+p(k,0);return{index:v,distance:C}}return{byDistance:m,byIndex:u,shortcut:p}}function O2(e,t,r,n,a,o,i){function l(u){const m=u.distance,f=u.index!==t.get();o.add(m),m&&(n.duration()?e.start():(e.update(),e.render(1),e.update())),f&&(r.set(t.get()),t.set(u.index),i.emit("select"))}function c(u,m){const f=a.byDistance(u,m);l(f)}function d(u,m){const f=t.clone().set(u),b=a.byIndex(f.get(),m);l(b)}return{distance:c,index:d}}function L2(e,t,r,n,a,o,i,l){const c={passive:!0,capture:!0};let d=0;function p(f){if(!l)return;function b(x){if(new Date().getTime()-d>10)return;i.emit("slideFocusStart"),e.scrollLeft=0;const y=r.findIndex(w=>w.includes(x));bl(y)&&(a.useDuration(0),n.index(y,0),i.emit("slideFocus"))}o.add(document,"keydown",u,!1),t.forEach((x,g)=>{o.add(x,"focus",v=>{(La(l)||l(f,v))&&b(g)},c)})}function u(f){f.code==="Tab"&&(d=new Date().getTime())}return{init:p}}function en(e){let t=e;function r(){return t}function n(c){t=i(c)}function a(c){t+=i(c)}function o(c){t-=i(c)}function i(c){return bl(c)?c:c.get()}return{get:r,set:n,add:a,subtract:o}}function df(e,t){const r=e.scroll==="x"?i:l,n=t.style;let a=null,o=!1;function i(m){return`translate3d(${m}px,0px,0px)`}function l(m){return`translate3d(0px,${m}px,0px)`}function c(m){if(o)return;const f=g2(e.direction(m));f!==a&&(n.transform=r(f),a=f)}function d(m){o=!m}function p(){o||(n.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:p,to:c,toggleActive:d}}function M2(e,t,r,n,a,o,i,l,c){const p=xn(a),u=xn(a).reverse(),m=v().concat(y());function f(S,I){return S.reduce((T,_)=>T-a[_],I)}function b(S,I){return S.reduce((T,_)=>f(T,I)>0?T.concat([_]):T,[])}function x(S){return o.map((I,T)=>({start:I-n[T]+.5+S,end:I+t-.5+S}))}function g(S,I,T){const _=x(I);return S.map(V=>{const z=T?0:-r,le=T?r:0,U=T?"end":"start",ce=_[V][U];return{index:V,loopPoint:ce,slideLocation:en(-1),translate:df(e,c[V]),target:()=>l.get()>ce?z:le}})}function v(){const S=i[0],I=b(u,S);return g(I,r,!1)}function y(){const S=t-i[0]-1,I=b(p,S);return g(I,-r,!0)}function w(){return m.every(({index:S})=>{const I=p.filter(T=>T!==S);return f(I,t)<=.1})}function k(){m.forEach(S=>{const{target:I,translate:T,slideLocation:_}=S,V=I();V!==_.get()&&(T.to(V),_.set(V))})}function C(){m.forEach(S=>S.translate.clear())}return{canLoop:w,clear:C,loop:k,loopPoints:m}}function _2(e,t,r){let n,a=!1;function o(c){if(!r)return;function d(p){for(const u of p)if(u.type==="childList"){c.reInit(),t.emit("slidesChanged");break}}n=new MutationObserver(p=>{a||(La(r)||r(c,p))&&d(p)}),n.observe(e,{childList:!0})}function i(){n&&n.disconnect(),a=!0}return{init:o,destroy:i}}function F2(e,t,r,n){const a={};let o=null,i=null,l,c=!1;function d(){l=new IntersectionObserver(b=>{c||(b.forEach(x=>{const g=t.indexOf(x.target);a[g]=x}),o=null,i=null,r.emit("slidesInView"))},{root:e.parentElement,threshold:n}),t.forEach(b=>l.observe(b))}function p(){l&&l.disconnect(),c=!0}function u(b){return vn(a).reduce((x,g)=>{const v=parseInt(g),{isIntersecting:y}=a[v];return(b&&y||!b&&!y)&&x.push(v),x},[])}function m(b=!0){if(b&&o)return o;if(!b&&i)return i;const x=u(b);return b&&(o=x),b||(i=x),x}return{init:d,destroy:p,get:m}}function z2(e,t,r,n,a,o){const{measureSize:i,startEdge:l,endEdge:c}=e,d=r[0]&&a,p=b(),u=x(),m=r.map(i),f=g();function b(){if(!d)return 0;const y=r[0];return tt(t[l]-y[l])}function x(){if(!d)return 0;const y=o.getComputedStyle(Vt(n));return parseFloat(y.getPropertyValue(`margin-${c}`))}function g(){return r.map((y,w,k)=>{const C=!w,N=vl(k,w);return C?m[w]+p:N?m[w]+u:k[w+1][l]-y[l]}).map(tt)}return{slideSizes:m,slideSizesWithGaps:f,startGap:p,endGap:u}}function $2(e,t,r,n,a,o,i,l,c){const{startEdge:d,endEdge:p,direction:u}=e,m=bl(r);function f(v,y){return xn(v).filter(w=>w%y===0).map(w=>v.slice(w,w+y))}function b(v){return v.length?xn(v).reduce((y,w,k)=>{const C=Vt(y)||0,N=C===0,S=w===An(v),I=a[d]-o[C][d],T=a[d]-o[w][p],_=!n&&N?u(i):0,V=!n&&S?u(l):0,z=tt(T-V-(I+_));return k&&z>t+c&&y.push(w),S&&y.push(v.length),y},[]).map((y,w,k)=>{const C=Math.max(k[w-1]||0);return v.slice(C,y)}):[]}function x(v){return m?f(v,r):b(v)}return{groupSlides:x}}function B2(e,t,r,n,a,o,i){const{align:l,axis:c,direction:d,startIndex:p,loop:u,duration:m,dragFree:f,dragThreshold:b,inViewThreshold:x,slidesToScroll:g,skipSnaps:v,containScroll:y,watchResize:w,watchSlides:k,watchDrag:C,watchFocus:N}=o,S=2,I=k2(),T=I.measure(t),_=r.map(I.measure),V=v2(c,d),z=V.measureSize(T),le=j2(z),U=b2(l,z),ce=!u&&!!y,K=u||!!y,{slideSizes:F,slideSizesWithGaps:ae,startGap:J,endGap:ve}=z2(V,T,_,r,K,a),be=$2(V,z,g,u,T,_,J,ve,S),{snaps:A,snapsAligned:Ie}=A2(V,U,T,_,be),G=-Vt(A)+Vt(ae),{snapsContained:ee,scrollContainLimit:xe}=E2(z,G,Ie,y,S),je=ce?ee:Ie,{limit:ue}=R2(G,je,u),Se=cf(An(je),p,u),he=Se.clone(),R=xn(r),L=({dragHandler:P,scrollBody:E,scrollBounds:Q,options:{loop:W}})=>{W||Q.constrain(P.pointerDown()),E.seek()},q=({scrollBody:P,translate:E,location:Q,offsetLocation:W,previousLocation:ne,scrollLooper:te,slideLooper:oe,dragHandler:Qe,animation:ie,eventHandler:rt,scrollBounds:At,options:{loop:Mr}},mr)=>{const pr=P.settled(),rs=!At.shouldConstrain(),rr=Mr?pr:pr&&rs,ss=rr&&!Qe.pointerDown();ss&&ie.stop();const pt=Q.get()*mr+ne.get()*(1-mr);W.set(pt),Mr&&(te.loop(P.direction()),oe.loop()),E.to(W.get()),ss&&rt.emit("settle"),rr||rt.emit("scroll")},B=x2(n,a,()=>L(Ht),P=>q(Ht,P)),Z=.68,me=je[Se.get()],qe=en(me),Re=en(me),Ge=en(me),ot=en(me),M=C2(qe,Ge,Re,ot,m,Z),se=T2(u,je,G,ue,ot),pe=O2(B,Se,he,M,se,ot,i),we=P2(ue),lt=yn(),Ke=F2(t,r,i,x),{slideRegistry:ts}=I2(ce,y,je,xe,be,R),ur=L2(e,r,ts,pe,M,lt,i,N),Ht={ownerDocument:n,ownerWindow:a,eventHandler:i,containerRect:T,slideRects:_,animation:B,axis:V,dragHandler:y2(V,e,n,a,ot,w2(V,a),qe,B,pe,M,se,Se,i,le,f,b,v,Z,C),eventStore:lt,percentOfView:le,index:Se,indexPrevious:he,limit:ue,location:qe,offsetLocation:Ge,previousLocation:Re,options:o,resizeHandler:N2(t,i,a,r,V,w,I),scrollBody:M,scrollBounds:S2(ue,Ge,ot,M,le),scrollLooper:D2(G,ue,Ge,[qe,Ge,Re,ot]),scrollProgress:we,scrollSnapList:je.map(we.get),scrollSnaps:je,scrollTarget:se,scrollTo:pe,slideLooper:M2(V,z,G,F,ae,A,je,Ge,r),slideFocus:ur,slidesHandler:_2(t,i,k),slidesInView:Ke,slideIndexes:R,slideRegistry:ts,slidesToScroll:be,target:ot,translate:df(V,t)};return Ht}function U2(){let e={},t;function r(d){t=d}function n(d){return e[d]||[]}function a(d){return n(d).forEach(p=>p(t,d)),c}function o(d,p){return e[d]=n(d).concat([p]),c}function i(d,p){return e[d]=n(d).filter(u=>u!==p),c}function l(){e={}}const c={init:r,emit:a,off:i,on:o,clear:l};return c}const G2={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function V2(e){function t(o,i){return lf(o,i||{})}function r(o){const i=o.breakpoints||{},l=vn(i).filter(c=>e.matchMedia(c).matches).map(c=>i[c]).reduce((c,d)=>t(c,d),{});return t(o,l)}function n(o){return o.map(i=>vn(i.breakpoints||{})).reduce((i,l)=>i.concat(l),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:r,optionsMediaQueries:n}}function q2(e){let t=[];function r(o,i){return t=i.filter(({options:l})=>e.optionsAtMedia(l).active!==!1),t.forEach(l=>l.init(o,e)),i.reduce((l,c)=>Object.assign(l,{[c.name]:c}),{})}function n(){t=t.filter(o=>o.destroy())}return{init:r,destroy:n}}function ua(e,t,r){const n=e.ownerDocument,a=n.defaultView,o=V2(a),i=q2(o),l=yn(),c=U2(),{mergeOptions:d,optionsAtMedia:p,optionsMediaQueries:u}=o,{on:m,off:f,emit:b}=c,x=V;let g=!1,v,y=d(G2,ua.globalOptions),w=d(y),k=[],C,N,S;function I(){const{container:R,slides:L}=w;N=(Zo(R)?e.querySelector(R):R)||e.children[0];const B=Zo(L)?N.querySelectorAll(L):L;S=[].slice.call(B||N.children)}function T(R){const L=B2(e,N,S,n,a,R,c);if(R.loop&&!L.slideLooper.canLoop()){const q=Object.assign({},R,{loop:!1});return T(q)}return L}function _(R,L){g||(y=d(y,R),w=p(y),k=L||k,I(),v=T(w),u([y,...k.map(({options:q})=>q)]).forEach(q=>l.add(q,"change",V)),w.active&&(v.translate.to(v.location.get()),v.animation.init(),v.slidesInView.init(),v.slideFocus.init(he),v.eventHandler.init(he),v.resizeHandler.init(he),v.slidesHandler.init(he),v.options.loop&&v.slideLooper.loop(),N.offsetParent&&S.length&&v.dragHandler.init(he),C=i.init(he,k)))}function V(R,L){const q=be();z(),_(d({startIndex:q},R),L),c.emit("reInit")}function z(){v.dragHandler.destroy(),v.eventStore.clear(),v.translate.clear(),v.slideLooper.clear(),v.resizeHandler.destroy(),v.slidesHandler.destroy(),v.slidesInView.destroy(),v.animation.destroy(),i.destroy(),l.clear()}function le(){g||(g=!0,l.clear(),z(),c.emit("destroy"),c.clear())}function U(R,L,q){!w.active||g||(v.scrollBody.useBaseFriction().useDuration(L===!0?0:w.duration),v.scrollTo.index(R,q||0))}function ce(R){const L=v.index.add(1).get();U(L,R,-1)}function K(R){const L=v.index.add(-1).get();U(L,R,1)}function F(){return v.index.add(1).get()!==be()}function ae(){return v.index.add(-1).get()!==be()}function J(){return v.scrollSnapList}function ve(){return v.scrollProgress.get(v.offsetLocation.get())}function be(){return v.index.get()}function A(){return v.indexPrevious.get()}function Ie(){return v.slidesInView.get()}function G(){return v.slidesInView.get(!1)}function ee(){return C}function xe(){return v}function je(){return e}function ue(){return N}function Se(){return S}const he={canScrollNext:F,canScrollPrev:ae,containerNode:ue,internalEngine:xe,destroy:le,off:f,on:m,emit:b,plugins:ee,previousScrollSnap:A,reInit:x,rootNode:je,scrollNext:ce,scrollPrev:K,scrollProgress:ve,scrollSnapList:J,scrollTo:U,selectedScrollSnap:be,slideNodes:Se,slidesInView:Ie,slidesNotInView:G};return _(t,r),setTimeout(()=>c.emit("init"),0),he}ua.globalOptions=void 0;function yl(e={},t=[]){const r=h.useRef(e),n=h.useRef(t),[a,o]=h.useState(),[i,l]=h.useState(),c=h.useCallback(()=>{a&&a.reInit(r.current,n.current)},[a]);return h.useEffect(()=>{gl(r.current,e)||(r.current=e,c())},[e,c]),h.useEffect(()=>{h2(n.current,t)||(n.current=t,c())},[t,c]),h.useEffect(()=>{if(p2()&&i){ua.globalOptions=yl.globalOptions;const d=ua(i,r.current,n.current);return o(d),()=>d.destroy()}else o(void 0)},[i,o]),[l,a]}yl.globalOptions=void 0;const uf=h.createContext(null);function Ma(){const e=h.useContext(uf);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const mf=h.forwardRef(({orientation:e="horizontal",opts:t,setApi:r,plugins:n,className:a,children:o,...i},l)=>{const[c,d]=yl({...t,axis:e==="horizontal"?"x":"y"},n),[p,u]=h.useState(!1),[m,f]=h.useState(!1),b=h.useCallback(y=>{y&&(u(y.canScrollPrev()),f(y.canScrollNext()))},[]),x=h.useCallback(()=>{d==null||d.scrollPrev()},[d]),g=h.useCallback(()=>{d==null||d.scrollNext()},[d]),v=h.useCallback(y=>{y.key==="ArrowLeft"?(y.preventDefault(),x()):y.key==="ArrowRight"&&(y.preventDefault(),g())},[x,g]);return h.useEffect(()=>{!d||!r||r(d)},[d,r]),h.useEffect(()=>{if(d)return b(d),d.on("reInit",b),d.on("select",b),()=>{d==null||d.off("select",b)}},[d,b]),s.jsx(uf.Provider,{value:{carouselRef:c,api:d,opts:t,orientation:e||((t==null?void 0:t.axis)==="y"?"vertical":"horizontal"),scrollPrev:x,scrollNext:g,canScrollPrev:p,canScrollNext:m},children:s.jsx("div",{ref:l,onKeyDownCapture:v,className:X("relative",a),role:"region","aria-roledescription":"carousel",...i,children:o})})});mf.displayName="Carousel";const pf=h.forwardRef(({className:e,...t},r)=>{const{carouselRef:n,orientation:a}=Ma();return s.jsx("div",{ref:n,className:"overflow-hidden",children:s.jsx("div",{ref:r,className:X("flex",a==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...t})})});pf.displayName="CarouselContent";const hf=h.forwardRef(({className:e,...t},r)=>{const{orientation:n}=Ma();return s.jsx("div",{ref:r,role:"group","aria-roledescription":"slide",className:X("min-w-0 shrink-0 grow-0 basis-full",n==="horizontal"?"pl-4":"pt-4",e),...t})});hf.displayName="CarouselItem";const W2=h.forwardRef(({className:e,variant:t="outline",size:r="icon",...n},a)=>{const{orientation:o,scrollPrev:i,canScrollPrev:l}=Ma();return s.jsxs(O,{ref:a,variant:t,size:r,className:X("absolute  h-8 w-8 rounded-full",o==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!l,onClick:i,...n,children:[s.jsx(wi,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Previous slide"})]})});W2.displayName="CarouselPrevious";const H2=h.forwardRef(({className:e,variant:t="outline",size:r="icon",...n},a)=>{const{orientation:o,scrollNext:i,canScrollNext:l}=Ma();return s.jsxs(O,{ref:a,variant:t,size:r,className:X("absolute h-8 w-8 rounded-full",o==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!l,onClick:i,...n,children:[s.jsx(Cb,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Next slide"})]})});H2.displayName="CarouselNext";const Zc=["TnG KL Central","TnG Petaling Jaya","TnG Shah Alam","TnG Subang Jaya","TnG Damansara","TnG Mont Kiara","TnG KLCC","TnG Bukit Bintang","TnG Cheras","TnG Ampang","TnG Kepong","TnG Wangsa Maju","TnG Setapak","TnG Sentul","TnG Brickfields"];function K2(){const e=Math.floor(Math.random()*Zc.length);return Zc[e]}function Q2(){return(Math.random()*45+5).toFixed(2)}function ed(){return{tngSite:K2(),tngRoute:Q2()}}function Os(e,t,r,n){const o=(r-e)*(Math.PI/180),i=(n-t)*(Math.PI/180),l=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e*(Math.PI/180))*Math.cos(r*(Math.PI/180))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}function Y2(){const[e,t]=h.useState(!1),[r,n]=h.useState(null),[a,o]=h.useState(""),[i,l]=h.useState([]),[c,d]=h.useState([]),[p,u]=h.useState(!1),[m,f]=h.useState([]),[b,x]=h.useState([]),[g,v]=h.useState(!1),[y,w]=h.useState(!1),[k,C]=h.useState(null),[N,S]=h.useState(!1),[I,T]=h.useState("end"),[_,V]=h.useState(1),[z,le]=h.useState(!1),[U,ce]=h.useState(!1),[K,F]=h.useState(!1),[ae,J]=h.useState(`- Interactive table with Drag & Drop , Calculations , and Image Gallery

- This Routes for Driver Vending Mechine , FamilyMart only`),[ve,be]=h.useState("Content"),[A,Ie]=h.useState(!1),[G,ee]=h.useState(!1),[xe,je]=h.useState(!1),[ue,Se]=h.useState(!1),[he,R]=h.useState(!1),[L,q]=h.useState(0),[B,Z]=h.useState(!1),[me,qe]=h.useState(null),[Re,Ge]=h.useState(""),[ot,M]=h.useState(""),[se,pe]=h.useState([]),[we,lt]=h.useState(!0),[Ke,ts]=h.useState(),[ur,Ht]=h.useState(0),[P,E]=h.useState(null),[Q,W]=h.useState(!1),[ne,te]=h.useState(null),[oe,Qe]=h.useState(!1),[ie,rt]=h.useState(new Date),[At,Mr]=h.useState(""),[mr,pr]=h.useState("#3b82f6"),[rs,rr]=h.useState(!1),ss=h.useRef(null),pt=h.useRef(null),{toast:$e}=jt(),{theme:Pf,toggleTheme:Af}=Ei(),{rows:gt,columns:ht,isLoading:If,createRow:Cl,updateRow:za,deleteRow:Tf,reorderRows:Of,reorderColumns:Lf,addImageToRow:Sl,updateImageInRow:Mf,deleteImageFromRow:_f,createColumn:Ff,deleteColumn:zf}=Ri(),$a=Le({mutationFn:async D=>{const $=await We("PUT","/api/table-rows/bulk-update-color",D);if(!$.ok)throw new Error("Failed to update marker colors");return $.json()},onSuccess:()=>{lr.invalidateQueries({queryKey:["/api/table-rows"]}),Mr(""),pr("#3b82f6"),$e({title:"Marker colors updated!",description:"All locations in the selected route have been updated."})},onError:()=>{$e({title:"Error",description:"Failed to update marker colors. Please try again.",variant:"destructive"})}}),$f=()=>{if(!At){$e({title:"Select a route",description:"Please select a route to update marker colors.",variant:"destructive"});return}$a.mutate({route:At,color:mr})},{data:_r=[],isLoading:El}=qt({queryKey:["/api/pages"]});h.useEffect(()=>{(async()=>{!El&&_r.length===0&&await Vs.mutateAsync({title:ve,description:ae,sortOrder:0})})()},[_r.length,El]);const Vs=Le({mutationFn:async D=>await(await We("POST","/api/pages",D)).json(),onSuccess:()=>{lr.invalidateQueries({queryKey:["/api/pages"]}),$e({title:"Success",description:"Page created successfully!"})},onError:D=>{$e({title:"Error",description:D instanceof Error?D.message:"Failed to create page",variant:"destructive"})}}),In=Le({mutationFn:async({id:D,updates:$})=>await(await We("PATCH",`/api/pages/${D}`,$)).json(),onSuccess:()=>{lr.invalidateQueries({queryKey:["/api/pages"]}),$e({title:"Success",description:"Page updated successfully!"})},onError:D=>{$e({title:"Error",description:D instanceof Error?D.message:"Failed to update page",variant:"destructive"})}}),qs=Le({mutationFn:async D=>{await We("DELETE",`/api/pages/${D}`)},onSuccess:()=>{lr.invalidateQueries({queryKey:["/api/pages"]}),$e({title:"Success",description:"Page deleted successfully!"})},onError:D=>{$e({title:"Error",description:D instanceof Error?D.message:"Failed to delete page",variant:"destructive"})}});h.useEffect(()=>{(async()=>{if(ht.length===0)return;try{const ge=ac(),Ze=await fetch(`/api/layout?userId=${encodeURIComponent(ge)}`);if(Ze.ok){const st=await Ze.json(),at=Object.keys(st.columnVisibility).filter(Qt=>st.columnVisibility[Qt]&&ht.some(ns=>ns.id===Qt)),Ws=st.columnOrder.filter(Qt=>ht.some(ns=>ns.id===Qt)),sr=ht.find(Qt=>Qt.dataKey==="kilometer");sr&&!at.includes(sr.id)&&at.push(sr.id),at.length>0&&f(at),Ws.length>0&&x(Ws);return}else Ze.status===404&&localStorage.removeItem("tableColumnPreferences")}catch{}const $=["No","Code","Location","Delivery"],ke=ht.filter(ge=>$.includes(ge.name)).map(ge=>ge.id),Ve=ht.filter(ge=>ge.dataKey==="latitude"||ge.dataKey==="longitude").map(ge=>ge.id);f(ke.length>0?ke:ht.map(ge=>ge.id).filter(ge=>!Ve.includes(ge))),x(ht.map(ge=>ge.id))})()},[ht]);const Rl=(D,$)=>{const ke={visibleColumns:D,columnOrder:$};localStorage.setItem("tableColumnPreferences",JSON.stringify(ke))},Bf=D=>D.trim()?D.split(`
`).map($=>$.trim()).filter($=>$.length>0).map($=>{if($.includes(":")){const[ke,...Ve]=$.split(":");return{term:ke.trim(),definition:Ve.join(":").trim()}}return{term:"",definition:$}}):[],Uf=D=>D.filter($=>$.term.trim()||$.definition.trim()).map($=>$.term.trim()?`${$.term.trim()} : ${$.definition.trim()}`:$.definition.trim()).join(`
`),Gf=()=>{qe(null),Ge(""),M(""),pe([]),Z(!0)},Vf=D=>{qe(D),Ge(D.title||""),M(D.description||""),pe(Bf(D.description||"")),Z(!0)},qf=async()=>{if(!Re.trim()){$e({title:"Error",description:"Page title is required",variant:"destructive"});return}const D=Uf(se);try{me?await In.mutateAsync({id:me.id,updates:{title:Re.trim(),description:D}}):await Vs.mutateAsync({title:Re.trim(),description:D,sortOrder:_r.length}),Z(!1),qe(null),Ge(""),M("")}catch($){console.error("Error saving page:",$)}},Wf=D=>{if(_r.length<=1){$e({title:"Error",description:"Cannot delete the last page",variant:"destructive"});return}te(D),W(!0)},Hf=async()=>{if(!ne)return;const D=_r.findIndex($=>$.id===ne.id);try{await qs.mutateAsync(ne.id),D!==-1&&L>=D&&L>0&&q($=>Math.max(0,$-1)),W(!1),te(null)}catch($){console.error("Error deleting page:",$)}},Kf=()=>{W(!1),te(null)},Kt=h.useMemo(()=>[..._r].sort((D,$)=>D.sortOrder-$.sortOrder),[_r]);h.useEffect(()=>{Kt.length>0&&L>=Kt.length&&q(Math.max(0,Kt.length-1))},[Kt.length,L]),Kt[L];const Qf=h.useMemo(()=>{if(b.length===0||m.length===0)return ht;let D=b.map($=>ht.find(ke=>ke.id===$)).filter($=>$!==void 0).filter($=>m.includes($.id));return e||(D=D.filter($=>$.dataKey!=="latitude"&&$.dataKey!=="longitude"&&$.dataKey!=="tollPrice")),D},[ht,b,m,e]),Dl=Array.from(new Set(gt.map(D=>D.route).filter(Boolean))).filter(D=>D!=="Warehouse").sort(),Yf=Array.from(new Set(gt.map(D=>D.delivery).filter(Boolean))).filter(D=>D!=="Available").sort(),hr=(()=>{const D=i.length>0,$=gt.find(Ve=>Ve.location==="QL Kitchen"),ke=gt.filter(Ve=>{const ge=a===""||Object.values(Ve).some(at=>String(at).toLowerCase().includes(a.toLowerCase())),Ze=i.length===0||i.includes(Ve.route),st=c.length===0||!c.includes(Ve.delivery);return ge&&Ze&&st});if(D&&$){const Ve=ke.filter(Ze=>Ze.location!=="QL Kitchen");return a===""||Object.values($).some(Ze=>String(Ze).toLowerCase().includes(a.toLowerCase()))?[$,...Ve]:Ve}return ke})(),Xf=h.useMemo(()=>{const D=gt.find(ge=>ge.location==="QL Kitchen");if(!D)return hr.map(ge=>({...ge,kilometer:"",segmentDistance:0}));if(!D.latitude||!D.longitude)return hr.map(ge=>({...ge,kilometer:"",segmentDistance:0}));const $=parseFloat(D.latitude),ke=parseFloat(D.longitude);if(!Number.isFinite($)||!Number.isFinite(ke))return hr.map(ge=>({...ge,kilometer:"",segmentDistance:0}));if(a!==""||i.length>0||c.length>0){let ge=0,Ze=$,st=ke;return hr.map((at,Ws)=>{if(at.location==="QL Kitchen")return ge=0,Ze=$,st=ke,{...at,kilometer:0,segmentDistance:0};if(!at.latitude||!at.longitude)return{...at,kilometer:"",segmentDistance:0};const sr=parseFloat(at.latitude),Qt=parseFloat(at.longitude);if(!Number.isFinite(sr)||!Number.isFinite(Qt))return{...at,kilometer:"",segmentDistance:0};const ns=Os(Ze,st,sr,Qt);return ge+=ns,Ze=sr,st=Qt,{...at,kilometer:ge,segmentDistance:ns}})}else return hr.map(ge=>{if(ge.location==="QL Kitchen")return{...ge,kilometer:0,segmentDistance:0};if(!ge.latitude||!ge.longitude)return{...ge,kilometer:"",segmentDistance:0};const Ze=parseFloat(ge.latitude),st=parseFloat(ge.longitude);if(!Number.isFinite(Ze)||!Number.isFinite(st))return{...ge,kilometer:"",segmentDistance:0};const at=Os($,ke,Ze,st);return{...ge,kilometer:at,segmentDistance:at}})},[gt,hr,a,i,c]),Jf=async()=>{o(""),l([]),d([]);const D=gt.map($=>$.location!=="QL Kitchen"&&$.no!==$.sortOrder?za.mutateAsync({id:$.id,updates:{no:$.sortOrder}}):Promise.resolve());await Promise.all(D)},Zf=()=>{je(!0)},e0=()=>{je(!1),$e({title:"Data Saved",description:"Table data has been saved successfully."})},t0=()=>{if(!e){$e({title:"Access Denied",description:"Please enable Edit mode to add new rows.",variant:"destructive"});return}S(!0)},r0=async()=>{try{const{tngSite:D,tngRoute:$}=ed(),ke={no:0,route:"New Route",location:"New Location",delivery:"Pending",tngSite:D,tngRoute:$,images:[]};I==="end"?(await Cl.mutateAsync(ke),$e({title:"Row Added",description:"New row has been added to the end of the table."})):(await Cl.mutateAsync(ke),$e({title:"Row Added",description:`New row has been added at position ${_}.`})),S(!1)}catch{$e({title:"Error",description:"Failed to add new row.",variant:"destructive"})}},s0=async(D,$)=>{f(D),x($),Rl(D,$);try{const ke=$.filter(Ze=>ht.some(st=>st.id===Ze)),Ve=ht.reduce((Ze,st)=>(Ze[st.id]=D.includes(st.id),Ze),{}),ge=ac();await fetch("/api/layout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:ge,columnOrder:ke,columnVisibility:Ve})})}catch(ke){console.error("Failed to save layout to database:",ke)}$e({title:"Columns Updated",description:"Your column preferences have been saved."})},n0=async()=>{e?le(!0):g?(F(!0),await new Promise(D=>setTimeout(D,1e3)),F(!1),t(!0),$e({title:"Edit Mode Enabled",description:"You can now edit and modify table data."})):(C("edit"),w(!0))},a0=async()=>{le(!1),u(!1),S(!1),n(null),C(null),F(!0),await new Promise(D=>setTimeout(D,1e3)),t(!1),v(!1),F(!1),$e({title:"Edit Mode Disabled",description:"Edit mode has been turned off and password cleared."})},o0=()=>{le(!1)};h.useEffect(()=>{!e&&g&&v(!1)},[e,g]),h.useEffect(()=>{localStorage.getItem("hasSlideCarousel")==="true"&&lt(!1)},[]),h.useEffect(()=>{const D=setInterval(()=>{rt(new Date)},1e3);return()=>clearInterval(D)},[]);const i0=D=>{const $={weekday:"short",month:"short",day:"numeric",year:"numeric"};return D.toLocaleString("en-US",$)};h.useEffect(()=>{Ke&&(Ke.scrollTo(0,!1),Ht(0))},[Ke]),h.useEffect(()=>{if(!Ke)return;const D=()=>{const $=Ke.selectedScrollSnap(),ke=ur;pt.current&&clearTimeout(pt.current),E(ke),Ht($),l0(),pt.current=setTimeout(()=>{E(null),pt.current=null},400)};return Ht(Ke.selectedScrollSnap()),Ke.on("select",D),()=>{Ke.off("select",D),pt.current&&clearTimeout(pt.current)}},[Ke,ur]);const l0=()=>{lt(!1),localStorage.setItem("hasSlideCarousel","true")},c0=async()=>{v(!0),k==="edit"&&(F(!0),await new Promise(D=>setTimeout(D,1e3)),F(!1),t(!0),$e({title:"Edit Mode Enabled",description:"You can now edit and modify table data."})),C(null)},d0=async()=>{if(!e){$e({title:"Access Denied",description:"Please enable Edit mode to generate TnG values.",variant:"destructive"});return}try{const D=hr.filter($=>!$.tngSite||$.tngSite===""||$.tngSite==="Site"||!$.tngRoute||$.tngRoute===""||$.tngRoute==="Route");if(D.length===0){$e({title:"No Rows to Update",description:"All rows already have TnG values assigned."});return}for(const $ of D){const{tngSite:ke,tngRoute:Ve}=ed();await za.mutateAsync({id:$.id,updates:{tngSite:ke,tngRoute:Ve}})}$e({title:"TnG Values Generated",description:`Generated TnG values for ${D.length} row${D.length!==1?"s":""}.`})}catch{$e({title:"Error",description:"Failed to generate TnG values.",variant:"destructive"})}},u0=async()=>{if(!e){$e({title:"Access Denied",description:"Please enable Edit mode to calculate tolls.",variant:"destructive"});return}try{if($e({title:"Calculating Tolls",description:"Computing toll prices using Google Maps"}),!(await fetch("/api/calculate-tolls",{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error;$e({title:"Tolls Calculated",description:"Toll prices have been updated."}),window.location.reload()}catch{$e({title:"Error",description:"Failed to calculate tolls.",variant:"destructive"})}},[m0,Pl]=Ce.useState(!1),[p0,Al]=Ce.useState(!1);return Ce.useEffect(()=>{if(sessionStorage.getItem("routevm_loaded")){Al(!1);const $=setTimeout(()=>{Pl(!0)},1e3);return()=>clearTimeout($)}else{Al(!0);const $=setTimeout(()=>{Pl(!0),sessionStorage.setItem("routevm_loaded","true")},5e3);return()=>clearTimeout($)}},[]),Ce.useEffect(()=>{const D=()=>{sessionStorage.removeItem("routevm_loaded")},$=()=>{document.hidden&&sessionStorage.removeItem("routevm_loaded")};return window.addEventListener("beforeunload",D),document.addEventListener("visibilitychange",$),()=>{window.removeEventListener("beforeunload",D),document.removeEventListener("visibilitychange",$)}},[]),If||!m0?s.jsx("div",{className:"min-h-screen relative",children:p0?s.jsx(rl,{message:"Loading table data...",type:"wave"}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Loading..."})]})})}):s.jsxs(s.Fragment,{children:[K&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-slate-50/95 to-slate-100/95 dark:from-slate-900/95 dark:to-slate-800/95 backdrop-blur-sm",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Loading..."})]})}),s.jsx("div",{className:"animate-in fade-in duration-500",children:s.jsx(KN,{editMode:e,onEditModeRequest:n0,onShowCustomization:()=>u(!0),onAddRow:t0,onSaveData:Zf,onGenerateTng:d0,onOptimizeRoute:()=>ee(!0),onCalculateTolls:u0,onSaveLayout:()=>{},onBulkColorEdit:()=>rr(!0),onSavedLinks:()=>R(!0),onShowTutorial:()=>Qe(!0),onAddColumn:async D=>{try{const $=await Ff.mutateAsync(D),ke=[...m,$.id],Ve=[...b,$.id];f(ke),x(Ve),Rl(ke,Ve),$e({title:"Success",description:`Column "${D.name}" created successfully!`})}catch($){throw console.error("Failed to create column:",$),$}},isAuthenticated:!0,theme:Pf,onToggleTheme:Af})}),s.jsx("main",{className:"pt-[72px] pb-20 animate-in slide-in-from-bottom-4 fade-in duration-700 delay-150",children:s.jsxs("div",{className:"container mx-auto px-4 py-8","data-testid":"table-page",children:[s.jsx("div",{className:"mb-8 relative animate-in fade-in slide-in-from-top-2 duration-600 delay-300",children:Kt.length>0?s.jsx(mf,{className:"w-full pb-2",opts:{loop:Kt.length>1},setApi:ts,children:s.jsxs("div",{className:"overflow-hidden rounded-2xl border-2 border-gray-300 dark:border-white/10 bg-white/90 dark:bg-black/30 backdrop-blur-2xl shadow-xl transition-all duration-500",children:[s.jsx(pf,{children:Kt.map((D,$)=>{const ke=$===ur,Ve=$===P;return s.jsxs(hf,{className:ke&&P!==null?"carousel-zoom-in":Ve&&P!==null?"carousel-zoom-out":"",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-3 cursor-pointer hover:bg-blue-100/30 dark:hover:bg-blue-900/20 transition-colors duration-300 text-sm bg-transparent border-transparent",onClick:()=>Ie(!A),children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("h1",{className:"font-bold text-gray-500 dark:text-blue-300",style:{fontSize:"12px"},"data-testid":`page-title-${D.id}`,children:D.title||"Untitled"}),Kt.length>1&&we&&s.jsxs("div",{className:"flex items-center relative",children:[s.jsx("style",{children:`
                                @keyframes chevron1 {
                                  0%, 15% { opacity: 1; transform: translateX(0px) scale(1); }
                                  20%, 100% { opacity: 0; transform: translateX(-5px) scale(0.9); }
                                }
                                @keyframes chevron2 {
                                  0%, 15% { opacity: 0; transform: translateX(5px) scale(0.9); }
                                  20%, 35% { opacity: 1; transform: translateX(0px) scale(1); }
                                  40%, 100% { opacity: 0; transform: translateX(-5px) scale(0.9); }
                                }
                                @keyframes chevron3 {
                                  0%, 35% { opacity: 0; transform: translateX(5px) scale(0.9); }
                                  40%, 55% { opacity: 1; transform: translateX(0px) scale(1); }
                                  60%, 100% { opacity: 0; transform: translateX(-5px) scale(0.9); }
                                }
                                @keyframes chevron5 {
                                  0%, 55% { opacity: 0; transform: translateX(5px) scale(0.9); }
                                  60%, 65% { opacity: 1; transform: translateX(0px) scale(1); }
                                  70%, 85% { opacity: 0; transform: translateX(-5px) scale(0.9); }
                                  90%, 100% { opacity: 1; transform: translateX(0px) scale(1.05); }
                                }
                                .chevron-1 { animation: chevron1 4s ease-in-out infinite; }
                                .chevron-2 { animation: chevron2 4s ease-in-out infinite; }
                                .chevron-3 { animation: chevron3 4s ease-in-out infinite; }
                                .chevron-5 { animation: chevron5 4s ease-in-out infinite; }
                              `}),s.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-blue-500 to-cyan-500 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent chevron-1 absolute",style:{lineHeight:1},children:"<"}),s.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-blue-500 to-cyan-500 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent chevron-2 absolute",style:{lineHeight:1},children:"<<"}),s.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-blue-500 to-cyan-500 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent chevron-3 absolute",style:{lineHeight:1},children:"<<<"}),s.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-blue-500 to-cyan-500 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent chevron-5 absolute",style:{lineHeight:1},children:"<<<<<"}),s.jsx("span",{className:"text-lg font-bold opacity-0",style:{lineHeight:1},children:"<<<<<"})]}),e&&s.jsxs("div",{className:"flex items-center gap-2",onClick:ge=>ge.stopPropagation(),children:[s.jsx(O,{size:"sm",variant:"ghost",onClick:()=>Vf(D),className:"h-6 w-6 p-0","data-testid":`button-edit-page-${D.id}`,children:s.jsx(Hu,{className:"h-3 w-3 text-blue-500 dark:text-blue-400"})}),Kt.length>1&&s.jsx(O,{size:"sm",variant:"ghost",onClick:()=>Wf(D),disabled:qs.isPending,className:"h-6 w-6 p-0","data-testid":`button-delete-page-${D.id}`,children:s.jsx(ls,{className:"h-3 w-3 text-red-500 dark:text-red-400"})})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("button",{className:"p-2 rounded-full hover:bg-blue-200/50 dark:hover:bg-blue-800/50 transition-all duration-300 group","data-testid":"button-toggle-header",children:A?s.jsx(ki,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform duration-300"}):s.jsx(Cn,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform duration-300"})})})]}),s.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-in-out ${A?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:s.jsxs("div",{className:"px-4 pb-3 border-t border-blue-200/50 dark:border-blue-500/20 pt-3 bg-gradient-to-b from-blue-50/30 to-transparent dark:from-blue-950/20 dark:to-transparent",children:[s.jsx("dl",{className:"space-y-1",style:{fontSize:"10.5px",lineHeight:"1.4"},"data-testid":`page-description-${D.id}`,children:(D.description||"").split(`
`).map((ge,Ze)=>{const st=ge.trim();if(!st)return null;if(st.includes(":")){const[at,...Ws]=st.split(":"),sr=Ws.join(":").trim();return s.jsxs("div",{className:"flex items-start gap-2",style:{lineHeight:"1.4"},children:[s.jsxs("dt",{className:"w-24 flex-shrink-0 font-semibold text-blue-600 dark:text-blue-400",style:{margin:0,padding:0},children:[at.trim(),":"]}),s.jsx("dd",{className:"flex-1 text-gray-700 dark:text-gray-300",style:{margin:0,padding:0},children:sr})]},Ze)}return s.jsx("p",{className:"text-gray-700 dark:text-gray-300",style:{margin:"2px 0",lineHeight:"1.4"},children:st},Ze)})}),s.jsx("div",{className:"mt-3 pt-2 border-t border-blue-200/30 dark:border-blue-500/10 flex justify-end",children:s.jsx("div",{className:"text-gray-500 dark:text-gray-500 font-normal",style:{fontSize:"10px"},children:i0(ie)})})]})})]},D.id)})}),e&&s.jsx("div",{className:"px-6 pb-4 border-t border-blue-200/50 dark:border-blue-500/20",children:s.jsxs(O,{onClick:Gf,className:"w-full mt-4 bg-blue-500 hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700","data-testid":"button-add-page",children:[s.jsx(Tr,{className:"h-4 w-4 mr-2"}),"Add Page"]})})]})}):s.jsx("div",{className:"overflow-hidden rounded-2xl border-2 border-gray-300 dark:border-white/10 bg-white/90 dark:bg-black/30 backdrop-blur-2xl shadow-xl transition-all duration-500 px-6 py-4 text-center text-gray-500",children:s.jsx("p",{children:"No pages available"})})}),s.jsx(ze,{open:B,onOpenChange:Z,children:s.jsxs(Me,{"data-testid":"dialog-page-form",children:[s.jsxs(_e,{children:[s.jsx(Fe,{style:{fontSize:"10px"},children:me?"Edit Page":"Add Page"}),s.jsx(He,{style:{fontSize:"10px"},children:me?"Update the page details below.":"Create a new page with a title and description."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"page-title",style:{fontSize:"10px"},children:"Title"}),s.jsx(Ae,{id:"page-title",value:Re,onChange:D=>Ge(D.target.value),placeholder:"Enter page title...",style:{fontSize:"10px"},"data-testid":"input-page-title"})]}),s.jsxs("div",{children:[s.jsx(ye,{style:{fontSize:"10px"},children:"Description"}),s.jsxs("div",{className:"space-y-3 border border-gray-200 dark:border-gray-700 rounded-md p-3",children:[se.length>0?s.jsx("div",{className:"space-y-2",children:se.map((D,$)=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ae,{value:D.term,onChange:ke=>{const Ve=[...se];Ve[$].term=ke.target.value,pe(Ve)},className:"w-24",style:{fontSize:"10px"},placeholder:"Term","data-testid":`input-page-item-term-${$}`}),s.jsx(Ae,{value:D.definition,onChange:ke=>{const Ve=[...se];Ve[$].definition=ke.target.value,pe(Ve)},className:"flex-1",style:{fontSize:"10px"},placeholder:"Definition","data-testid":`input-page-item-definition-${$}`}),s.jsx(O,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 bg-transparent border-transparent hover:bg-transparent hover:border-transparent text-red-600 hover:text-red-700",onClick:()=>{const ke=se.filter((Ve,ge)=>ge!==$);pe(ke)},"data-testid":`button-remove-page-item-${$}`,children:s.jsx(ls,{className:"w-3 h-3"})})]},$))}):s.jsx("p",{className:"text-muted-foreground",style:{fontSize:"10px"},children:'No items yet. Click "Add Item" to start.'}),s.jsxs(O,{variant:"outline",size:"sm",onClick:()=>{pe([...se,{term:"",definition:""}])},className:"bg-transparent border-transparent hover:bg-transparent hover:border-transparent text-blue-600 hover:text-blue-700",style:{fontSize:"10px"},"data-testid":"button-add-page-item",children:[s.jsx(Tr,{className:"w-3 h-3 mr-1"}),"Add Item"]})]})]})]}),s.jsxs(Ye,{children:[s.jsx(O,{variant:"outline",onClick:()=>Z(!1),disabled:Vs.isPending||In.isPending,style:{fontSize:"10px"},"data-testid":"button-cancel-page",children:"Cancel"}),s.jsx(O,{onClick:qf,disabled:Vs.isPending||In.isPending||!Re.trim(),style:{fontSize:"10px"},"data-testid":"button-save-page",children:Vs.isPending||In.isPending?"Saving...":"Save"})]})]})}),s.jsx(ze,{open:Q,onOpenChange:W,children:s.jsxs(Me,{className:"sm:max-w-md animate-in zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 duration-300 bg-gradient-to-br from-red-50 to-white dark:from-red-950/40 dark:to-gray-900 border-red-200 dark:border-red-500/30 shadow-2xl",children:[s.jsxs(_e,{className:"space-y-3",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-red-100 dark:bg-red-900/50 rounded-full flex items-center justify-center animate-in zoom-in-50 duration-500 delay-100",children:s.jsx(ls,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),s.jsx(Fe,{className:"text-center text-red-900 dark:text-red-100",style:{fontSize:"14px"},children:"Delete Page"}),s.jsxs(He,{className:"text-center text-gray-600 dark:text-gray-400",style:{fontSize:"11px"},children:['Are you sure you want to delete the page "',ne==null?void 0:ne.title,'"? This action cannot be undone.']})]}),s.jsxs(Ye,{className:"flex-row justify-center gap-3 sm:justify-center mt-4",children:[s.jsx(O,{variant:"outline",onClick:Kf,disabled:qs.isPending,className:"min-w-[100px] border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800",style:{fontSize:"11px"},"data-testid":"button-cancel-delete-page",children:"Cancel"}),s.jsx(O,{onClick:Hf,disabled:qs.isPending,className:"min-w-[100px] bg-red-600 hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600 text-white shadow-lg",style:{fontSize:"11px"},"data-testid":"button-confirm-delete-page",children:qs.isPending?"Deleting...":"Delete Page"})]})]})}),r&&r!=="access-denied"&&!U&&(()=>{const D=gt.find(ke=>ke.id===r);return D?D.images&&D.images.length>0?s.jsx(LN,{rowId:r,images:D.images,location:D.location,onClose:()=>n(null),onAddImage:Sl,onUpdateImage:Mf,onDeleteImage:_f}):s.jsx(ON,{rowId:r,location:D.location,onClose:()=>n(null),onAddImage:Sl}):null})(),s.jsx(ze,{open:rs,onOpenChange:rr,children:s.jsxs(Me,{className:"sm:max-w-lg animate-in zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 duration-300 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950/40 dark:to-pink-950/40 border-2 border-purple-300 dark:border-purple-700 shadow-2xl",children:[s.jsxs(_e,{className:"space-y-3",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-purple-100 dark:bg-purple-900/50 rounded-full flex items-center justify-center animate-in zoom-in-50 duration-500 delay-100",children:s.jsx("svg",{className:"w-6 h-6 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),s.jsx(Fe,{className:"text-center bg-gradient-to-r from-purple-600 to-pink-600 dark:from-purple-400 dark:to-pink-400 bg-clip-text text-transparent",style:{fontSize:"14px"},children:" Bulk Edit Marker Color"}),s.jsx(He,{className:"text-center text-gray-600 dark:text-gray-400",style:{fontSize:"11px"},children:"Update marker colors for all locations in a selected route"})]}),s.jsxs("div",{className:"space-y-4 py-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold mb-2 block text-gray-800 dark:text-gray-200",children:"Select Route"}),s.jsxs("select",{value:At,onChange:D=>Mr(D.target.value),className:"w-full px-3 py-2 text-sm bg-white dark:bg-black/40 border border-purple-300 dark:border-purple-700 rounded-xl font-medium shadow-sm transition-colors",children:[s.jsx("option",{value:"",children:"-- Select Route --"}),Dl.map(D=>s.jsx("option",{value:D,children:D},D))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold mb-2 block text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[s.jsx("span",{children:"New Color"}),At&&(()=>{const D=gt.find(ke=>ke.route===At),$=(D==null?void 0:D.markerColor)||"#3b82f6";return s.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-normal text-gray-600 dark:text-gray-400",children:["(Current:",s.jsx("span",{className:"inline-block w-3 h-3 rounded-sm border border-gray-400 dark:border-gray-500",style:{backgroundColor:$},title:$}),")"]})})()]}),s.jsx("input",{type:"color",value:mr,onChange:D=>pr(D.target.value),className:"h-12 w-full rounded-xl border-2 border-purple-300 dark:border-purple-700 cursor-pointer shadow-sm hover:scale-105 transition-transform"})]}),s.jsx("div",{className:"px-3 py-2 bg-purple-100/50 dark:bg-purple-900/20 rounded-lg",children:s.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 font-medium",children:At?` Will update marker colors for ALL locations in route "${At}"`:" Select a route above to bulk update marker colors for all locations in that route"})})]}),s.jsxs(Ye,{className:"flex-row justify-center gap-3 sm:justify-center mt-2",children:[s.jsx(O,{variant:"outline",onClick:()=>rr(!1),className:"min-w-[100px] border-purple-300 dark:border-purple-700 hover:bg-purple-100 dark:hover:bg-purple-900/30",style:{fontSize:"11px"},children:"Cancel"}),s.jsx(O,{onClick:()=>{$f(),rr(!1)},disabled:!At||$a.isPending,className:"min-w-[100px] bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg",style:{fontSize:"11px"},children:$a.isPending?"Updating...":" Update Color"})]})]})}),s.jsx("div",{ref:ss,className:"animate-in fade-in slide-in-from-bottom-3 duration-700 delay-500",children:s.jsx(sl,{rows:Xf,columns:Qf,editMode:e,onUpdateRow:za,onDeleteRow:Tf,onReorderRows:Of,onReorderColumns:Lf,onDeleteColumn:zf,onSelectRowForImage:D=>{D==="access-denied"?$e({title:"Access Denied",description:"Please enable Edit mode to add images.",variant:"destructive"}):n(D)},onShowCustomization:()=>u(!0),onOptimizeRoute:()=>ee(!0),onShareTable:()=>Se(!0),onSavedLinks:()=>R(!0),isAuthenticated:g,isLoading:U,isFiltered:a!==""||i.length>0||c.length>0,searchTerm:a,onSearchTermChange:o,filterValue:i,onFilterValueChange:l,deliveryFilterValue:c,onDeliveryFilterValueChange:d,routeOptions:Dl,deliveryOptions:Yf,onClearAllFilters:Jf,filteredRowsCount:hr.length,totalRowsCount:gt.length})}),s.jsx(Mh,{open:p&&!U,onOpenChange:u,columns:ht,visibleColumns:m,onApplyChanges:s0,editMode:e}),U&&s.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-500/20 via-blue-600/30 to-blue-700/20 dark:from-blue-600/30 dark:via-blue-700/40 dark:to-blue-800/30 backdrop-blur-lg z-50 flex items-center justify-center animate-in fade-in duration-300",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 -m-8",children:s.jsxs("div",{className:"w-32 h-32 mx-auto",children:[s.jsx("div",{className:"absolute inset-0 bg-blue-500/20 dark:bg-blue-400/20 rounded-full animate-ping",style:{animationDuration:"1.5s"}}),s.jsx("div",{className:"absolute inset-0 bg-blue-500/10 dark:bg-blue-400/10 rounded-full animate-pulse"})]})}),s.jsx("div",{className:"relative bg-white/95 dark:bg-slate-900/95 rounded-2xl p-8 shadow-2xl border-2 border-blue-500/30 dark:border-blue-400/30 backdrop-blur-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsxs("div",{className:"relative w-16 h-16",children:[s.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-200 dark:border-blue-800"}),s.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-blue-500 dark:border-t-blue-400 animate-spin"}),s.jsx("div",{className:"absolute inset-2 rounded-full bg-gradient-to-br from-blue-500/20 to-blue-600/20 dark:from-blue-400/20 dark:to-blue-500/20 animate-pulse"})]}),s.jsxs("div",{className:"text-center space-y-1",children:[s.jsx("div",{className:"text-lg font-semibold bg-gradient-to-r from-blue-600 to-blue-700 dark:from-blue-400 dark:to-blue-500 bg-clip-text text-transparent",children:"Exiting Edit Mode"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Saving changes and clearing authentication..."})]}),s.jsx("div",{className:"w-48 h-1.5 bg-blue-100 dark:bg-blue-900 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 dark:from-blue-400 dark:to-blue-500 rounded-full animate-pulse",style:{width:"100%"}})})]})})]})}),s.jsx(_h,{open:y&&!U,onOpenChange:D=>{w(D),D||C(null)},onSuccess:c0,title:"Authentication Required",description:"Please enter the password to access edit mode."}),s.jsx(ze,{open:z&&!U,onOpenChange:le,children:s.jsxs(Me,{className:"sm:max-w-md animate-in zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 duration-300 bg-gradient-to-br from-red-50 to-white dark:from-red-950/40 dark:to-gray-900 border-red-200 dark:border-red-500/30 shadow-2xl",children:[s.jsxs(_e,{className:"space-y-3",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-red-100 dark:bg-red-900/50 rounded-full flex items-center justify-center animate-in zoom-in-50 duration-500 delay-100",children:s.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),s.jsx(Fe,{className:"text-center text-red-900 dark:text-red-100",style:{fontSize:"14px"},children:"Exit Edit Mode"}),s.jsx(He,{className:"text-center text-gray-600 dark:text-gray-400",style:{fontSize:"11px"},children:"Are you sure you want to exit edit mode? Your authentication will be cleared and you'll need to enter the password again to re-enable edit mode."})]}),s.jsxs(Ye,{className:"flex-row justify-center gap-3 sm:justify-center mt-4",children:[s.jsx(O,{variant:"outline",onClick:o0,className:"min-w-[100px] border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800",style:{fontSize:"11px"},"data-testid":"button-cancel-exit",children:"Cancel"}),s.jsx(O,{onClick:a0,className:"min-w-[100px] bg-red-600 hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600 text-white shadow-lg",style:{fontSize:"11px"},"data-testid":"button-confirm-exit",children:"Exit Edit Mode"})]})]})}),s.jsx(ze,{open:xe,onOpenChange:je,children:s.jsxs(Me,{className:"sm:max-w-md animate-in zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 duration-300 bg-gradient-to-br from-blue-50 to-white dark:from-blue-950/40 dark:to-gray-900 border-blue-200 dark:border-blue-500/30 shadow-2xl",children:[s.jsxs(_e,{className:"space-y-3",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 dark:bg-blue-900/50 rounded-full flex items-center justify-center animate-in zoom-in-50 duration-500 delay-100",children:s.jsx("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx(Fe,{className:"text-center text-blue-900 dark:text-blue-100",style:{fontSize:"14px"},children:"Confirm Save Changes"}),s.jsx(He,{className:"text-center text-gray-600 dark:text-gray-400",style:{fontSize:"11px"},children:"Are you sure you want to save all changes made to the table data?"})]}),s.jsxs(Ye,{className:"flex-row justify-center gap-3 sm:justify-center mt-4",children:[s.jsx(O,{variant:"outline",onClick:()=>je(!1),className:"min-w-[100px] border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800",style:{fontSize:"11px"},"data-testid":"button-cancel-save",children:"Cancel"}),s.jsx(O,{onClick:e0,className:"min-w-[100px] bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white shadow-lg",style:{fontSize:"11px"},"data-testid":"button-confirm-save",children:"Save Changes"})]})]})}),s.jsx(ze,{open:N&&!U,onOpenChange:S,children:s.jsxs(Me,{className:"sm:max-w-md",children:[s.jsxs(_e,{children:[s.jsx(Fe,{style:{fontSize:"12px"},children:"Select Row Position"}),s.jsx(He,{style:{fontSize:"10px"},children:"Choose where to insert the new row in the table."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(us,{value:I,onValueChange:D=>T(D),className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Lt,{value:"end",id:"end"}),s.jsxs(ye,{htmlFor:"end",style:{fontSize:"10px"},children:["Add to end of list (Position ",gt.length+1,")"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Lt,{value:"specific",id:"specific"}),s.jsx(ye,{htmlFor:"specific",style:{fontSize:"10px"},children:"Insert at specific position"})]})]}),I==="specific"&&s.jsxs("div",{className:"ml-6 space-y-2",children:[s.jsxs(ye,{htmlFor:"position",style:{fontSize:"10px"},children:["Position (1 to ",gt.length+1,"):"]}),s.jsx(Ae,{id:"position",type:"number",value:_,onChange:D=>V(Math.max(1,Math.min(gt.length+1,parseInt(D.target.value)||1))),min:1,max:gt.length+1,className:"w-20",style:{fontSize:"10px"}})]})]}),s.jsxs(Ye,{className:"space-x-2",children:[s.jsx(O,{variant:"outline",onClick:()=>S(!1),style:{fontSize:"10px"},children:"Cancel"}),s.jsx(O,{onClick:r0,style:{fontSize:"10px"},children:"Add Row"})]})]})}),s.jsx($h,{open:G,onOpenChange:ee,rows:gt}),s.jsx(QN,{open:ue,onOpenChange:Se,tableState:{filters:{searchTerm:a,routeFilters:i,deliveryFilters:c},sorting:null,columnVisibility:ht.reduce((D,$)=>(D[$.id]=m.includes($.id),D),{}),columnOrder:b}}),s.jsx(c2,{open:he,onOpenChange:R,editMode:e}),oe&&s.jsx(u2,{editMode:e,onClose:()=>Qe(!1)})]})}),s.jsx(Pn,{editMode:e})]})}function X2(){const[,e]=eu("/share/:shareId"),t=e==null?void 0:e.shareId;Ei();const{rows:r,columns:n,isLoading:a}=Ri(),{data:o,isLoading:i,error:l}=qt({queryKey:["/api/share-table",t],enabled:!!t}),c=(o==null?void 0:o.remark)||"",[d,p]=h.useState(""),[u,m]=h.useState([]),[f,b]=h.useState([]),[x,g]=h.useState(null),[v,y]=h.useState(!1),[w,k]=h.useState(!1),[C,N]=h.useState(!1),[S,I]=h.useState(!1);h.useEffect(()=>{o!=null&&o.tableState&&(p(o.tableState.filters.searchTerm||""),m(o.tableState.filters.deliveryFilters||[]),b(o.tableState.filters.routeFilters||[]))},[o]);const{filteredRows:T,displayColumns:_,deliveryOptions:V}=h.useMemo(()=>{if(r.length===0||n.length===0)return{filteredRows:r,displayColumns:n,deliveryOptions:[]};const G=Array.from(new Set(r.map(he=>he.delivery).filter(Boolean)));let ee=[...r];ee=ee.filter(he=>he.active!==!1);const xe=new Date().getDay(),je=[1,3,5,0].includes(xe),ue=[2,4,6].includes(xe);ee=ee.sort((he,R)=>{const L=he.deliveryAlt||"normal",q=R.deliveryAlt||"normal";if(L==="inactive"&&q!=="inactive")return 1;if(L!=="inactive"&&q==="inactive")return-1;if(je){if((L==="alt1"||L==="normal")&&q==="alt2")return-1;if(L==="alt2"&&(q==="alt1"||q==="normal"))return 1}else if(ue){if((L==="alt2"||L==="normal")&&q==="alt1")return-1;if(L==="alt1"&&(q==="alt2"||q==="normal"))return 1}return 0}),f.length>0&&(ee=ee.filter(he=>f.includes(he.route))),d&&(ee=ee.filter(he=>Object.values(he).some(R=>String(R).toLowerCase().includes(d.toLowerCase())))),u.length>0&&(ee=ee.filter(he=>!u.includes(he.delivery)));let Se=n;if(o!=null&&o.tableState){const{columnVisibility:he,columnOrder:R}=o.tableState;Se=n.filter(q=>he[q.id]!==!1),Se=R.map(q=>Se.find(B=>B.id===q)).filter(q=>q!==void 0)}return Se=Se.filter(he=>he.dataKey!=="latitude"&&he.dataKey!=="longitude"&&he.dataKey!=="tollPrice"),{filteredRows:ee,displayColumns:Se,deliveryOptions:G}},[r,n,o,d,u,f]),z=h.useMemo(()=>{const G=r.find(ue=>ue.location==="QL Kitchen");if(!G||!G.latitude||!G.longitude)return T.map(ue=>({...ue,kilometer:"",segmentDistance:0}));const ee=parseFloat(G.latitude),xe=parseFloat(G.longitude);if(!Number.isFinite(ee)||!Number.isFinite(xe))return T.map(ue=>({...ue,kilometer:"",segmentDistance:0}));if(d!==""||f.length>0||u.length>0){let ue=0,Se=ee,he=xe;return T.map(R=>{if(R.location==="QL Kitchen")return ue=0,Se=ee,he=xe,{...R,kilometer:0,segmentDistance:0};if(!R.latitude||!R.longitude)return{...R,kilometer:"",segmentDistance:0};const L=parseFloat(R.latitude),q=parseFloat(R.longitude);if(!Number.isFinite(L)||!Number.isFinite(q))return{...R,kilometer:"",segmentDistance:0};const B=Os(Se,he,L,q);return ue+=B,Se=L,he=q,{...R,kilometer:ue,segmentDistance:B}})}else return T.map(ue=>{if(ue.location==="QL Kitchen")return{...ue,kilometer:0,segmentDistance:0};if(!ue.latitude||!ue.longitude)return{...ue,kilometer:"",segmentDistance:0};const Se=parseFloat(ue.latitude),he=parseFloat(ue.longitude);if(!Number.isFinite(Se)||!Number.isFinite(he))return{...ue,kilometer:"",segmentDistance:0};const R=Os(ee,xe,Se,he);return{...ue,kilometer:R,segmentDistance:R}})},[r,T,d,f,u]),le=Le({mutationFn:async G=>(console.log("Read-only mode: Changes not saved",G),G)}),U=Le({mutationFn:async G=>{console.log("Read-only mode: Delete not allowed",G)}}),ce=Le({mutationFn:async G=>G.map(xe=>r.find(je=>je.id===xe)).filter(xe=>xe!==void 0)}),K=Le({mutationFn:async G=>G.map(xe=>n.find(je=>je.id===xe)).filter(xe=>xe!==void 0)}),F=Le({mutationFn:async G=>{console.log("Read-only mode: Column delete not allowed",G)}}),ae=()=>{p(""),m([])},J=async()=>{k(!0),N(!1),I(!0),await new Promise(G=>setTimeout(G,1e3)),I(!1),y(!0)},[ve,be]=Ce.useState(!1),[A,Ie]=Ce.useState(!1);return Ce.useEffect(()=>{if(sessionStorage.getItem("routevm_loaded")){Ie(!1);const ee=setTimeout(()=>{be(!0)},1e3);return()=>clearTimeout(ee)}else{Ie(!0);const ee=setTimeout(()=>{be(!0),sessionStorage.setItem("routevm_loaded","true")},5e3);return()=>clearTimeout(ee)}},[]),Ce.useEffect(()=>{const G=()=>{sessionStorage.removeItem("routevm_loaded")},ee=()=>{document.hidden&&sessionStorage.removeItem("routevm_loaded")};return window.addEventListener("beforeunload",G),document.addEventListener("visibilitychange",ee),()=>{window.removeEventListener("beforeunload",G),document.removeEventListener("visibilitychange",ee)}},[]),a||i||!ve?s.jsx("div",{className:"min-h-screen relative",children:A?s.jsx(rl,{message:"Loading shared table...",type:"wave"}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Loading..."})]})})}):l||!o?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex h-16 w-16 mx-auto items-center justify-center rounded-lg bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400",children:s.jsx(Gu,{className:"h-8 w-8"})}),s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Shared Table Not Found"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"The shared table you're looking for doesn't exist or has been removed."})]})}):s.jsxs(s.Fragment,{children:[S&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-slate-50/95 to-slate-100/95 dark:from-slate-900/95 dark:to-slate-800/95 backdrop-blur-sm",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Loading..."})]})}),s.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 w-full border-b-2 border-blue-500/50 dark:border-blue-400/50 bg-gradient-to-r from-blue-500/10 via-blue-600/10 to-blue-700/10 dark:from-blue-500/20 dark:via-blue-600/20 dark:to-blue-700/20 backdrop-blur supports-[backdrop-filter]:bg-background/60 shadow-lg shadow-blue-500/20",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex h-14 items-center justify-between text-[12px]",children:[s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("div",{className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[s.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-none overflow-hidden",children:s.jsx("img",{src:"/assets/Logofm.png",alt:"Logo",className:"h-full w-full object-cover"})}),s.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 text-[12px]",children:c||"Shared Table"})]})}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Shared View"})]})})}),!v&&s.jsx("div",{className:"fixed top-[56px] left-0 right-0 z-40 bg-gradient-to-r from-blue-500/90 via-blue-600/90 to-blue-700/90 dark:from-blue-600/90 dark:via-blue-700/90 dark:to-blue-800/90 backdrop-blur-sm border-b-2 border-blue-400/50 dark:border-blue-500/50 shadow-lg",children:s.jsx("div",{className:"container mx-auto px-4 py-2.5",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 text-white",children:[s.jsx(Wu,{className:"h-4 w-4 flex-shrink-0 blink-slow"}),s.jsx("span",{className:"text-xs font-medium blink-slow",children:" This is a read-only view. Enable Edit Mode to make changes."})]})})}),s.jsx("main",{className:v?"pt-[56px]":"pt-[96px]",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50/80 to-cyan-50/80 dark:from-blue-900/30 dark:to-cyan-900/30 rounded-lg border-2 border-blue-200/50 dark:border-blue-700/50 backdrop-blur-sm shadow-md",children:s.jsxs("div",{className:"flex flex-col gap-3 text-xs",children:[f.length>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold text-blue-900 dark:text-blue-100",children:" Showing Routes:"}),s.jsx("span",{className:"text-blue-800 dark:text-blue-200 font-medium",children:(()=>{const G={"SL 1":"SL 1 - AM - 3AVS01","SL 2":"SL 2 - AM - 3AVS02","KL 3":"KL 3 - AM - 3AVK03","KL 4":"KL 4 - AM - 3AVK04","SL 3":"SL 3 - PM - 3PVS01","KL 6":"KL 6 - PM - 3PVK03","KL 7":"KL 7 - PM - 3PVK04"};return f.map(ee=>G[ee]||ee).join(", ")})()})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-semibold text-blue-900 dark:text-blue-100",children:" Delivery OFF:"}),s.jsx("span",{className:"text-blue-800 dark:text-blue-200 font-medium",children:(()=>{const G=new Date().getDay(),ee=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],xe=[1,3,5,0].includes(G),je=[2,4,6].includes(G);return xe?`Alt 2 (${ee[G]})`:je?`Alt 1 (${ee[G]})`:ee[G]})()})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-semibold text-blue-900 dark:text-blue-100 flex-shrink-0",children:" Expired Color:"}),s.jsx("div",{className:"flex items-center gap-1.5",children:(()=>{const G=new Date().getDay(),xe=[{name:"Purple",bg:"bg-purple-400",border:"border-purple-600"},{name:"Pink",bg:"bg-pink-400",border:"border-pink-600"},{name:"Yellow",bg:"bg-yellow-400",border:"border-yellow-600"},{name:"Blue",bg:"bg-blue-400",border:"border-blue-600"},{name:"Orange",bg:"bg-orange-400",border:"border-orange-600"},{name:"Brown",bg:"bg-amber-700",border:"border-amber-900"},{name:"Green",bg:"bg-green-400",border:"border-green-600"}][G];return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${xe.bg} border ${xe.border} shadow-sm`}),s.jsx("span",{className:"text-blue-800 dark:text-blue-200 font-medium",children:xe.name})]})})()})]})]})}),s.jsx(sl,{rows:z,columns:_,editMode:v,isSharedView:!0,hideShareButton:!0,disablePagination:!0,onUpdateRow:le,onDeleteRow:U,onReorderRows:ce,onReorderColumns:K,onDeleteColumn:F,onSelectRowForImage:g,onShowCustomization:()=>{},onOptimizeRoute:()=>{},isAuthenticated:w,searchTerm:d,onSearchTermChange:p,filterValue:[],onFilterValueChange:()=>{},deliveryFilterValue:u,onDeliveryFilterValueChange:m,routeOptions:[],deliveryOptions:V,onClearAllFilters:ae,filteredRowsCount:z.length,totalRowsCount:r.length})]})}),s.jsx(Pn,{editMode:v}),s.jsx(_h,{open:C,onOpenChange:N,onSuccess:J,title:"Enter Password to Edit",description:"Please enter your password to enable edit mode on this shared table."})]})}function J2(){const[e,t]=h.useState(new Set),[r,n]=h.useState(!1),[a,o]=h.useState(!1),[i,l]=h.useState(!1),[c,d]=h.useState(null),[p,u]=h.useState(null),[m,f]=h.useState(""),[b,x]=h.useState(""),[g,v]=h.useState(""),[y,w]=h.useState(""),[k,C]=h.useState(""),[N,S]=h.useState([]),[I,T]=h.useState(new Map),[_,V]=h.useState(new Set),{toast:z}=jt(),le=zs();Ei();const[,U]=mi(),{data:ce=[],isLoading:K}=qt({queryKey:["/api/table-rows"]}),{data:F=[],isLoading:ae}=qt({queryKey:["/api/custom-tables"]}),J=ce.filter(R=>{const L=k===""||Object.values(R).some(B=>String(B).toLowerCase().includes(k.toLowerCase())),q=N.length===0||!N.includes(R.delivery);return L&&q}).sort((R,L)=>{const q=R.code||"",B=L.code||"";return q.localeCompare(B,void 0,{numeric:!0,sensitivity:"base"})}),ve=Array.from(new Set(ce.map(R=>R.delivery).filter(Boolean))),be=Le({mutationFn:async R=>{const L=await We("POST","/api/custom-tables",R);if(!L.ok)throw new Error("Failed to create custom table");return L.json()},onSuccess:()=>{le.invalidateQueries({queryKey:["/api/custom-tables"]}),n(!1),f(""),x(""),t(new Set),z({title:"Custom table created!",description:"Your custom table has been created successfully."})},onError:()=>{z({title:"Error",description:"Failed to create custom table. Please try again.",variant:"destructive"})}}),A=Le({mutationFn:async R=>{const L=await We("PUT",`/api/custom-tables/${R.id}/rows`,{name:R.name,description:R.description,rowIds:R.rowIds});if(!L.ok)throw new Error("Failed to update custom table");return L.json()},onSuccess:()=>{le.invalidateQueries({queryKey:["/api/custom-tables"]}),o(!1),d(null),f(""),x(""),t(new Set),z({title:"Custom table updated!",description:"Your custom table has been updated successfully."})},onError:()=>{z({title:"Error",description:"Failed to update custom table. Please try again.",variant:"destructive"})}}),Ie=Le({mutationFn:async R=>{if(!(await We("DELETE",`/api/custom-tables/${R}`)).ok)throw new Error("Failed to delete custom table")},onSuccess:()=>{le.invalidateQueries({queryKey:["/api/custom-tables"]}),l(!1),u(null),z({title:"Table deleted",description:"Custom table has been deleted."})},onError:()=>{z({title:"Error",description:"Failed to delete custom table.",variant:"destructive"})}}),G=R=>{u(R),l(!0)},ee=R=>{R.preventDefault(),p&&Ie.mutate(p.id)},xe=R=>{const L=new Set(e);L.has(R)?L.delete(R):L.add(R),t(L)},je=()=>{if(!m.trim()){z({title:"Name required",description:"Please enter a table name.",variant:"destructive"});return}if(e.size===0){z({title:"No locations selected",description:"Please select at least one location.",variant:"destructive"});return}be.mutate({name:m,description:b,rowIds:Array.from(e)})},ue=async R=>{d(R),f(R.name),x(R.description||"");try{const q=await(await We("GET",`/api/custom-tables/${R.id}/rows`)).json();t(new Set(q.map(B=>B.id))),o(!0)}catch{z({title:"Error",description:"Failed to load table data.",variant:"destructive"})}},Se=()=>{if(c){if(!m.trim()){z({title:"Name required",description:"Please enter a table name.",variant:"destructive"});return}if(e.size===0){z({title:"No locations selected",description:"Please select at least one location.",variant:"destructive"});return}A.mutate({id:c.id,name:m,description:b,rowIds:Array.from(e)})}},he=async R=>{const L=`${window.location.origin}/custom/${R.shareId}`;try{await navigator.clipboard.writeText(L),w(R.id),v(L),z({title:"Link copied!",description:"Share link copied to clipboard."}),setTimeout(()=>w(""),2e3)}catch{z({title:"Error",description:"Failed to copy link.",variant:"destructive"})}};return s.jsxs("div",{className:"animate-in fade-in duration-300",children:[s.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 w-full border-b-2 border-blue-500/50 dark:border-blue-400/50 bg-gradient-to-r from-blue-500/10 via-blue-600/10 to-blue-700/10 dark:from-blue-500/20 dark:via-blue-600/20 dark:to-blue-700/20 backdrop-blur supports-[backdrop-filter]:bg-background/60 shadow-lg shadow-blue-500/20",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex h-14 items-center justify-between text-[12px]",children:[s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("div",{className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[s.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-none overflow-hidden",children:s.jsx("img",{src:"/assets/Logofm.png",alt:"Logo",className:"h-full w-full object-cover"})}),s.jsxs("div",{className:"flex flex-col gap-0 leading-tight",children:[s.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 leading-none",style:{fontSize:"12px"},children:"Custom Tables"}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400 font-medium leading-none my-0.5",style:{fontSize:"9px"},children:"Select & share tables"})]})]})}),s.jsxs(O,{onClick:()=>U("/"),variant:"outline",size:"sm",className:"bg-transparent border-transparent w-8 h-8 md:w-auto md:h-9 p-0 md:px-3 pagination-button group transition-all duration-300 ease-out hover:scale-110 hover:shadow-lg hover:shadow-blue-500/20 active:scale-95 active:shadow-none",title:"Back",children:[s.jsx(wi,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 transition-all duration-300"}),s.jsx("span",{className:"hidden md:inline ml-2 text-xs transition-all duration-300",children:"Back"})]})]})})}),s.jsx("main",{className:"min-h-screen bg-gray-50 dark:bg-black pt-[72px] pb-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:`text-sm ${a?"text-green-600 dark:text-green-400 font-semibold":"text-gray-600 dark:text-gray-400"}`,children:[e.size," location(s) selected"]}),s.jsxs(O,{onClick:()=>n(!0),disabled:e.size===0,className:`bg-transparent border border-gray-300 dark:border-gray-700 ${e.size>0?"text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/10":"text-gray-400 dark:text-gray-600"} disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent transition-colors`,children:[s.jsx(Tr,{className:"h-4 w-4 mr-2"}),"Create Custom Table"]})]}),s.jsxs("div",{className:"bg-white/90 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-300 dark:border-white/10 shadow-xl rounded-3xl overflow-hidden mb-8",children:[s.jsxs("div",{className:"p-6 pb-4 border-b border-gray-300 dark:border-white/10",children:[s.jsx("h2",{className:"text-sm font-semibold mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 bg-clip-text text-transparent",children:"Select Locations"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Ae,{placeholder:"Search locations...",value:k,onChange:R=>C(R.target.value),className:"max-w-sm bg-white dark:bg-black/20 border-gray-300 dark:border-white/20 text-sm h-8 shadow-sm"}),s.jsxs(ca,{children:[s.jsx(da,{asChild:!0,children:s.jsxs(O,{variant:"outline",size:"sm",className:"h-8 bg-white dark:bg-black/20 border-gray-300 dark:border-white/20",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"}),s.jsx("span",{className:"text-xs",children:"Filter"}),N.length>0&&s.jsx("span",{className:"ml-2 rounded-full bg-blue-500 text-white text-[10px] px-1.5 py-0.5",children:N.length})]})}),s.jsxs(bn,{align:"end",className:"w-48",children:[s.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Hide Delivery Types"}),s.jsx(Ut,{}),ve.map(R=>s.jsxs(et,{onClick:L=>{L.preventDefault(),S(q=>q.includes(R)?q.filter(B=>B!==R):[...q,R])},className:"cursor-pointer",children:[s.jsx(Rr,{checked:N.includes(R),className:"mr-2"}),s.jsx("span",{children:R})]},R)),N.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(Ut,{}),s.jsx(et,{onClick:()=>S([]),className:"cursor-pointer text-red-600",children:"Clear Filters"})]})]})]})]})]}),s.jsx("div",{className:"overflow-x-auto overflow-y-auto max-h-[600px] scrollbar-thin scrollbar-thumb-gray-400 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"bg-gradient-to-r from-slate-200 to-slate-300 dark:from-slate-800/50 dark:to-slate-900/50 sticky top-0 z-10",children:s.jsxs("tr",{className:"border-b-2 border-gray-300 dark:border-white/10",children:[s.jsx("th",{className:"px-3 py-2 text-center text-xs font-semibold whitespace-nowrap",children:s.jsx(Rr,{checked:e.size===J.length&&J.length>0,onCheckedChange:R=>{t(R?new Set(J.map(L=>L.id)):new Set)}})}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-semibold whitespace-nowrap",children:"Route"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-semibold whitespace-nowrap",children:"Code"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-semibold whitespace-nowrap",children:"Location"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-semibold whitespace-nowrap",children:"Delivery"})]})}),s.jsx("tbody",{children:J.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-12 text-center text-gray-600 dark:text-gray-400",children:k?"No locations found matching your search":"No locations available"})}):J.map((R,L)=>{const q=e.has(R.id);return s.jsxs("tr",{className:`custom-table-row border-b border-gray-200 dark:border-gray-900 hover:bg-blue-50 dark:hover:bg-blue-900/10 cursor-pointer ${q?"text-green-600 dark:text-green-400 font-semibold":"text-gray-900 dark:text-gray-100"}`,onClick:()=>xe(R.id),children:[s.jsx("td",{className:"px-3 py-2 text-center",children:s.jsx(Rr,{checked:q,onCheckedChange:()=>xe(R.id),onClick:B=>B.stopPropagation()})}),s.jsx("td",{className:`px-2 py-2 text-xs text-center whitespace-nowrap ${q?"font-semibold":""}`,children:R.route}),s.jsx("td",{className:`px-2 py-2 text-xs text-center whitespace-nowrap ${q?"font-semibold":""}`,children:R.code}),s.jsx("td",{className:`px-4 py-2 text-xs text-center whitespace-nowrap ${q?"font-semibold":""}`,children:R.location}),s.jsx("td",{className:`px-4 py-2 text-xs text-center whitespace-nowrap ${q?"font-semibold":""}`,children:R.delivery})]},R.id)})})]})}),s.jsx("div",{className:"p-4 bg-gradient-to-r from-slate-200 to-slate-300 dark:from-slate-800/50 dark:to-slate-900/50 border-t border-gray-300 dark:border-white/10",children:s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:["Showing ",J.length," of ",ce.length," location(s)"]})})]}),s.jsxs("div",{className:"bg-white/90 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-300 dark:border-white/10 shadow-xl rounded-3xl p-6",children:[s.jsx("h6",{className:"font-semibold mb-4 text-gray-900 dark:text-white",style:{fontSize:"12px"},children:"My Custom Tables"}),F.length===0?s.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 py-8",children:"No custom tables yet. Create one to get started!"}):s.jsx("div",{className:"space-y-4",children:F.map(R=>{const L=I.get(R.id)||!1,q=_.has(R.id);return s.jsx("div",{className:"custom-table-card p-4 bg-transparent rounded-xl border border-transparent hover:bg-gray-50 dark:hover:bg-white/5",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-[12px]",children:R.name}),s.jsx("button",{onClick:()=>{const B=new Set(_);q?B.delete(R.id):B.add(R.id),V(B)},className:"p-1 hover:bg-gray-200 dark:hover:bg-white/10 rounded transition-colors","aria-label":q?"Collapse details":"Expand details",children:q?s.jsx(ki,{className:"h-3 w-3 text-gray-500 dark:text-gray-400"}):s.jsx(Cn,{className:"h-3 w-3 text-gray-500 dark:text-gray-400"})})]}),q&&s.jsxs("div",{className:"mt-2 space-y-1",children:[R.description&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:R.description}),s.jsxs("p",{className:"text-gray-500 dark:text-gray-500",style:{fontSize:"10px"},children:["Created ",new Date(R.createdAt).toLocaleDateString()]})]})]}),s.jsxs(ca,{children:[s.jsx(da,{asChild:!0,children:s.jsx(O,{size:"sm",variant:"outline",className:"bg-transparent border-transparent hover:bg-gray-100 dark:hover:bg-white/10",children:s.jsx(Vu,{className:"h-4 w-4"})})}),s.jsxs(bn,{align:"end",className:"w-56",children:[s.jsx("div",{className:"px-2 py-2",children:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[L?s.jsx(ji,{className:"h-4 w-4 text-green-600 dark:text-green-400"}):s.jsx(cn,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),s.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:L?"Preview Mode":"Read-Only"})]}),s.jsx(Oa,{checked:L,onCheckedChange:B=>{const Z=new Map(I);Z.set(R.id,B),T(Z)},className:"data-[state=checked]:bg-green-500"})]})}),s.jsx(Ut,{}),s.jsxs(et,{onClick:()=>{const B=L?`/custom/${R.shareId}?preview=true`:`/custom/${R.shareId}`;window.open(B,"_blank")},className:"cursor-pointer",children:[s.jsx(cn,{className:"h-4 w-4 mr-2 text-blue-500"}),s.jsx("span",{children:"View Table"})]}),s.jsx(et,{onClick:()=>he(R),className:"cursor-pointer",children:y===R.id?s.jsxs(s.Fragment,{children:[s.jsx(Ir,{className:"h-4 w-4 mr-2 text-green-500"}),s.jsx("span",{children:"Link Copied!"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ni,{className:"h-4 w-4 mr-2 text-blue-500"}),s.jsx("span",{children:"Copy Link"})]})}),s.jsx(Ut,{}),s.jsxs(et,{onClick:()=>ue(R),className:"cursor-pointer",children:[s.jsx(ka,{className:"h-4 w-4 mr-2 text-green-600"}),s.jsx("span",{children:"Edit Table"})]}),s.jsx(Ut,{}),s.jsxs(et,{onClick:()=>G(R),className:"cursor-pointer text-red-600 focus:text-red-600",children:[s.jsx(ls,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:"Delete Table"})]})]})]})]})},R.id)})})]}),s.jsx(ze,{open:r,onOpenChange:n,children:s.jsxs(Me,{className:"bg-white/90 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-300 dark:border-white/10 shadow-xl rounded-3xl",style:{maxHeight:"min(80vh, calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 40px))",touchAction:"pan-y"},children:[s.jsx("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/60 via-white/40 to-white/50 dark:from-black/40 dark:via-black/20 dark:to-black/30 border-0 shadow-inner",style:{backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)"}}),s.jsxs(_e,{className:"relative z-10",style:{paddingTop:"max(1.5rem, env(safe-area-inset-top))"},children:[s.jsx(Fe,{children:"Create Custom Table"}),s.jsx(He,{children:"Enter a name and optional description for your custom table."})]}),s.jsxs("div",{className:"space-y-4 py-4 relative z-10",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Table Name *"}),s.jsx(Ae,{value:m,onChange:R=>f(R.target.value),placeholder:"e.g., Weekend Deliveries",className:"bg-white/10 dark:bg-black/10 backdrop-blur-sm border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Description (optional)"}),s.jsx(Ae,{value:b,onChange:R=>x(R.target.value),placeholder:"Add a description...",className:"bg-white/10 dark:bg-black/10 backdrop-blur-sm border-transparent"})]}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.size," location(s) will be included in this table"]})]}),s.jsxs(Ye,{className:"relative z-10",style:{paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:[s.jsx(O,{variant:"outline",onClick:()=>n(!1),className:"bg-transparent border-transparent text-red-500 hover:bg-red-500/10",children:"Cancel"}),s.jsx(O,{onClick:je,disabled:be.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white",children:be.isPending?"Creating...":"Create Table"})]})]})}),s.jsx(ze,{open:a,onOpenChange:R=>{o(R),R||(d(null),f(""),x(""),t(new Set))},children:s.jsxs(Me,{className:"bg-white/90 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-300 dark:border-white/10 shadow-xl rounded-3xl max-h-[80vh] overflow-y-auto",style:{maxHeight:"min(80vh, calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 40px))",touchAction:"pan-y"},children:[s.jsx("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/60 via-white/40 to-white/50 dark:from-black/40 dark:via-black/20 dark:to-black/30 border-0 shadow-inner",style:{backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)"}}),s.jsxs(_e,{className:"relative z-10",style:{paddingTop:"max(1.5rem, env(safe-area-inset-top))"},children:[s.jsx(Fe,{children:"Edit Custom Table"}),s.jsx(He,{children:"Update name, description, or add/remove locations."})]}),s.jsxs("div",{className:"space-y-4 py-4 relative z-10",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Table Name *"}),s.jsx(Ae,{value:m,onChange:R=>f(R.target.value),placeholder:"e.g., Weekend Deliveries",className:"bg-white/10 dark:bg-black/10 backdrop-blur-sm border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Description (optional)"}),s.jsx(Ae,{value:b,onChange:R=>x(R.target.value),placeholder:"Add a description...",className:"bg-white/10 dark:bg-black/10 backdrop-blur-sm border-transparent"})]}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.size," location(s) selected"]}),s.jsxs("div",{className:"border-t pt-4 space-y-2 max-h-[300px] overflow-y-auto",children:[s.jsx("h4",{className:"font-medium text-sm mb-2",children:"Select Locations:"}),J.map(R=>s.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded cursor-pointer",children:[s.jsx(Rr,{checked:e.has(R.id),onCheckedChange:()=>xe(R.id)}),s.jsxs("span",{className:"text-sm",children:[R.location," (",R.route,")"]})]},R.id))]})]}),s.jsxs(Ye,{className:"relative z-10",style:{paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:[s.jsx(O,{variant:"outline",onClick:()=>o(!1),className:"bg-transparent border-transparent text-red-500 hover:bg-red-500/10",children:"Cancel"}),s.jsx(O,{onClick:Se,disabled:A.isPending,className:"bg-green-600 hover:bg-green-700 text-white",children:A.isPending?"Updating...":"Update Table"})]})]})}),s.jsx(af,{open:i,onOpenChange:R=>{l(R),R||u(null)},children:s.jsxs(cl,{className:"bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-[2rem]",children:[s.jsxs("div",{className:"absolute inset-0 -z-10 rounded-[2rem] bg-gradient-to-br from-white/70 via-white/50 to-white/60 dark:from-black/50 dark:via-black/30 dark:to-black/40 border-0 shadow-[inset_0_1px_1px_rgba(255,255,255,0.3),inset_0_-1px_1px_rgba(0,0,0,0.1)]",style:{backdropFilter:"blur(40px) saturate(180%)",WebkitBackdropFilter:"blur(40px) saturate(180%)"},children:[s.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/40 dark:via-white/20 to-transparent"}),s.jsx("div",{className:"absolute inset-0 rounded-[2rem] bg-gradient-to-tr from-red-500/5 via-transparent to-orange-500/5 dark:from-red-400/10 dark:via-transparent dark:to-orange-400/10"})]}),s.jsxs(dl,{children:[s.jsx(ml,{children:"Delete Custom Table"}),s.jsxs(pl,{children:['Are you sure you want to delete "',p==null?void 0:p.name,'"? This action cannot be undone.']})]}),s.jsxs(ul,{children:[s.jsx(fl,{children:"Cancel"}),s.jsx(hl,{onClick:ee,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:Ie.isPending,children:Ie.isPending?"Deleting...":"Delete"})]})]})})]})}),s.jsx(Pn,{})]})}function Z2(){const[,e]=eu("/custom/:shareId"),t=e==null?void 0:e.shareId,n=new URLSearchParams(window.location.search).get("preview")==="true",{columns:a,rows:o=[],isLoading:i}=Ri(),{data:l,isLoading:c,error:d}=qt({queryKey:[`/api/custom-tables/share/${t}`],enabled:!!t}),{data:p=[],isLoading:u}=qt({queryKey:[`/api/custom-tables/${l==null?void 0:l.id}/rows`],enabled:!!(l!=null&&l.id)}),m=h.useMemo(()=>{const B=o.find(me=>me.location==="QL Kitchen"),Z=p.some(me=>me.location==="QL Kitchen");return B&&!Z&&p.length>0?[B,...p]:p},[o,p]),[f,b]=h.useState(""),[x,g]=h.useState([]),[v,y]=h.useState([]),[w,k]=h.useState(null),[C,N]=h.useState([]),[S,I]=h.useState([]),[T,_]=h.useState(!1),[V,z]=h.useState(!1),[le,U]=h.useState([]),{toast:ce}=jt(),{filteredRows:K,displayColumns:F,deliveryOptions:ae}=h.useMemo(()=>{if(m.length===0||a.length===0)return{filteredRows:m,displayColumns:a,deliveryOptions:[]};const B=Array.from(new Set(m.map(M=>M.delivery).filter(Boolean)));let Z=[...m];Z=Z.filter(M=>M.active!==!1);const me=new Date().getDay(),qe=[1,3,5,0].includes(me),Re=[2,4,6].includes(me);Z=Z.sort((M,se)=>{const pe=M.deliveryAlt||"normal",we=se.deliveryAlt||"normal";if(pe==="inactive"&&we!=="inactive")return 1;if(pe!=="inactive"&&we==="inactive")return-1;if(qe){if((pe==="alt1"||pe==="normal")&&we==="alt2")return-1;if(pe==="alt2"&&(we==="alt1"||we==="normal"))return 1}else if(Re){if((pe==="alt2"||pe==="normal")&&we==="alt1")return-1;if(pe==="alt1"&&(we==="alt2"||we==="normal"))return 1}const lt=M.code||"",Ke=se.code||"";return lt.localeCompare(Ke,void 0,{numeric:!0,sensitivity:"base"})}),v.length>0&&(Z=Z.filter(M=>v.includes(M.route))),f&&(Z=Z.filter(M=>Object.values(M).some(se=>String(se).toLowerCase().includes(f.toLowerCase())))),x.length>0&&(Z=Z.filter(M=>!x.includes(M.delivery)));let Ge=a.filter(M=>M.dataKey!=="latitude"&&M.dataKey!=="longitude"&&M.dataKey!=="tollPrice");if(!Ge.some(M=>M.dataKey==="kilometer")){const M=a.find(se=>se.dataKey==="kilometer");M&&(Ge=[...Ge,M])}return{filteredRows:Z,displayColumns:Ge,deliveryOptions:B}},[m,a,f,x,v]),J=h.useMemo(()=>{const B=m.find(Re=>Re.location==="QL Kitchen");if(!B||!B.latitude||!B.longitude)return K.map(Re=>({...Re,kilometer:"",segmentDistance:0}));const Z=parseFloat(B.latitude),me=parseFloat(B.longitude);if(!Number.isFinite(Z)||!Number.isFinite(me))return K.map(Re=>({...Re,kilometer:"",segmentDistance:0}));if(f!==""||v.length>0||x.length>0){let Re=0,Ge=Z,ot=me;return K.map(M=>{if(M.location==="QL Kitchen")return Re=0,Ge=Z,ot=me,{...M,kilometer:0,segmentDistance:0};if(!M.latitude||!M.longitude)return{...M,kilometer:"",segmentDistance:0};const se=parseFloat(M.latitude),pe=parseFloat(M.longitude);if(!Number.isFinite(se)||!Number.isFinite(pe))return{...M,kilometer:"",segmentDistance:0};const we=Os(Ge,ot,se,pe);return Re+=we,Ge=se,ot=pe,{...M,kilometer:Re,segmentDistance:we}})}else return K.map(Re=>{if(Re.location==="QL Kitchen")return{...Re,kilometer:0,segmentDistance:0};if(!Re.latitude||!Re.longitude)return{...Re,kilometer:"",segmentDistance:0};const Ge=parseFloat(Re.latitude),ot=parseFloat(Re.longitude);if(!Number.isFinite(Ge)||!Number.isFinite(ot))return{...Re,kilometer:"",segmentDistance:0};const M=Os(Z,me,Ge,ot);return{...Re,kilometer:M,segmentDistance:M}})},[m,K,f,v,x]),ve=Le({mutationFn:async B=>(console.log("Read-only mode: Changes not saved",B),B)}),be=Le({mutationFn:async B=>{console.log("Read-only mode: Delete not allowed",B)}}),A=Le({mutationFn:async B=>(n&&N(B),B.map(me=>m.find(qe=>qe.id===me)).filter(me=>me!==void 0))}),Ie=Le({mutationFn:async B=>(n&&I(B),B.map(me=>a.find(qe=>qe.id===me)).filter(me=>me!==void 0))}),G=Le({mutationFn:async B=>{console.log("Read-only mode: Column delete not allowed",B)}}),ee=()=>{b(""),g([])},xe=B=>{n&&(U(B),ce({title:"Preview Mode",description:"Column visibility changed temporarily. Changes won't be saved.",duration:3e3}))},je=B=>{n&&N(B)},ue=h.useMemo(()=>n&&C.length>0?C.map(B=>J.find(Z=>Z.id===B)).filter(B=>B!==void 0):J,[n,C,J]);Ce.useEffect(()=>{a.length>0&&le.length===0&&U(a.map(B=>B.id))},[a]);const Se=h.useMemo(()=>{let B=F;return n&&S.length>0&&(B=S.map(Z=>F.find(me=>me.id===Z)).filter(Z=>Z!==void 0)),n&&le.length>0&&(B=B.filter(Z=>le.includes(Z.id))),B},[n,S,F,le]),[he,R]=Ce.useState(!1),[L,q]=Ce.useState(!1);return Ce.useEffect(()=>{if(sessionStorage.getItem("routevm_loaded")){q(!1);const Z=setTimeout(()=>{R(!0)},1e3);return()=>clearTimeout(Z)}else{q(!0);const Z=setTimeout(()=>{R(!0),sessionStorage.setItem("routevm_loaded","true")},5e3);return()=>clearTimeout(Z)}},[]),Ce.useEffect(()=>{const B=()=>{sessionStorage.removeItem("routevm_loaded")},Z=()=>{document.hidden&&sessionStorage.removeItem("routevm_loaded")};return window.addEventListener("beforeunload",B),document.addEventListener("visibilitychange",Z),()=>{window.removeEventListener("beforeunload",B),document.removeEventListener("visibilitychange",Z)}},[]),i||c||u||!he?s.jsx("div",{className:"min-h-screen relative",children:L?s.jsx(rl,{message:"Loading Custom Table...",type:"ripple"}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Loading..."})]})})}):d||!l?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex h-16 w-16 mx-auto items-center justify-center rounded-lg bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400",children:s.jsx(Gu,{className:"h-8 w-8"})}),s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Custom Table Not Found"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"The custom table you're looking for doesn't exist or has been removed."})]})}):s.jsxs(s.Fragment,{children:[s.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 w-full border-b-2 border-blue-500/50 dark:border-blue-400/50 bg-gradient-to-r from-blue-500/10 via-blue-600/10 to-blue-700/10 dark:from-blue-500/20 dark:via-blue-600/20 dark:to-blue-700/20 backdrop-blur supports-[backdrop-filter]:bg-background/60 shadow-lg shadow-blue-500/20",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex h-14 items-center justify-between text-[12px]",children:[s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("div",{className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[s.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-none overflow-hidden",children:s.jsx("img",{src:"/assets/Logofm.png",alt:"Logo",className:"h-full w-full object-cover"})}),s.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 text-[12px]",children:l.name})]})}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Custom Table View"})]})})}),s.jsx("div",{className:"fixed top-[56px] left-0 right-0 z-40 bg-gradient-to-r from-blue-500/90 via-blue-600/90 to-blue-700/90 dark:from-blue-600/90 dark:via-blue-700/90 dark:to-blue-800/90 backdrop-blur-sm border-b-2 border-blue-400/50 dark:border-blue-500/50 shadow-lg",children:s.jsx("div",{className:"container mx-auto px-4 py-2.5",children:s.jsx("div",{className:"flex items-center justify-center gap-2 text-white",children:n?s.jsxs(s.Fragment,{children:[s.jsx(ji,{className:"h-4 w-4 flex-shrink-0 animate-pulse"}),s.jsx("span",{className:"text-xs font-medium",children:" Preview Mode: Interactive playground - changes are temporary and won't be saved"})]}):s.jsxs(s.Fragment,{children:[s.jsx(cn,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"text-xs font-medium",children:" Read-Only Mode: View only, no interactions"})]})})})}),s.jsx("main",{className:"pt-[96px]",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50/80 to-cyan-50/80 dark:from-blue-900/30 dark:to-cyan-900/30 rounded-lg border-2 border-blue-200/50 dark:border-blue-700/50 backdrop-blur-sm shadow-md",children:s.jsxs("div",{className:"flex flex-col gap-3 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-semibold text-blue-900 dark:text-blue-100",children:" Delivery OFF:"}),s.jsx("span",{className:"text-blue-800 dark:text-blue-200 font-medium",children:(()=>{const B=new Date().getDay(),Z=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],me=[1,3,5,0].includes(B),qe=[2,4,6].includes(B);return me?`Alt 2 (${Z[B]})`:qe?`Alt 1 (${Z[B]})`:Z[B]})()})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-semibold text-blue-900 dark:text-blue-100 flex-shrink-0",children:" Expired Color:"}),s.jsx("div",{className:"flex items-center gap-1.5",children:(()=>{const B=new Date().getDay(),me=[{name:"Purple",bg:"bg-purple-400",border:"border-purple-600"},{name:"Pink",bg:"bg-pink-400",border:"border-pink-600"},{name:"Yellow",bg:"bg-yellow-400",border:"border-yellow-600"},{name:"Blue",bg:"bg-blue-400",border:"border-blue-600"},{name:"Orange",bg:"bg-orange-400",border:"border-orange-600"},{name:"Brown",bg:"bg-amber-700",border:"border-amber-900"},{name:"Green",bg:"bg-green-400",border:"border-green-600"}][B];return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${me.bg} border ${me.border} shadow-sm`}),s.jsx("span",{className:"text-blue-800 dark:text-blue-200 font-medium",children:me.name})]})})()})]})]})}),s.jsx(sl,{rows:ue,columns:Se,editMode:!1,isSharedView:!0,hideShareButton:!0,disablePagination:!0,onUpdateRow:ve,onDeleteRow:be,onReorderRows:A,onReorderColumns:Ie,onDeleteColumn:G,onSelectRowForImage:k,onShowCustomization:n?()=>_(!0):()=>{},onOptimizeRoute:n?()=>z(!0):()=>{},isAuthenticated:!1,searchTerm:n?f:"",onSearchTermChange:n?b:()=>{},filterValue:[],onFilterValueChange:()=>{},deliveryFilterValue:n?x:[],onDeliveryFilterValueChange:n?g:()=>{},routeOptions:[],deliveryOptions:n?ae:[],onClearAllFilters:n?ee:()=>{},filteredRowsCount:J.length,totalRowsCount:m.length})]})}),s.jsx(Pn,{editMode:!1}),n&&s.jsx(Mh,{open:T,onOpenChange:_,columns:a,visibleColumns:le,onApplyChanges:xe,editMode:!1}),n&&s.jsx($h,{open:V,onOpenChange:z,rows:ue,previewMode:n,onApplyTempOrder:je})]})}function eC(e,t){return h.useReducer((r,n)=>t[r][n]??r,e)}var wl="ScrollArea",[ff,IC]=er(wl),[tC,Ft]=ff(wl),gf=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:o=600,...i}=e,[l,c]=h.useState(null),[d,p]=h.useState(null),[u,m]=h.useState(null),[f,b]=h.useState(null),[x,g]=h.useState(null),[v,y]=h.useState(0),[w,k]=h.useState(0),[C,N]=h.useState(!1),[S,I]=h.useState(!1),T=ut(t,V=>c(V)),_=ci(a);return s.jsx(tC,{scope:r,type:n,dir:_,scrollHideDelay:o,scrollArea:l,viewport:d,onViewportChange:p,content:u,onContentChange:m,scrollbarX:f,onScrollbarXChange:b,scrollbarXEnabled:C,onScrollbarXEnabledChange:N,scrollbarY:x,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:I,onCornerWidthChange:y,onCornerHeightChange:k,children:s.jsx(Xe.div,{dir:_,...i,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});gf.displayName=wl;var bf="ScrollAreaViewport",xf=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...o}=e,i=Ft(bf,r),l=h.useRef(null),c=ut(t,l,i.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(Xe.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});xf.displayName=bf;var tr="ScrollAreaScrollbar",kl=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Ft(tr,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=a,l=e.orientation==="horizontal";return h.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),a.type==="hover"?s.jsx(rC,{...n,ref:t,forceMount:r}):a.type==="scroll"?s.jsx(sC,{...n,ref:t,forceMount:r}):a.type==="auto"?s.jsx(vf,{...n,ref:t,forceMount:r}):a.type==="always"?s.jsx(jl,{...n,ref:t}):null});kl.displayName=tr;var rC=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Ft(tr,e.__scopeScrollArea),[o,i]=h.useState(!1);return h.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),i(!0)},p=()=>{c=window.setTimeout(()=>i(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",p),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",p)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(Wt,{present:r||o,children:s.jsx(vf,{"data-state":o?"visible":"hidden",...n,ref:t})})}),sC=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Ft(tr,e.__scopeScrollArea),o=e.orientation==="horizontal",i=Fa(()=>c("SCROLL_END"),100),[l,c]=eC("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return h.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),h.useEffect(()=>{const d=a.viewport,p=o?"scrollLeft":"scrollTop";if(d){let u=d[p];const m=()=>{const f=d[p];u!==f&&(c("SCROLL"),i()),u=f};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[a.viewport,o,c,i]),s.jsx(Wt,{present:r||l!=="hidden",children:s.jsx(jl,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:Pe(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Pe(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),vf=h.forwardRef((e,t)=>{const r=Ft(tr,e.__scopeScrollArea),{forceMount:n,...a}=e,[o,i]=h.useState(!1),l=e.orientation==="horizontal",c=Fa(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,p=r.viewport.offsetHeight<r.viewport.scrollHeight;i(l?d:p)}},10);return Ls(r.viewport,c),Ls(r.content,c),s.jsx(Wt,{present:n||o,children:s.jsx(jl,{"data-state":o?"visible":"hidden",...a,ref:t})})}),jl=h.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=Ft(tr,e.__scopeScrollArea),o=h.useRef(null),i=h.useRef(0),[l,c]=h.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Nf(l.viewport,l.content),p={...n,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function u(m,f){return cC(m,i.current,l,f)}return r==="horizontal"?s.jsx(nC,{...p,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const m=a.viewport.scrollLeft,f=td(m,l,a.dir);o.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=u(m,a.dir))}}):r==="vertical"?s.jsx(aC,{...p,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const m=a.viewport.scrollTop,f=td(m,l);o.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=u(m))}}):null}),nC=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,o=Ft(tr,e.__scopeScrollArea),[i,l]=h.useState(),c=h.useRef(null),d=ut(t,c,o.onScrollbarXChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(wf,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":_a(r)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.x),onDragScroll:p=>e.onDragScroll(p.x),onWheelScroll:(p,u)=>{if(o.viewport){const m=o.viewport.scrollLeft+p.deltaX;e.onWheelScroll(m),Sf(m,u)&&p.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:pa(i.paddingLeft),paddingEnd:pa(i.paddingRight)}})}})}),aC=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,o=Ft(tr,e.__scopeScrollArea),[i,l]=h.useState(),c=h.useRef(null),d=ut(t,c,o.onScrollbarYChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(wf,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":_a(r)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.y),onDragScroll:p=>e.onDragScroll(p.y),onWheelScroll:(p,u)=>{if(o.viewport){const m=o.viewport.scrollTop+p.deltaY;e.onWheelScroll(m),Sf(m,u)&&p.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:pa(i.paddingTop),paddingEnd:pa(i.paddingBottom)}})}})}),[oC,yf]=ff(tr),wf=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:p,onResize:u,...m}=e,f=Ft(tr,r),[b,x]=h.useState(null),g=ut(t,T=>x(T)),v=h.useRef(null),y=h.useRef(""),w=f.viewport,k=n.content-n.viewport,C=Bt(p),N=Bt(c),S=Fa(u,10);function I(T){if(v.current){const _=T.clientX-v.current.left,V=T.clientY-v.current.top;d({x:_,y:V})}}return h.useEffect(()=>{const T=_=>{const V=_.target;(b==null?void 0:b.contains(V))&&C(_,k)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[w,b,k,C]),h.useEffect(N,[n,N]),Ls(b,S),Ls(f.content,S),s.jsx(oC,{scope:r,scrollbar:b,hasThumb:a,onThumbChange:Bt(o),onThumbPointerUp:Bt(i),onThumbPositionChange:N,onThumbPointerDown:Bt(l),children:s.jsx(Xe.div,{...m,ref:g,style:{position:"absolute",...m.style},onPointerDown:Pe(e.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),v.current=b.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),I(T))}),onPointerMove:Pe(e.onPointerMove,I),onPointerUp:Pe(e.onPointerUp,T=>{const _=T.target;_.hasPointerCapture(T.pointerId)&&_.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=y.current,f.viewport&&(f.viewport.style.scrollBehavior=""),v.current=null})})})}),ma="ScrollAreaThumb",kf=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=yf(ma,e.__scopeScrollArea);return s.jsx(Wt,{present:r||a.hasThumb,children:s.jsx(iC,{ref:t,...n})})}),iC=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,o=Ft(ma,r),i=yf(ma,r),{onThumbPositionChange:l}=i,c=ut(t,u=>i.onThumbChange(u)),d=h.useRef(void 0),p=Fa(()=>{d.current&&(d.current(),d.current=void 0)},100);return h.useEffect(()=>{const u=o.viewport;if(u){const m=()=>{if(p(),!d.current){const f=dC(u,l);d.current=f,l()}};return l(),u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[o.viewport,p,l]),s.jsx(Xe.div,{"data-state":i.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Pe(e.onPointerDownCapture,u=>{const f=u.target.getBoundingClientRect(),b=u.clientX-f.left,x=u.clientY-f.top;i.onThumbPointerDown({x:b,y:x})}),onPointerUp:Pe(e.onPointerUp,i.onThumbPointerUp)})});kf.displayName=ma;var Nl="ScrollAreaCorner",jf=h.forwardRef((e,t)=>{const r=Ft(Nl,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(lC,{...e,ref:t}):null});jf.displayName=Nl;var lC=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=Ft(Nl,r),[o,i]=h.useState(0),[l,c]=h.useState(0),d=!!(o&&l);return Ls(a.scrollbarX,()=>{var u;const p=((u=a.scrollbarX)==null?void 0:u.offsetHeight)||0;a.onCornerHeightChange(p),c(p)}),Ls(a.scrollbarY,()=>{var u;const p=((u=a.scrollbarY)==null?void 0:u.offsetWidth)||0;a.onCornerWidthChange(p),i(p)}),d?s.jsx(Xe.div,{...n,ref:t,style:{width:o,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function pa(e){return e?parseInt(e,10):0}function Nf(e,t){const r=e/t;return isNaN(r)?0:r}function _a(e){const t=Nf(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function cC(e,t,r,n="ltr"){const a=_a(r),o=a/2,i=t||o,l=a-i,c=r.scrollbar.paddingStart+i,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,p=r.content-r.viewport,u=n==="ltr"?[0,p]:[p*-1,0];return Cf([c,d],u)(e)}function td(e,t,r="ltr"){const n=_a(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-a,i=t.content-t.viewport,l=o-n,c=r==="ltr"?[0,i]:[i*-1,0],d=_0(e,c);return Cf([0,i],[0,l])(d)}function Cf(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Sf(e,t){return e>0&&e<t}var dC=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const o={left:e.scrollLeft,top:e.scrollTop},i=r.left!==o.left,l=r.top!==o.top;(i||l)&&t(),r=o,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function Fa(e,t){const r=Bt(e),n=h.useRef(0);return h.useEffect(()=>()=>window.clearTimeout(n.current),[]),h.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Ls(e,t){const r=Bt(t);hd(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var Ef=gf,uC=xf,mC=jf;const Rf=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Ef,{ref:n,className:X("relative overflow-hidden",e),...r,children:[s.jsx(uC,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(Df,{}),s.jsx(mC,{})]}));Rf.displayName=Ef.displayName;const Df=h.forwardRef(({className:e,orientation:t="vertical",...r},n)=>s.jsx(kl,{ref:n,orientation:t,className:X("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(kf,{className:"relative flex-1 rounded-full bg-border"})}));Df.displayName=kl.displayName;function pC(){return s.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-br from-slate-50 via-slate-100 to-slate-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950",children:[s.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 w-full border-b-2 border-blue-500/50 dark:border-blue-400/50 bg-gradient-to-r from-blue-500/10 via-blue-600/10 to-blue-700/10 dark:from-blue-500/20 dark:via-blue-600/20 dark:to-blue-700/20 backdrop-blur supports-[backdrop-filter]:bg-background/60 shadow-lg shadow-blue-500/20",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex h-14 items-center justify-between text-[12px]",children:[s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("div",{className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[s.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-none overflow-hidden",children:s.jsx("img",{src:"/assets/Logofm.png",alt:"Logo",className:"h-full w-full object-cover"})}),s.jsxs("div",{className:"flex flex-col gap-0 leading-tight",children:[s.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 leading-none",style:{fontSize:"12px"},children:"User Guide"}),s.jsx("span",{className:"text-slate-400 dark:text-slate-500 leading-none my-0.5",style:{fontSize:"9px"},children:"Complete guide and documentation"})]})]})}),s.jsx(vg,{href:"/",children:s.jsxs(O,{variant:"outline",size:"sm",className:"bg-transparent border-transparent w-8 h-8 md:w-auto md:h-9 p-0 md:px-3 pagination-button group transition-all duration-300 ease-out hover:scale-110 hover:shadow-lg hover:shadow-blue-500/20 active:scale-95 active:shadow-none",title:"Back",children:[s.jsx(wi,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 transition-all duration-300"}),s.jsx("span",{className:"hidden md:inline ml-2 text-xs transition-all duration-300",children:"Back"})]})})]})})}),s.jsx("div",{className:"pt-16 pb-0 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx(Ia,{className:"mt-6 bg-white/70 dark:bg-slate-900/50 border-slate-300 dark:border-slate-800 backdrop-blur-sm",children:s.jsx(Ta,{className:"mt-6",children:s.jsx(Rf,{className:"h-[calc(100vh-200px)] pr-4",children:s.jsxs("div",{className:"space-y-6 text-slate-700 dark:text-slate-300 leading-relaxed text-sm",children:[s.jsxs("section",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-3 flex items-center gap-2",children:[s.jsx(Fu,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),"What is This App?"]}),s.jsx("p",{className:"text-sm",children:"This is a comprehensive delivery route management system designed to help you efficiently manage delivery location data. You can organize, edit, and optimize delivery routes with ease using an interactive drag-and-drop interface. The system is built to streamline your logistics operations and improve delivery efficiency."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-3",children:"Key Features"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-2 flex items-center gap-2 text-sm",children:[s.jsx(Qu,{className:"h-4 w-4"}),"1. Table Management"]}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[s.jsx("li",{children:"Add, edit, and delete location data rows"}),s.jsx("li",{children:"Drag-and-drop to reorder entries"}),s.jsx("li",{children:"Show/hide columns based on your needs"}),s.jsx("li",{children:"Search and filter to quickly find data"}),s.jsx("li",{children:"Real-time calculations and statistics"})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-2 flex items-center gap-2 text-sm",children:[s.jsx(Qb,{className:"h-4 w-4"}),"2. Edit Mode"]}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[s.jsx("li",{children:'Click the menu button () and select "Enter Edit Mode"'}),s.jsx("li",{children:"Add, modify, or delete data while in edit mode"}),s.jsx("li",{children:"Drag-and-drop to rearrange columns"}),s.jsx("li",{children:"Customize marker colors for map visualization"}),s.jsx("li",{children:'Click "Exit Edit Mode" when finished'})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-2 flex items-center gap-2 text-sm",children:[s.jsx(Qn,{className:"h-4 w-4"}),"3. Route Optimization"]}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[s.jsx("li",{children:'Click "Optimize Route" to calculate optimal delivery sequences'}),s.jsx("li",{children:"System automatically calculates distances and arranges the shortest routes"}),s.jsx("li",{children:"Supports Heavy Goods Vehicle (HGV/Lorry) routing profiles"}),s.jsx("li",{children:"View distances in kilometers from your base location (QL Kitchen)"}),s.jsx("li",{children:"Batch processing with intelligent rate limiting"})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-2 flex items-center gap-2 text-sm",children:[s.jsx(Vb,{className:"h-4 w-4"}),"4. Map View"]}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[s.jsx("li",{children:"Click the info icon () to view locations on the map"}),s.jsx("li",{children:"Marker colors can be customized in edit mode"}),s.jsx("li",{children:"Fullscreen map view for better visualization"}),s.jsx("li",{children:"Automatic route calculation from base location"}),s.jsx("li",{children:"Interactive markers with location details"})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-2 flex items-center gap-2 text-sm",children:[s.jsx(is,{className:"h-4 w-4"}),"5. Image Gallery"]}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[s.jsx("li",{children:"Upload images for each location"}),s.jsx("li",{children:"Support for multiple images per location"}),s.jsx("li",{children:"Lightbox view to see images in full size"}),s.jsx("li",{children:"Upload from your device or enter image URLs"}),s.jsx("li",{children:"Support for various image formats and large files"})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-2 flex items-center gap-2 text-sm",children:[s.jsx(Yu,{className:"h-4 w-4"}),"6. Delivery Alternate System"]}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[s.jsx("li",{children:"4 delivery states: Normal, Alt 1, Alt 2, Inactive"}),s.jsx("li",{children:"Alt 1: Deliveries on Monday/Wednesday/Friday/Sunday"}),s.jsx("li",{children:"Alt 2: Deliveries on Tuesday/Thursday/Saturday"}),s.jsx("li",{children:"Automatic sorting based on current day"}),s.jsx("li",{children:"Color-coded visual indicators for each state"}),s.jsx("li",{children:"Off-schedule entries displayed with reduced brightness"})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-2 flex items-center gap-2 text-sm",children:[s.jsx(Ni,{className:"h-4 w-4"}),"7. Share Table"]}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[s.jsx("li",{children:'Click "Share Table" to generate a shareable link'}),s.jsx("li",{children:"Save links with custom names for easy reference"}),s.jsx("li",{children:"Share links with team members for view-only access"}),s.jsx("li",{children:"Access saved links from the menu"}),s.jsx("li",{children:"Shared tables maintain your current filters and column visibility"})]})]})]})]}),s.jsxs("section",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-3 flex items-center gap-2",children:[s.jsx($b,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}),"Usage Tips"]}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4 text-sm",children:[s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold",children:"Default Columns:"}),' By default, only 4 columns are displayed (No, Code, Location, Delivery). Use "Show/Hide Columns" to toggle additional columns.']}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold",children:"Drag Handle:"})," Use the drag icon () on the left side of each row to drag-and-drop and reorder entries."]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold",children:"Search:"})," Use the search box to quickly find data. Search works across all visible columns."]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold",children:"Filters:"})," Filter by Route or Delivery status using the dropdown filters for focused views."]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold",children:"Calculations:"}),' The "Totals" row at the bottom automatically calculates sum/count based on visible data (after filters/search).']}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold",children:"Inactive Rows:"})," Toggle the active/inactive state to temporarily hide locations. Inactive rows automatically sort to the bottom."]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold",children:"Header Content:"})," Slide left/right to view different header pages if multiple pages are configured."]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold",children:"Layout Preferences:"})," Your column visibility and order preferences are saved per user and persist across sessions."]})]})]}),s.jsxs("section",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-3 flex items-center gap-2",children:[s.jsx(Yb,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),"Getting Started"]}),s.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-4 text-sm",children:[s.jsx("li",{children:"Browse the existing table data to familiarize yourself with the interface"}),s.jsx("li",{children:"Use search and filters to explore the data"}),s.jsx("li",{children:"Click the menu button () to access additional options"}),s.jsx("li",{children:"Enter Edit Mode to make changes to the data"}),s.jsx("li",{children:"Try drag-and-drop to reorder rows and customize your view"}),s.jsx("li",{children:"Click the info icon () to view locations on the map"}),s.jsx("li",{children:'Use "Optimize Route" to calculate efficient delivery sequences'}),s.jsx("li",{children:"Exit Edit Mode when you're done making changes"})]})]}),s.jsxs("section",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-3 flex items-center gap-2",children:[s.jsx(Fb,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"}),"Keyboard Shortcuts"]}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[s.jsxs("li",{children:[s.jsx("kbd",{className:"px-2 py-1 text-xs bg-slate-800 rounded border border-slate-700",children:"Esc"})," - Close modal/dialog windows"]}),s.jsxs("li",{children:[s.jsx("kbd",{className:"px-2 py-1 text-xs bg-slate-800 rounded border border-slate-700",children:"Enter"})," - Submit forms and confirm actions"]})]})]}),s.jsxs("section",{className:"bg-blue-500/10 dark:bg-blue-500/10 border border-blue-500/30 dark:border-blue-500/20 rounded-lg p-4",children:[s.jsxs("h2",{className:"text-lg font-semibold text-blue-700 dark:text-blue-400 mb-2 flex items-center gap-2",children:[s.jsx($u,{className:"h-4 w-4"}),"Important Notes"]}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold",children:"Route Optimization:"})," Uses OpenRouteService API for commercial vehicle routing"]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold",children:"Toll Information:"})," Toll prices are not available and will display as 0"]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold",children:"Rate Limits:"})," Free tier allows 40 requests per minute, 2000 requests per day"]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold",children:"Batch Processing:"})," For routes with many locations, the system processes requests sequentially to respect rate limits"]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold",children:"Data Privacy:"})," Your layout preferences and settings are stored locally per user"]})]})]}),s.jsxs("section",{className:"bg-green-500/10 dark:bg-green-500/10 border border-green-500/30 dark:border-green-500/20 rounded-lg p-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-green-700 dark:text-green-400 mb-2",children:"Best Practices"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[s.jsx("li",{children:'Regularly save your work using the "Save Layout" option'}),s.jsx("li",{children:"Use descriptive names when saving share links for easy identification"}),s.jsx("li",{children:"Keep location coordinates accurate for optimal route calculations"}),s.jsx("li",{children:"Use the delivery alternate system to organize regular delivery schedules"}),s.jsx("li",{children:"Take advantage of filters to focus on specific routes or delivery types"})]})]}),s.jsxs("section",{children:[s.jsx("p",{className:"text-center text-slate-600 dark:text-slate-400 italic mt-8 text-sm",children:"For technical support or questions, please contact your system administrator."}),s.jsx("p",{className:"text-center text-slate-500 dark:text-slate-500 text-xs mt-4 mb-0",children:"Route Management System  Version 1.0.0"})]})]})})})})}),s.jsx(Pn,{})]})}function hC(){return s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:s.jsx(Ia,{className:"w-full max-w-md mx-4",children:s.jsxs(Ta,{className:"pt-6",children:[s.jsxs("div",{className:"flex mb-4 gap-2",children:[s.jsx($u,{className:"h-8 w-8 text-red-500"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),s.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function fC(){return s.jsx("div",{className:"min-h-screen pb-16 text-sm",children:s.jsxs(yg,{children:[s.jsx(as,{path:"/",children:()=>s.jsx(Y2,{})}),s.jsx(as,{path:"/share/:shareId",children:()=>s.jsx(X2,{})}),s.jsx(as,{path:"/custom-tables",children:()=>s.jsx(J2,{})}),s.jsx(as,{path:"/custom/:shareId",children:()=>s.jsx(Z2,{})}),s.jsx(as,{path:"/help",children:()=>s.jsx(pC,{})}),s.jsx(as,{component:hC})]})})}function gC(){return s.jsx($g,{client:lr,children:s.jsx(nv,{children:s.jsxs(rv,{children:[s.jsx(Fx,{}),s.jsx(fC,{})]})})})}Vd(document.getElementById("root")).render(s.jsx(gC,{}));
